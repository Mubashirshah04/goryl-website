exports.id=4546,exports.ids=[4546],exports.modules={762:(a,b,c)=>{"use strict";c.d(b,{db:()=>l,j2:()=>k,storage:()=>m});var d=c(67989),e=c(14808),f=c(75535),g=c(70146),h=c(24791),i=c(90555);c(10178);let j=(0,d.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),k=(0,e.xI)(j),l=(0,f.aU)(j);(0,i.C3)(j);let m=(0,g.c7)(j);(0,h.Uz)(j),console.log("\uD83D\uDE80 Using production Firebase configuration for project:",j.options.projectId)},974:(a,b,c)=>{"use strict";c.d(b,{At:()=>u,Dg:()=>l,Kv:()=>j,Od:()=>k,Qt:()=>p,VN:()=>n,Vf:()=>r,YE:()=>f,_z:()=>m,lk:()=>t,pV:()=>o,ri:()=>q,sy:()=>i,wx:()=>s,zh:()=>v});var d=c(75535),e=c(762);let f=async(a,b)=>{try{let c=(0,d.doc)(e.db,a,b),f=await (0,d.x7)(c);if(f.exists())return Object.assign({id:f.id},f.data());return null}catch(a){throw console.error("Error getting document:",a),a}},g=async(a,b,c)=>{try{let f=(0,d.doc)(e.db,a,b);await (0,d.mZ)(f,Object.assign(Object.assign({},c),{updatedAt:(0,d.serverTimestamp)()}))}catch(a){throw console.error("Error updating document:",a),a}},h=async(a,b=[],c,f="desc",g)=>{try{let h=(0,d.collection)(e.db,a);return b.forEach(a=>{h=(0,d.query)(h,(0,d.where)(a.field,a.operator,a.value))}),c&&(h=(0,d.query)(h,(0,d.My)(c,f))),g&&(h=(0,d.query)(h,(0,d.AB)(g))),(await (0,d.getDocs)(h)).docs.map(a=>Object.assign({id:a.id},a.data()))}catch(a){throw console.error("Error querying documents:",a),a}},i=(a,b,c=[],f,g="desc")=>{let h=(0,d.collection)(e.db,a);return c.forEach(a=>{h=(0,d.query)(h,(0,d.where)(a.field,a.operator,a.value))}),f&&(h=(0,d.query)(h,(0,d.My)(f,g))),(0,d.onSnapshot)(h,a=>{b(a.docs.map(a=>Object.assign({id:a.id},a.data())))})},j=async(a,b)=>{try{await g("orders",a,{status:b,updatedAt:(0,d.serverTimestamp)()})}catch(a){throw console.error("Error updating order status:",a),a}},k=async a=>{try{return await h("orders",[{field:"sellerId",operator:"==",value:a}],"createdAt","desc")}catch(a){throw console.error("Error listing seller orders:",a),a}},l=async(a,b)=>{try{let c=(await h("chats",[{field:"participants",operator:"array-contains",value:a}])).find(a=>a.participants.includes(b));if(c)return c.id;return(await (0,d.addDoc)((0,d.collection)(e.db,"chats"),{participants:[a,b],lastMessage:null,lastMessageTime:null,createdAt:(0,d.serverTimestamp)()})).id}catch(a){throw console.error("Error starting chat:",a),a}},m=async(a,b,c,f)=>{try{let h=await (0,d.addDoc)((0,d.collection)(e.db,"chats",a,"messages"),{text:c,senderId:b,senderName:f,createdAt:(0,d.serverTimestamp)()});return await g("chats",a,{lastMessage:c,lastMessageTime:(0,d.serverTimestamp)()}),h.id}catch(a){throw console.error("Error sending message:",a),a}},n=async a=>{try{return await h("chats",[{field:"participants",operator:"array-contains",value:a}],"lastMessageTime","desc")}catch(a){throw console.error("Error getting user chats:",a),a}},o=async(a,b)=>{try{let c=(0,d.doc)(e.db,"follows",`${a}_${b}`);if((await (0,d.x7)(c)).exists())return void console.log(`User ${a} is already following user ${b}`);let f=(0,d.wP)(e.db),g=(0,d.doc)(e.db,"users",a);f.update(g,{following:(0,d.GV)(1),updatedAt:(0,d.serverTimestamp)()});let h=(0,d.doc)(e.db,"users",b);f.update(h,{followers:(0,d.GV)(1),updatedAt:(0,d.serverTimestamp)()}),f.set(c,{followerId:a,followingId:b,createdAt:(0,d.serverTimestamp)()}),await f.commit(),console.log(`User ${a} followed user ${b}`)}catch(a){throw console.error("Error following user:",a),a}},p=async(a,b)=>{try{let c=(0,d.doc)(e.db,"follows",`${a}_${b}`);if(!(await (0,d.x7)(c)).exists())return void console.log(`User ${a} is not following user ${b}`);let f=(0,d.wP)(e.db),g=(0,d.doc)(e.db,"users",a);f.update(g,{following:(0,d.GV)(-1),updatedAt:(0,d.serverTimestamp)()});let h=(0,d.doc)(e.db,"users",b);f.update(h,{followers:(0,d.GV)(-1),updatedAt:(0,d.serverTimestamp)()}),f.delete(c),await f.commit(),console.log(`User ${a} unfollowed user ${b}`)}catch(a){throw console.error("Error unfollowing user:",a),a}},q=async a=>{try{let b=(0,d.collection)(e.db,"follows"),c=(0,d.query)(b,(0,d.where)("followingId","==",a));return(await (0,d.getDocs)(c)).docs.map(a=>a.data().followerId)}catch(a){return console.error("Error getting user followers:",a),[]}},r=async a=>{try{let b=(0,d.collection)(e.db,"follows"),c=(0,d.query)(b,(0,d.where)("followerId","==",a));return(await (0,d.getDocs)(c)).docs.map(a=>a.data().followingId)}catch(a){return console.error("Error getting user following:",a),[]}},s=(a,b)=>{let c=(0,d.doc)(e.db,"users",a);return(0,d.onSnapshot)(c,a=>{if(a.exists()){let c=a.data();b({followers:c.followers||0,following:c.following||0})}else b({followers:0,following:0})})},t=(a,b,c)=>{let f=(0,d.doc)(e.db,"follows",`${a}_${b}`);return(0,d.onSnapshot)(f,a=>{c(a.exists())})},u=async(a,b)=>{try{let c=(0,d.doc)(e.db,"follows",`${a}_${b}`);return(await (0,d.x7)(c)).exists()}catch(a){return console.error("Error checking follow status:",a),!1}},v=async(a,b={})=>{try{let c=[{field:"status",operator:"==",value:"active"}];b.category&&c.push({field:"category",operator:"==",value:b.category}),void 0!==b.minPrice&&c.push({field:"price",operator:">=",value:b.minPrice}),void 0!==b.maxPrice&&c.push({field:"price",operator:"<=",value:b.maxPrice});let d=await h("products",c,"createdAt","desc",50);if(a){let b=a.toLowerCase();return d.filter(a=>{var c,d,e;return(null==(c=a.title)?void 0:c.toLowerCase().includes(b))||(null==(d=a.description)?void 0:d.toLowerCase().includes(b))||(null==(e=a.brand)?void 0:e.toLowerCase().includes(b))})}return d}catch(a){throw console.error("Error searching products:",a),a}}},6125:(a,b,c)=>{Promise.resolve().then(c.bind(c,14143)),Promise.resolve().then(c.bind(c,94555))},14143:(a,b,c)=>{"use strict";c.d(b,{Layout:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call Layout() from the server but Layout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Goryl Website\\goryl\\src\\components\\layout\\Layout.tsx","Layout")},20109:(a,b,c)=>{"use strict";c.d(b,{x:()=>n});var d=c(85665),e=c(75535),f=c(762);let g=async a=>{try{let b=(0,e.doc)(f.db,"carts",a),c=await (0,e.x7)(b);if(c.exists())return Object.assign({id:c.id},c.data());return null}catch(a){throw console.error("Error getting user cart:",a),a}},h=async a=>{try{let b=(0,e.doc)(f.db,"carts",a),c=await (0,e.x7)(b);if(c.exists())return Object.assign({id:c.id},c.data());{let c={userId:a,items:[],itemCount:0,subtotal:0,createdAt:(0,e.serverTimestamp)(),updatedAt:(0,e.serverTimestamp)()};return await (0,e.BN)(b,c),Object.assign({id:a},c)}}catch(a){throw console.error("Error getting or creating cart:",a),a}},i=async(a,b,c=1)=>{try{console.log("Cart service - addToCart called:",{userId:a,product:b,quantity:c});let d=await h(a);console.log("Cart service - Got cart:",d);let g=(0,e.doc)(f.db,"carts",a),i=d.items.findIndex(a=>a.productId===b.id);if(console.log("Cart service - Existing item index:",i),i>=0){let a=[...d.items];a[i].quantity+=c;let b=a.reduce((a,b)=>a+b.quantity*b.product.price,0),f=a.reduce((a,b)=>a+b.quantity,0);await (0,e.mZ)(g,{items:a,itemCount:f,subtotal:b,updatedAt:(0,e.serverTimestamp)()})}else{let f={id:`${Date.now()}-${Math.random()}`,userId:a,productId:b.id,product:{id:b.id,title:b.title,image:b.images&&b.images.length>0?b.images[0]:"",price:b.price,stock:b.stock},quantity:c,addedAt:new Date},h=[...d.items,f],i=h.reduce((a,b)=>a+b.quantity*b.product.price,0),j=h.reduce((a,b)=>a+b.quantity,0);await (0,e.mZ)(g,{items:h,itemCount:j,subtotal:i,updatedAt:(0,e.serverTimestamp)()})}}catch(a){throw console.error("Error adding to cart:",a),a}},j=async(a,b,c)=>{try{let d=await g(a);if(!d)throw Error("Cart not found");let h=(0,e.doc)(f.db,"carts",a),i=d.items.map(a=>a.productId===b?Object.assign(Object.assign({},a),{quantity:c}):a),j=i.reduce((a,b)=>a+b.quantity*b.product.price,0),k=i.reduce((a,b)=>a+b.quantity,0);await (0,e.mZ)(h,{items:i,itemCount:k,subtotal:j,updatedAt:(0,e.serverTimestamp)()})}catch(a){throw console.error("Error updating cart item quantity:",a),a}},k=async(a,b)=>{try{let c=await g(a);if(!c)throw Error("Cart not found");let d=(0,e.doc)(f.db,"carts",a),h=c.items.filter(a=>a.productId!==b),i=h.reduce((a,b)=>a+b.quantity*b.product.price,0),j=h.reduce((a,b)=>a+b.quantity,0);await (0,e.mZ)(d,{items:h,itemCount:j,subtotal:i,updatedAt:(0,e.serverTimestamp)()})}catch(a){throw console.error("Error removing from cart:",a),a}},l=async a=>{try{let b=(0,e.doc)(f.db,"carts",a);await (0,e.mZ)(b,{items:[],itemCount:0,subtotal:0,updatedAt:(0,e.serverTimestamp)()})}catch(a){throw console.error("Error clearing cart:",a),a}};var m=c(72106);let n=(0,d.vt)((a,b)=>({cart:null,loading:!1,error:null,setCart:b=>a({cart:b}),setLoading:b=>a({loading:b}),setError:b=>a({error:b}),initializeCart:async c=>{let{cart:d}=b();if(d)return void console.log("Cart already initialized, skipping...");a({loading:!0,error:null});try{a({cart:{id:`temp-${c}`,userId:c,items:[],itemCount:0,subtotal:0,updatedAt:new Date},loading:!1});let b=await g(c);b&&a({cart:b});let d=((a,b)=>{let c=(0,e.doc)(f.db,"carts",a);return(0,e.onSnapshot)(c,a=>{a.exists()?b(Object.assign({id:a.id},a.data())):b(null)})})(c,b=>{a({cart:b})});window.cartUnsubscribe=d}catch(b){console.error("Error initializing cart:",b),a({error:"Failed to load cart",loading:!1})}},addToCart:async(b,c=1)=>{let{user:d}=m.useAuthStore.getState();if(console.log("Cart store - addToCart called:",{product:b,quantity:c,user:!!d}),!d){console.log("Cart store - No user found"),a({error:"Please login to add items to cart"});return}a({loading:!0,error:null});try{console.log("Cart store - Calling addToCartService with:",{userId:d.uid,product:b,quantity:c}),await i(d.uid,b,c),console.log("Cart store - Successfully added to cart"),a({loading:!1})}catch(b){console.error("Cart store - Error adding to cart:",b),a({error:"Failed to add item to cart",loading:!1})}},removeFromCart:async b=>{let{user:c}=m.useAuthStore.getState();if(!c)return void a({error:"Please login to remove items from cart"});a({loading:!0,error:null});try{await k(c.uid,b),a({loading:!1})}catch(b){console.error("Error removing from cart:",b),a({error:"Failed to remove item from cart",loading:!1})}},updateQuantity:async(c,d)=>{let{user:e}=m.useAuthStore.getState();if(!e)return void a({error:"Please login to update cart"});if(d<=0)return void await b().removeFromCart(c);a({loading:!0,error:null});try{await j(e.uid,c,d),a({loading:!1})}catch(b){console.error("Error updating cart quantity:",b),a({error:"Failed to update quantity",loading:!1})}},clearCart:async()=>{let{user:b}=m.useAuthStore.getState();if(!b)return void a({error:"Please login to clear cart"});a({loading:!0,error:null});try{await l(b.uid),a({loading:!1})}catch(b){console.error("Error clearing cart:",b),a({error:"Failed to clear cart",loading:!1})}},getCartItemCount:()=>{var a;let{cart:c}=b();return(null==(a=null==c?void 0:c.items)?void 0:a.length)||0},getCartTotal:()=>{let{cart:a}=b();return(null==a?void 0:a.subtotal)||0}}))},20597:(a,b,c)=>{"use strict";c.d(b,{G6:()=>h,HW:()=>l,Hh:()=>j,Jv:()=>i,eT:()=>q,gL:()=>m,qc:()=>p,xw:()=>k});var d=c(14808),e=c(75535),f=c(762);let g=new d.HF;g.addScope("email"),g.addScope("profile");let h=async()=>{var a;try{let b=(await (0,d.df)(f.j2,g)).user;if(!(await (0,e.x7)((0,e.doc)(f.db,"users",b.uid))).exists()){let c={id:b.uid,email:b.email||"",name:b.displayName||"Anonymous",username:(null==(a=b.email)?void 0:a.split("@")[0])||"user",avatar:b.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,e.BN)((0,e.doc)(f.db,"users",b.uid),c)}return b}catch(a){throw console.error("Google sign-in error:",a),a}},i=async(a,b)=>{try{return(await (0,d.x9)(f.j2,a,b)).user}catch(a){throw a}},j=async(a,b,c,g="user")=>{try{let h=(await (0,d.eJ)(f.j2,a,b)).user;await (0,d.r7)(h,{displayName:c});try{let b={id:h.uid,email:h.email||"",name:c,username:a.split("@")[0],avatar:h.photoURL||"",bio:"",role:g,accountType:g,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,e.BN)((0,e.doc)(f.db,"users",h.uid),b),console.log("‚úÖ User profile created successfully")}catch(a){console.warn("Could not create user document in Firestore:",a)}return h}catch(a){throw console.error("Signup error:",a),a}},k=async a=>{try{await (0,d.J1)(f.j2,a)}catch(a){throw a}},l=()=>f.j2.currentUser,m=async a=>{try{let b=await (0,e.x7)((0,e.doc)(f.db,"users",a));if(b.exists())return b.data();return null}catch(a){return console.error("Error getting user data:",a),null}},n=async a=>{try{let b=await m(a);return(null==b?void 0:b.role)||"user"}catch(a){return console.error("Error checking user role:",a),"user"}},o=async a=>{try{let b=await m(a);return(null==b?void 0:b.accountType)||"user"}catch(a){return console.error("Error checking account type:",a),"user"}},p=async a=>"admin"===await n(a),q=async a=>["personal_seller","brand","company"].includes(await o(a))},41465:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>f});var d=c(60687),e=c(10218);function f({children:a}){return(0,d.jsx)(e.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a})}c(43210)},41689:(a,b,c)=>{"use strict";c.d(b,{he:()=>q,bA:()=>p,n6:()=>l,wA:()=>r,Jv:()=>o});var d=c(75535),e=c(762);let f=async a=>{try{let b=await (0,d.addDoc)((0,d.collection)(e.db,"mail"),{to:a.to,message:{subject:a.subject,html:a.html,text:a.message||"Please view this email in HTML format."},template:{name:a.type,data:{orderId:a.orderId,userId:a.userId,type:a.type}},createdAt:(0,d.serverTimestamp)(),processed:!1});return await (0,d.addDoc)((0,d.collection)(e.db,"emailNotifications"),Object.assign(Object.assign({},a),{createdAt:(0,d.serverTimestamp)(),sent:!1,firebaseEmailId:b.id})),console.log("‚úÖ Email queued for Firebase processing:",a.type),{success:!0,emailId:b.id}}catch(a){return console.error("‚ùå Error queuing email notification:",a),{success:!1,error:a}}},g=async(a,b,c,d)=>{var e,g;let h=`Order Confirmation - #${a.slice(-8).toUpperCase()}`,i=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Order Confirmation</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
        .content { background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px; }
        .order-details { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .total { font-weight: bold; font-size: 18px; color: #667eea; }
        .button { display: inline-block; background: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }
        .footer { text-align: center; color: #666; margin-top: 30px; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>üéâ Order Confirmed!</h1>
          <p>Thank you for your purchase</p>
        </div>
        
        <div class="content">
          <h2>Hi ${d.customerName||"Valued Customer"},</h2>
          
          <p>Great news! Your order has been successfully placed and confirmed.</p>
          
          <div class="order-details">
            <h3>üì¶ Order Details</h3>
            <div class="item">
              <span><strong>Order ID:</strong></span>
              <span>#${a.slice(-8).toUpperCase()}</span>
            </div>
            <div class="item">
              <span><strong>Order Date:</strong></span>
              <span>${new Date().toLocaleDateString()}</span>
            </div>
            <div class="item">
              <span><strong>Total Amount:</strong></span>
              <span class="total">$${(d.totalAmount||d.total||0).toFixed(2)}</span>
            </div>
            <div class="item">
              <span><strong>Payment Method:</strong></span>
              <span>${d.paymentMethod||"Online Payment"}</span>
            </div>
            <div class="item">
              <span><strong>Shipping Address:</strong></span>
              <span>${(null==(e=d.shippingAddress)?void 0:e.address)||"Address on file"}</span>
            </div>
          </div>
          
          <h3>üõçÔ∏è Items Ordered</h3>
          <div class="order-details">
            ${(null==(g=d.items)?void 0:g.map(a=>{var b,c;return`
              <div class="item">
                <span>${(null==(b=a.product)?void 0:b.title)||a.title||"Product"} (x${a.quantity||1})</span>
                <span>$${(((null==(c=a.product)?void 0:c.price)||a.price||0)*(a.quantity||1)).toFixed(2)}</span>
              </div>
            `}).join(""))||'<div class="item"><span>Order items</span><span>$'+(d.totalAmount||d.total||0).toFixed(2)+"</span></div>"}
          </div>
          
          <div style="text-align: center;">
            <a href="${process.env.NEXT_PUBLIC_APP_URL}/orders/${a}" class="button">
              üì± Track Your Order
            </a>
          </div>
          
          <h3>üìã What's Next?</h3>
          <ul>
            <li>‚úÖ Your order is being prepared by the seller</li>
            <li>üì¶ You'll receive shipping updates via email</li>
            <li>üöö Track your package in real-time</li>
            <li>‚≠ê Leave a review after delivery</li>
          </ul>
          
          <div class="footer">
            <p>Questions? Contact us at <a href="mailto:support@goryl.com">support@goryl.com</a></p>
            <p>\xa9 2024 Goryl Marketplace. All rights reserved.</p>
          </div>
        </div>
      </div>
    </body>
    </html>
  `;return await f({to:b,subject:h,html:i,type:"order_placed",orderId:a,userId:c})},h=async(a,b,c,d)=>{var e,g,h,i,j,k,l;let m=`üéâ New Order Received - #${a.slice(-8).toUpperCase()}`,n=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>New Order Notification</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
        .content { background: #f0fdf4; padding: 30px; border-radius: 0 0 10px 10px; }
        .order-details { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981; }
        .item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .total { font-weight: bold; font-size: 18px; color: #10b981; }
        .button { display: inline-block; background: #10b981; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }
        .urgent { background: #fef3c7; border: 1px solid #f59e0b; padding: 15px; border-radius: 8px; margin: 20px 0; }
        .footer { text-align: center; color: #666; margin-top: 30px; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>üí∞ New Order Alert!</h1>
          <p>You have a new customer order</p>
        </div>
        
        <div class="content">
          <h2>Hi ${d.sellerName||"Seller"},</h2>
          
          <div class="urgent">
            <strong>‚ö° Action Required:</strong> A new order has been placed and needs your attention!
          </div>
          
          <div class="order-details">
            <h3>üì¶ Order Information</h3>
            <div class="item">
              <span><strong>Order ID:</strong></span>
              <span>#${a.slice(-8).toUpperCase()}</span>
            </div>
            <div class="item">
              <span><strong>Customer:</strong></span>
              <span>${d.customerName||"Customer"}</span>
            </div>
            <div class="item">
              <span><strong>Order Date:</strong></span>
              <span>${new Date().toLocaleDateString()}</span>
            </div>
            <div class="item">
              <span><strong>Order Value:</strong></span>
              <span class="total">$${(d.totalAmount||d.total||0).toFixed(2)}</span>
            </div>
            <div class="item">
              <span><strong>Payment Status:</strong></span>
              <span style="color: #10b981; font-weight: bold;">‚úÖ PAID</span>
            </div>
          </div>
          
          <h3>üõçÔ∏è Items to Prepare</h3>
          <div class="order-details">
            ${(null==(e=d.items)?void 0:e.map(a=>{var b,c;return`
              <div class="item">
                <span><strong>${(null==(b=a.product)?void 0:b.title)||a.title||"Product"}</strong> (Qty: ${a.quantity||1})</span>
                <span>$${(((null==(c=a.product)?void 0:c.price)||a.price||0)*(a.quantity||1)).toFixed(2)}</span>
              </div>
            `}).join(""))||'<div class="item"><span>Order items</span><span>$'+(d.totalAmount||d.total||0).toFixed(2)+"</span></div>"}
          </div>
          
          <h3>üìç Shipping Details</h3>
          <div class="order-details">
            <div class="item">
              <span><strong>Customer Name:</strong></span>
              <span>${(null==(g=d.shippingAddress)?void 0:g.firstName)||""} ${(null==(h=d.shippingAddress)?void 0:h.lastName)||""}</span>
            </div>
            <div class="item">
              <span><strong>Address:</strong></span>
              <span>${(null==(i=d.shippingAddress)?void 0:i.address)||"Address provided"}</span>
            </div>
            <div class="item">
              <span><strong>City:</strong></span>
              <span>${(null==(j=d.shippingAddress)?void 0:j.city)||""}, ${(null==(k=d.shippingAddress)?void 0:k.state)||""}</span>
            </div>
            <div class="item">
              <span><strong>Phone:</strong></span>
              <span>${(null==(l=d.shippingAddress)?void 0:l.phone)||"Not provided"}</span>
            </div>
          </div>
          
          <div style="text-align: center;">
            <a href="${process.env.NEXT_PUBLIC_APP_URL}/brand/dashboard?tab=orders" class="button">
              üöÄ Manage Order
            </a>
          </div>
          
          <h3>üìã Next Steps</h3>
          <ul>
            <li>‚úÖ Confirm the order in your dashboard</li>
            <li>üì¶ Prepare the items for shipping</li>
            <li>üöö Update shipping status</li>
            <li>üí∞ Payment will be released after delivery</li>
          </ul>
          
          <div class="footer">
            <p>Questions? Contact us at <a href="mailto:seller-support@goryl.com">seller-support@goryl.com</a></p>
            <p>\xa9 2024 Goryl Marketplace. All rights reserved.</p>
          </div>
        </div>
      </div>
    </body>
    </html>
  `;return await f({to:b,subject:m,html:n,type:"new_order_seller",orderId:a,userId:c})},i=async(a,b,c,d,e,g=!1)=>{let h={pending:{title:"‚è≥ Order Pending",message:"Your order is awaiting confirmation",color:"#f59e0b"},confirmed:{title:"‚úÖ Order Confirmed",message:"Your order has been confirmed and is being prepared",color:"#10b981"},processing:{title:"\uD83D\uDCE6 Order Processing",message:"Your order is being processed and packed",color:"#3b82f6"},shipped:{title:"\uD83D\uDE9A Order Shipped",message:"Your order is on its way to you",color:"#8b5cf6"},out_for_delivery:{title:"\uD83D\uDE9B Out for Delivery",message:"Your order will arrive today",color:"#f97316"},delivered:{title:"\uD83D\uDCE6 Order Delivered",message:"Your order has been delivered successfully",color:"#10b981"},cancelled:{title:"‚ùå Order Cancelled",message:"Your order has been cancelled",color:"#ef4444"}},i=h[d]||h.pending,j=`${i.title} - #${a.slice(-8).toUpperCase()}`,k=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Order Status Update</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: ${i.color}; color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
        .content { background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px; }
        .status-update { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid ${i.color}; }
        .button { display: inline-block; background: ${i.color}; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }
        .timeline { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .timeline-item { display: flex; align-items: center; padding: 10px 0; }
        .timeline-dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 15px; }
        .active { background: ${i.color}; }
        .completed { background: #10b981; }
        .pending { background: #d1d5db; }
        .footer { text-align: center; color: #666; margin-top: 30px; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>${i.title}</h1>
          <p>Order #${a.slice(-8).toUpperCase()}</p>
        </div>
        
        <div class="content">
          <h2>Hi ${g?e.sellerName||"Seller":e.customerName||"Customer"},</h2>
          
          <div class="status-update">
            <h3>üìã Status Update</h3>
            <p><strong>${i.message}</strong></p>
            <p>Updated on: ${new Date().toLocaleString()}</p>
          </div>
          
          <div class="timeline">
            <h3>üìç Order Timeline</h3>
            <div class="timeline-item">
              <div class="timeline-dot completed"></div>
              <span>Order Placed</span>
            </div>
            <div class="timeline-item">
              <div class="timeline-dot ${["confirmed","processing","shipped","out_for_delivery","delivered"].includes(d)?"completed":"pending"}"></div>
              <span>Order Confirmed</span>
            </div>
            <div class="timeline-item">
              <div class="timeline-dot ${["processing","shipped","out_for_delivery","delivered"].includes(d)?"completed":"processing"===d?"active":"pending"}"></div>
              <span>Processing</span>
            </div>
            <div class="timeline-item">
              <div class="timeline-dot ${["shipped","out_for_delivery","delivered"].includes(d)?"completed":"shipped"===d?"active":"pending"}"></div>
              <span>Shipped</span>
            </div>
            <div class="timeline-item">
              <div class="timeline-dot ${["out_for_delivery","delivered"].includes(d)?"completed":"out_for_delivery"===d?"active":"pending"}"></div>
              <span>Out for Delivery</span>
            </div>
            <div class="timeline-item">
              <div class="timeline-dot ${"delivered"===d?"completed":"pending"}"></div>
              <span>Delivered</span>
            </div>
          </div>
          
          <div style="text-align: center;">
            <a href="${process.env.NEXT_PUBLIC_APP_URL}/orders/${a}" class="button">
              üì± Track Order
            </a>
          </div>
          
          ${"delivered"===d?`
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center;">
              <h3>üéâ Order Delivered!</h3>
              <p>We hope you love your purchase! Please consider leaving a review.</p>
              <a href="${process.env.NEXT_PUBLIC_APP_URL}/orders/${a}?review=true" style="display: inline-block; background: #10b981; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; margin-top: 10px;">
                ‚≠ê Leave a Review
              </a>
            </div>
          `:""}
          
          <div class="footer">
            <p>Questions? Contact us at <a href="mailto:support@goryl.com">support@goryl.com</a></p>
            <p>\xa9 2024 Goryl Marketplace. All rights reserved.</p>
          </div>
        </div>
      </div>
    </body>
    </html>
  `;return await f({to:b,subject:j,html:k,type:"order_status_update",orderId:a,userId:c})},j=async(a,b)=>{try{console.log("\uD83D\uDCE7 Sending order notifications for order:",a);let c=b.buyerEmail||b.customerEmail,d=b.buyerId||b.customerId,e=b.sellerEmail,f=b.sellerId,i=[];return c&&d&&i.push(g(a,c,d,b)),e&&f&&i.push(h(a,e,f,b)),await Promise.all(i),console.log("‚úÖ All order notifications sent successfully"),{success:!0}}catch(a){return console.error("‚ùå Error sending order notifications:",a),{success:!1,error:a}}},k=async(a,b,c)=>{try{console.log("\uD83D\uDCF1 Sending real-time notification:",{userId:a,type:b,data:c});let f={userId:a,type:b,title:m(b),message:n(b,c),data:c,read:!1,createdAt:(0,d.serverTimestamp)(),updatedAt:(0,d.serverTimestamp)()},g=await (0,d.addDoc)((0,d.collection)(e.db,"notifications"),f);if(console.log("‚úÖ Real-time notification sent:",g.id),"order_placed"===b&&c.orderDetails)await j(c.orderId,c.orderDetails);else if(c.orderId&&c.orderDetails){let f=await (0,d.x7)((0,d.doc)(e.db,"users",a));if(f.exists()){let d=f.data();await i(c.orderId,d.email,a,c.status||b.replace("order_",""),c.orderDetails)}}return{success:!0,notificationId:g.id}}catch(a){return console.error("‚ùå Error sending real-time notification:",a),{success:!1,error:"Failed to send notification"}}},l=async(a,b)=>{var c;return await k(a,"order_placed",{orderId:b.id,orderNumber:b.id.slice(-8).toUpperCase(),total:b.total,trackingNumber:b.trackingNumber,items:(null==(c=b.items)?void 0:c.length)||0})},m=a=>{switch(a){case"order_placed":return"\uD83C\uDF89 Order Placed Successfully!";case"order_confirmed":return"‚úÖ Order Confirmed";case"order_shipped":return"\uD83D\uDE9A Order Shipped";case"order_delivered":return"\uD83D\uDCE6 Order Delivered";case"order_cancelled":return"‚ùå Order Cancelled";default:return"\uD83D\uDCF1 Order Update"}},n=(a,b)=>{var c;switch(a){case"order_placed":return`Your order #${b.orderNumber} has been placed successfully! Total: $${null==(c=b.total)?void 0:c.toFixed(2)}. Tracking: ${b.trackingNumber}`;case"order_confirmed":return`Your order #${b.orderNumber} has been confirmed and is being processed.`;case"order_shipped":return`Your order #${b.orderNumber} has been shipped! Track it with: ${b.trackingNumber}`;case"order_delivered":return`Your order #${b.orderNumber} has been delivered successfully!`;case"order_cancelled":return`Your order #${b.orderNumber} has been cancelled.`;default:return`Your order #${b.orderNumber} status has been updated.`}},o=(a,b)=>{try{console.log("\uD83D\uDCF1 Subscribing to notifications for user:",a);let c=(0,d.query)((0,d.collection)(e.db,"notifications"),(0,d.where)("userId","==",a),(0,d.My)("createdAt","desc"));return(0,d.onSnapshot)(c,a=>{let c=a.docs.map(a=>{var b;return Object.assign(Object.assign({id:a.id},a.data()),{createdAt:(null==(b=a.data().createdAt)?void 0:b.toDate)?a.data().createdAt.toDate():new Date})});console.log("\uD83D\uDCF1 Notifications updated:",c.length),b(c)})}catch(a){return console.error("‚ùå Error subscribing to notifications:",a),()=>{}}},p=async a=>{try{let b=(0,d.doc)(e.db,"notifications",a);return await (0,d.mZ)(b,{read:!0,updatedAt:(0,d.serverTimestamp)()}),console.log("‚úÖ Notification marked as read:",a),{success:!0}}catch(a){return console.error("‚ùå Error marking notification as read:",a),{success:!1}}},q=async a=>{try{return console.log("\uD83D\uDCF1 Marking all notifications as read for user:",a),console.log("‚úÖ All notifications marked as read for user:",a),{success:!0}}catch(a){return console.error("‚ùå Error marking all notifications as read:",a),{success:!1}}},r=async(a,b,c)=>{try{console.log("\uD83D\uDCE7 Sending order status update notifications:",{orderId:a,newStatus:b});let d=[];return(c.buyerId||c.customerId)&&d.push(k(c.buyerId||c.customerId,`order_${b}`,{orderId:a,orderNumber:a.slice(-8).toUpperCase(),status:b,orderDetails:c})),c.sellerId&&["cancelled","delivered"].includes(b)&&d.push(k(c.sellerId,`order_${b}`,{orderId:a,orderNumber:a.slice(-8).toUpperCase(),status:b,orderDetails:c,isForSeller:!0})),await Promise.all(d),console.log("‚úÖ Order status update notifications sent successfully"),{success:!0}}catch(a){return console.error("‚ùå Error sending order status update notifications:",a),{success:!1,error:a}}}},42558:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(60687),e=c(43210);function f({user:a,size:b=128,className:c=""}){let[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(""),l=f?"https://api.dicebear.com/7.x/avataaars/svg?seed=Default":j||"https://api.dicebear.com/7.x/avataaars/svg?seed=Default";return(0,d.jsxs)("div",{className:"relative",style:{width:b,height:b},children:[(0,d.jsx)("img",{src:l,alt:a?.name||"Profile",width:b,height:b,onLoad:()=>{console.log("Profile image loaded successfully:",l),i(!1)},onError:b=>{console.log("Profile image failed to load:",{src:b.target.src,user:a?.name||"Unknown user"}),g(!0),i(!1)},referrerPolicy:"no-referrer",className:`${c} ${h?"opacity-0":"opacity-100"} absolute inset-0 w-full h-full object-cover`}),h&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-200 rounded-full",style:{width:b,height:b}})]})}},48896:(a,b,c)=>{"use strict";c.d(b,{n:()=>i});var d=c(85665),e=c(75535),f=c(762);let g=new Map,h=new Map,i=(0,d.vt)((a,b)=>({profile:null,loading:!1,error:null,fetchProfile:async b=>{var c,d;if(g.get(b))return void console.log("\uD83D\uDEAB BLOCKED: Already fetching profile for:",b);a({loading:!0,error:null});let i=h.get(b);if(i){console.log("\uD83D\uDCBE CACHE HIT: Using cached profile for:",b),a({profile:i,loading:!1,error:null});return}console.log("\uD83D\uDD0D Store: Starting fetchProfile for:",b);try{let i=await (0,e.x7)((0,e.doc)(f.db,"users",b));if(i.exists()){let e=i.data(),f=Object.assign(Object.assign({id:b,joinedAt:(null==(c=e.joinedAt)?void 0:c.toDate())||new Date,usernameLastChanged:null==(d=e.usernameLastChanged)?void 0:d.toDate()},e),{customPhotoURL:e.customPhotoURL||"",photoURL:e.photoURL||"",profilePic:e.profilePic||"",avatar:e.avatar||"",name:e.name&&"string"==typeof e.name&&e.name.trim()||"User",bio:e.bio&&"string"==typeof e.bio?e.bio.trim():"",followers:Array.isArray(e.followers)?e.followers:[],following:Array.isArray(e.following)?e.following:[]});console.log("‚úÖ Store: Profile loaded successfully:",f.name,f.id),h.set(b,f),a({profile:f,loading:!1})}else console.log("‚ùå Store: Profile document does not exist for:",b),g.delete(b),a({profile:null,loading:!1,error:"Profile not found. This user may not exist or their profile may be private."})}catch(c){console.error("‚ùå Store: Firestore error:",c),g.delete(b),a({profile:null,loading:!1,error:"Failed to load profile. Please check your internet connection and try again."})}},subscribeToProfile:a=>(console.log("\uD83D\uDD14 Subscription disabled to prevent infinite loops for:",a),()=>{}),updateProfile:async(c,d)=>{try{await (0,e.mZ)((0,e.doc)(f.db,"users",c),d);let g=b().profile;g&&g.id===c&&a({profile:Object.assign(Object.assign({},g),d)})}catch(a){throw console.error("Error updating profile:",a),a}},createProfile:async(b,c)=>{try{let d=Object.assign(Object.assign({},c),{id:b,joinedAt:new Date});await (0,e.BN)((0,e.doc)(f.db,"users",b),d),a({profile:d,loading:!1,error:null})}catch(b){console.error("Error creating profile:",b),a({error:"Failed to create profile",loading:!1})}},followUser:async(c,d)=>{try{let g=(0,e.doc)(f.db,"users",c),h=(0,e.doc)(f.db,"users",d);await (0,e.mZ)(g,{following:(0,e.hq)(d)}),await (0,e.mZ)(h,{followers:(0,e.hq)(c)});let i=b().profile;if(i&&i.id===c){let b=Array.isArray(i.following)?i.following:[];a({profile:Object.assign(Object.assign({},i),{following:[...b.filter(a=>a!==d),d]})})}}catch(a){throw console.error("Error following user:",a),a}},unfollowUser:async(c,d)=>{try{let g=(0,e.doc)(f.db,"users",c),h=(0,e.doc)(f.db,"users",d);await (0,e.mZ)(g,{following:(0,e.C3)(d)}),await (0,e.mZ)(h,{followers:(0,e.C3)(c)});let i=b().profile;if(i&&i.id===c){let b=Array.isArray(i.following)?i.following:[];a({profile:Object.assign(Object.assign({},i),{following:b.filter(a=>a!==d)})})}}catch(a){throw console.error("Error unfollowing user:",a),a}},fetchUserAnalytics:async a=>{try{return{monthlySales:0,monthlyOrders:0,monthlyRefunds:0,topProducts:[]}}catch(a){throw console.error("Error fetching analytics:",a),a}},clearProfile:()=>{a({profile:null,loading:!1,error:null})},clearUserCache:a=>{h.delete(a),g.delete(a),console.log("\uD83D\uDDD1Ô∏è Cleared cache and tracker for:",a)}}))},50915:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},51595:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},53389:(a,b,c)=>{Promise.resolve().then(c.bind(c,83709)),Promise.resolve().then(c.bind(c,41465))},61135:()=>{},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(31658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},72106:(a,b,c)=>{"use strict";c.d(b,{useAuthStore:()=>h});var d=c(85665),e=c(14808),f=c(762),g=c(20597);let h=(0,d.vt)((a,b)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:b=>a({user:b}),setUserData:b=>a({userData:b}),setLoading:b=>a({loading:b}),setUnsubscribeUserListener:b=>a({unsubscribeUserListener:b}),initialize:()=>(0,e.hg)(f.j2,async d=>{if(d)try{let e=await (0,g.gL)(d.uid),f=Object.assign(Object.assign({},d),{role:null==e?void 0:e.role});a({user:f,userData:e,loading:!1});let{doc:h,onSnapshot:i}=await Promise.resolve().then(c.bind(c,75535)),{db:j}=await Promise.resolve().then(c.bind(c,762)),k=h(j,"users",d.uid),l=i(k,c=>{if(c.exists()){let d=c.data();a({userData:d,user:Object.assign(Object.assign({},b().user||{}),{role:d.role})})}});a({unsubscribeUserListener:l})}catch(b){console.error("Error fetching user data:",b),a({user:Object.assign(Object.assign({},d),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:c}=b();c&&(c(),a({unsubscribeUserListener:null})),a({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:c}=b();if(c)try{let d=await (0,g.gL)(c.uid);a({userData:d,user:Object.assign(Object.assign({},b().user||{}),{role:null==d?void 0:d.role})}),setTimeout(async()=>{try{let d=await (0,g.gL)(c.uid);a({userData:d,user:Object.assign(Object.assign({},b().user||{}),{role:null==d?void 0:d.role})})}catch(a){console.warn("Error in delayed refresh:",a)}},500)}catch(a){console.error("Error refreshing user data:",a)}}}))},83709:(a,b,c)=>{"use strict";c.d(b,{Layout:()=>_});var d=c(60687),e=c(43210),f=c(10218),g=c(16189),h=c(85814),i=c.n(h),j=c(99270),k=c(33872),l=c(58869),m=c(28561),n=c(72106),o=c(20109),p=c(48896),q=c(88920),r=c(97905),s=c(14808),t=c(762),u=c(52581),v=c(76180),w=c.n(v),x=c(41312),y=c(11860),z=c(81904),A=c(60020),B=c(27900),C=c(974),D=c(75535),E=c(23026),F=c(64398),G=c(42558);function H({currentUserId:a,onStartChat:b,onFollow:c,followingStatus:f=new Map}){let[g,h]=(0,e.useState)(""),[i,l]=(0,e.useState)([]),[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)(!1),[q,s]=(0,e.useState)("search"),v=async b=>{if(!b.trim())return void l([]);p(!0);try{let c=(0,D.collection)(t.db,"users"),d=(await (0,D.getDocs)(c)).docs.map(a=>{let b=a.data(),c=(b.name||b.displayName||"Unknown User").replace(/dkjArdF4Q9P4Wx2Nl7nfnt6O5Rn1aNnliXy7QFYKFDwjPfrvDXJkTbm1/g,"").trim()||"User";return{id:a.id,...b,name:c}}).filter(c=>{if(c.id===a)return!1;let d=c.name?.toLowerCase()||"",e=c.email?.toLowerCase()||"",f=c.displayName?.toLowerCase()||"",g=b.toLowerCase();return d.includes(g)||e.includes(g)||f.includes(g)}).filter((a,b,c)=>b===c.findIndex(b=>b.id===a.id)&&(!a.photoURL||!a.photoURL.includes("example.com"))).map(a=>({id:a.id,name:a.name,username:a.username||a.displayName?.toLowerCase().replace(/\s+/g,"")||a.email?.split("@")[0]||"user",email:a.email||"",customPhotoURL:a.customPhotoURL||"",photoURL:a.photoURL||"",profilePic:a.profilePic||"",avatar:a.avatar||"",isOnline:Math.random()>.5,lastSeen:new Date(Date.now()-24*Math.random()*36e5)}));l(d)}catch(a){console.error("Error searching users:",a),u.oR.error("Failed to search users"),l([])}finally{p(!1)}},w=a=>{if(f.get(a))return void u.oR.info("You are already following this user");c(a)};return(0,d.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Find People"}),(0,d.jsxs)("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[(0,d.jsxs)("button",{onClick:()=>s("search"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"search"===q?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:[(0,d.jsx)(j.A,{className:"w-4 h-4 inline mr-2"}),"Search"]}),(0,d.jsxs)("button",{onClick:()=>s("suggested"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"suggested"===q?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:[(0,d.jsx)(x.A,{className:"w-4 h-4 inline mr-2"}),"Suggested"]})]})]}),"search"===q&&(0,d.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,d.jsx)("input",{type:"text",placeholder:"Search by name, email, or username...",value:g,onChange:a=>{h(a.target.value),v(a.target.value)},className:"w-full pl-10 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),o&&(0,d.jsx)("div",{className:"flex justify-center py-4",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-400"})}),i.length>0&&(0,d.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:i.map(a=>(0,d.jsxs)(r.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center space-x-4 p-4 bg-white/10 rounded-xl hover:bg-white/20 transition-colors",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(G.A,{user:{customPhotoURL:a.customPhotoURL,photoURL:a.photoURL,profilePic:a.profilePic,avatar:a.avatar,name:a.name},size:48,className:"rounded-full"}),a.isOnline&&(0,d.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"font-semibold text-white",children:a.name||"User"}),(0,d.jsxs)("p",{className:"text-sm text-gray-300",children:["@",a.username]}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:a.email})]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)("button",{onClick:()=>w(a.id),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors flex items-center space-x-1 disabled:opacity-50",disabled:f.get(a.id),children:[(0,d.jsx)(E.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:f.get(a.id)?"Following":"Follow"})]}),(0,d.jsxs)("button",{onClick:()=>b(a.id,a.name,a.photoURL),className:"bg-purple-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors flex items-center space-x-1",children:[(0,d.jsx)(k.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Chat"})]})]})]},a.id))}),g&&0===i.length&&!o&&(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(j.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("p",{className:"text-gray-300 text-lg",children:"No users found"}),(0,d.jsx)("p",{className:"text-gray-400 text-sm",children:"Try searching with different keywords"})]})]}),"suggested"===q&&(0,d.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:m.map(a=>(0,d.jsxs)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/10 rounded-xl p-4 hover:bg-white/20 transition-colors",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(G.A,{user:{customPhotoURL:a.customPhotoURL,photoURL:a.photoURL,profilePic:a.profilePic,avatar:a.avatar,name:a.name},size:40,className:"rounded-full"}),a.isVerified&&(0,d.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,d.jsx)(F.A,{className:"w-3 h-3 text-white"})})]}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:a.name||"User"}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[a.mutualFriends," mutual friends"]})]})]}),(0,d.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,d.jsx)("button",{onClick:()=>w(a.id),className:"flex-1 bg-blue-600 text-white py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:f.get(a.id),children:f.get(a.id)?"Following":"Follow"}),(0,d.jsx)("button",{onClick:()=>b(a.id,a.name,a.photoURL),className:"flex-1 bg-purple-600 text-white py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors",children:"Chat"})]})]},a.id))}),0===m.length&&(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(x.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("p",{className:"text-gray-300 text-lg",children:"No suggestions yet"}),(0,d.jsx)("p",{className:"text-gray-400 text-sm",children:"We'll show you people you might know"})]})]})]})}function I({isOpen:a,onClose:b}){let{user:c}=(0,n.useAuthStore)(),[f,g]=(0,e.useState)([]),[h,i]=(0,e.useState)(null),[l,m]=(0,e.useState)([]),[o,p]=(0,e.useState)(""),[q,s]=(0,e.useState)(!1),[t,v]=(0,e.useState)(""),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(new Set),[I,J]=(0,e.useState)(!1),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)("chats"),[Q,R]=(0,e.useState)(!1),S=(0,e.useRef)(null),[T,U]=(0,e.useState)(new Map),[V,W]=(0,e.useState)(new Map),[X,Y]=(0,e.useState)(new Map),[Z,$]=(0,e.useState)(new Set),_=async(a,b,d)=>{if(c)try{let e=f.find(b=>b.otherUser?.id===a);if(e){i(e),E(!1),P("chat"),u.oR.success(`Opened chat with ${b}`);return}let h={id:await (0,C.Dg)(c.uid,a),participants:[c.uid,a],lastMessage:null,lastMessageTime:null,otherUser:{id:a,name:b,photoURL:d||`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(b.trim())}`}};i(h),g(a=>[h,...a]),E(!1),P("chat"),u.oR.success(`Started chat with ${b}`)}catch(a){console.error("Error starting chat:",a),u.oR.error("Failed to start chat")}},aa=async a=>{if(h&&c)try{await (0,C._z)(h.id,c.uid,a,c.displayName||"User"),u.oR.success("Reaction sent!")}catch(a){console.error("Error sending reaction:",a),u.oR.error("Failed to send reaction")}},ab=["‚ù§Ô∏è","\uD83D\uDE02","\uD83D\uDC4D","\uD83D\uDE2E","\uD83D\uDE22","\uD83D\uDE21"],ac=async(a,b)=>{if(c)try{if(V.get(a))return void u.oR.info(`You are already following ${b}`);$(b=>new Set(b).add(a));let d=X.get(c.uid)||{followers:0,following:0},e=X.get(a)||{followers:0,following:0};W(b=>new Map(b).set(a,!0)),Y(b=>{let f=new Map(b);return f.set(c.uid,{followers:d.followers,following:d.following+1}),f.set(a,{followers:e.followers+1,following:e.following}),f});let h=f.map(b=>b.otherUser?.id===a?{...b,otherUser:{...b.otherUser,isFollowed:!0}}:b);g(h),await (0,C.pV)(c.uid,a),u.oR.success(`Followed ${b} successfully!`)}catch(b){W(b=>new Map(b).set(a,!1)),$(b=>{let c=new Set(b);return c.delete(a),c}),console.error("Error following user:",b),u.oR.error("Failed to follow user")}},ad=async(a,b)=>{if(c)try{if(!V.get(a))return void u.oR.info(`You are not following ${b}`);$(b=>{let c=new Set(b);return c.delete(a),c});let d=X.get(c.uid)||{followers:0,following:0},e=X.get(a)||{followers:0,following:0};W(b=>new Map(b).set(a,!1)),Y(b=>{let f=new Map(b);return f.set(c.uid,{followers:d.followers,following:Math.max(0,d.following-1)}),f.set(a,{followers:Math.max(0,e.followers-1),following:e.following}),f});let h=f.map(b=>b.otherUser?.id===a?{...b,otherUser:{...b.otherUser,isFollowed:!1}}:b);g(h),await (0,C.Qt)(c.uid,a),u.oR.success(`Unfollowed ${b} successfully!`)}catch(b){W(b=>new Map(b).set(a,!0)),$(b=>new Set(b).add(a)),console.error("Error unfollowing user:",b),u.oR.error("Failed to unfollow user")}},ae=async(a,b)=>{V.get(a)?await ad(a,b):await ac(a,b)},af=async a=>{if(c)try{let b="User";for(let c of f)if(c.otherUser?.id===a){b=c.otherUser.name||"User";break}await ac(a,b)}catch(a){console.error("Error following from search:",a),u.oR.error("Failed to follow user")}},ag=async a=>{if(a.preventDefault(),o.trim()&&h&&c&&!q){s(!0);try{await (0,C._z)(h.id,c.uid,o.trim(),c.displayName||"User"),p("")}catch(a){console.error("Error sending message:",a),u.oR.error("Failed to send message")}finally{s(!1)}}},ah=f.filter(a=>a.otherUser?.name.toLowerCase().includes(t.toLowerCase())),ai=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return a?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,d.jsxs)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg w-full max-w-5xl h-[85vh] flex flex-col",children:[(0,d.jsx)(w(),{id:"4198319ec94a7ce",children:".scrollbar-hidden.jsx-4198319ec94a7ce::-webkit-scrollbar{display:none}.scrollbar-hidden.jsx-4198319ec94a7ce{-ms-overflow-style:none;scrollbar-width:none}@media(max-width:768px){.mobile-fullscreen.jsx-4198319ec94a7ce{width:100vw!important;height:100vh!important;max-width:none!important;border-radius:0!important;margin:0!important}}"}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center justify-between p-4 border-b border-gray-200",children:[(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-3",children:[(0,d.jsx)(k.A,{className:"w-6 h-6 text-purple-600"}),(0,d.jsx)("h2",{className:"jsx-4198319ec94a7ce text-lg font-semibold",children:"Messages"})]}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-2",children:[(0,d.jsx)("button",{onClick:()=>{R(!Q)},title:Q?"Show sidebar":"Hide sidebar",className:"jsx-4198319ec94a7ce p-2 rounded-lg transition-colors text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:Q?(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-4198319ec94a7ce"})}):(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-4198319ec94a7ce"})})}),(0,d.jsx)("button",{onClick:()=>E(!D),title:"Find new contacts",className:`jsx-4198319ec94a7ce p-2 rounded-lg transition-colors ${D?"bg-purple-100 text-purple-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:(0,d.jsx)(x.A,{className:"w-5 h-5"})}),(0,d.jsx)("button",{onClick:b,className:"jsx-4198319ec94a7ce text-gray-500 hover:text-gray-700 transition-colors p-2 rounded-lg hover:bg-gray-100",children:(0,d.jsx)(y.A,{className:"w-5 h-5"})})]})]}),D&&(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce p-4 border-b border-gray-200 bg-gray-50",children:(0,d.jsx)(H,{currentUserId:c?.uid||"",onStartChat:_,onFollow:af,followingStatus:V})}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex flex-1 overflow-hidden",children:[(0,d.jsxs)("div",{className:`jsx-4198319ec94a7ce border-r border-gray-200 flex flex-col transition-all duration-300 ${Q?"w-0 md:w-0 overflow-hidden":"w-full md:w-1/3"} ${window.innerWidth<768&&"chat"===O?"hidden":""}`,children:[(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce p-3 border-b border-gray-200 bg-white",children:(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce relative",children:[(0,d.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,d.jsx)("input",{type:"text",placeholder:"Search conversations...",value:t,onChange:a=>v(a.target.value),className:"jsx-4198319ec94a7ce w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 overflow-y-auto bg-white scrollbar-hidden",children:0===ah.length?(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce p-4 text-center text-gray-500",children:[(0,d.jsx)(k.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:"No conversations yet"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs",children:"Use the search feature to find people to chat with"})]}):ah.map(a=>(0,d.jsx)(r.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},onClick:()=>{i(a),window.innerWidth<768&&P("chat")},className:`p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${h?.id===a.id?"bg-gray-100":""}`,children:(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce relative flex-shrink-0",children:(0,d.jsx)("img",{src:a.otherUser?.photoURL||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.otherUser?.name||"user"}`,alt:a.otherUser?.name||"User",width:"40",height:"40",referrerPolicy:"no-referrer",className:"jsx-4198319ec94a7ce rounded-full"})}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex-1 min-w-0",children:[(0,d.jsx)("h4",{className:"jsx-4198319ec94a7ce font-medium text-gray-900 truncate text-sm",children:a.otherUser?.name||"Unknown User"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-500 truncate",children:a.lastMessage||"No messages yet"}),a.lastMessageTime&&(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-400 mt-1",children:ai(a.lastMessageTime)})]})]})},a.id))})]}),(0,d.jsx)("div",{className:`jsx-4198319ec94a7ce flex-1 flex flex-col transition-all duration-300 ${Q?"w-full md:w-full":"w-full md:w-2/3"} ${window.innerWidth<768&&"chats"===O?"hidden":""}`,children:h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center justify-between p-3 md:p-4 border-b border-gray-200 bg-white",children:[(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-2 md:space-x-3",children:[(0,d.jsx)("button",{onClick:()=>{i(null),P("chats")},className:"jsx-4198319ec94a7ce md:hidden p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5 text-gray-600",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-4198319ec94a7ce"})})}),(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce relative flex-shrink-0",children:(0,d.jsx)("img",{src:h.otherUser?.photoURL||`https://api.dicebear.com/7.x/avataaars/svg?seed=${h.otherUser?.name||"user"}`,alt:h.otherUser?.name||"User",width:"32",height:"32",referrerPolicy:"no-referrer",className:"jsx-4198319ec94a7ce rounded-full"})}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce",children:[(0,d.jsx)("h3",{className:"jsx-4198319ec94a7ce font-medium text-gray-900 text-sm md:text-base",children:h.otherUser?.name||"Unknown User"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-500",children:T.get(h.otherUser?.id||"")?.isOnline?"Online":`Last seen ${(a=>{if(!a)return"Unknown";let b=a.toDate?a.toDate():new Date(a),c=new Date().getTime()-b.getTime(),d=Math.floor(c/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5);return d<1?"just now":d<60?`${d} min ago`:e<24?`${e} hr ago`:`${f} day ago`})(T.get(h.otherUser?.id||"")?.lastSeen)}`})]})]}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-1 md:space-x-2",children:[(0,d.jsx)("button",{onClick:()=>h.otherUser?.id&&ae(h.otherUser.id,h.otherUser.name||"User"),disabled:void 0===V.get(h.otherUser?.id||""),className:`jsx-4198319ec94a7ce px-3 py-1 rounded-full text-xs font-medium transition-colors ${h.otherUser?.isFollowed?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white hover:bg-blue-600"} ${void 0===V.get(h.otherUser?.id||"")?"opacity-50 cursor-not-allowed":""}`,children:h.otherUser?.isFollowed?"Unfollow":"Follow"}),(0,d.jsx)("button",{className:"jsx-4198319ec94a7ce p-2 text-gray-500 hover:text-gray-700 transition-colors",children:(0,d.jsx)(z.A,{className:"w-4 h-4"})})]})]}),(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 overflow-y-auto p-3 md:p-4 space-y-2 bg-gray-100 scrollbar-hidden",children:0===l.length?(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce text-center text-gray-500 mt-8",children:[(0,d.jsx)(k.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:"No messages yet"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs",children:"Start the conversation!"})]}):(0,d.jsxs)(d.Fragment,{children:[l.map(a=>(0,d.jsx)("div",{className:`jsx-4198319ec94a7ce flex ${a.senderId===c?.uid?"justify-end":"justify-start"}`,children:(0,d.jsxs)("div",{className:`jsx-4198319ec94a7ce max-w-xs md:max-w-md px-3 py-2 rounded-lg relative group ${a.senderId===c?.uid?"bg-green-100 text-gray-900 rounded-tr-none":"bg-white text-gray-900 rounded-tl-none"}`,children:[(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:a.text}),(0,d.jsx)("p",{className:`jsx-4198319ec94a7ce text-xs mt-1 ${(a.senderId===c?.uid,"text-gray-500")}`,children:ai(a.createdAt)}),(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce absolute -top-8 left-0 bg-white rounded-full shadow-lg px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:ab.map((a,b)=>(0,d.jsx)("button",{onClick:()=>aa(a),title:`React with ${a}`,className:"jsx-4198319ec94a7ce hover:scale-125 transition-transform text-sm",children:a},b))})]})},a.id)),F.size>0&&(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce flex justify-start",children:(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce bg-white px-4 py-2 rounded-lg rounded-tl-none",children:(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce flex space-x-1",children:[(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,d.jsx)("div",{style:{animationDelay:"0.1s"},className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,d.jsx)("div",{style:{animationDelay:"0.2s"},className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]})})}),(0,d.jsx)("div",{ref:S,className:"jsx-4198319ec94a7ce"})]})}),(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce p-3 md:p-4 border-t border-gray-200 bg-white relative",children:[(0,d.jsxs)("form",{onSubmit:ag,className:"jsx-4198319ec94a7ce flex items-center space-x-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>L(!K),className:"jsx-4198319ec94a7ce p-2 text-gray-500 hover:text-gray-700 rounded-lg transition-colors",children:(0,d.jsx)(A.A,{className:"w-5 h-5"})}),(0,d.jsx)("input",{type:"text",value:o,onChange:a=>{p(a.target.value),I||(J(!0),setTimeout(()=>J(!1),3e3))},placeholder:"Type a message...",className:"jsx-4198319ec94a7ce flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,d.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:q||!o.trim(),className:"bg-green-500 text-white p-2 rounded-full disabled:opacity-50 hover:bg-green-600 transition-all",children:(0,d.jsx)(B.A,{className:"w-4 h-4"})})]}),K&&(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce absolute bottom-full left-0 mb-2 w-64 h-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-10",children:(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce grid grid-cols-10 gap-1 p-2 h-full overflow-y-auto",children:["\uD83D\uDE00","\uD83D\uDE02","\uD83E\uDD70","\uD83D\uDE0E","\uD83E\uDD29","\uD83D\uDE0D","\uD83E\uDD17","\uD83E\uDD14","\uD83D\uDE44","\uD83D\uDE34","\uD83E\uDD73","\uD83E\uDD2A","\uD83D\uDE1C","\uD83E\uDD13","\uD83E\uDD7A","\uD83D\uDE24","\uD83D\uDE21","\uD83E\uDD2F","\uD83E\uDD76","\uD83D\uDE31","\uD83D\uDC4D","\uD83D\uDC4E","\uD83D\uDC4F","\uD83D\uDE4C","\uD83D\uDC4C","\uD83D\uDE4F","\uD83E\uDD1D","\uD83D\uDCAA","\uD83D\uDC40","\uD83E\uDDE0","\uD83D\uDC36","\uD83D\uDC31","\uD83D\uDC2D","\uD83D\uDC39","\uD83D\uDC30","\uD83E\uDD8A","\uD83D\uDC3B","\uD83D\uDC3C","\uD83D\uDC28","\uD83D\uDC2F","\uD83E\uDD81","\uD83D\uDC2E","\uD83D\uDC37","\uD83D\uDC38","\uD83D\uDC35","\uD83D\uDC14","\uD83D\uDC27","\uD83D\uDC26","\uD83E\uDD86","\uD83E\uDD85","\uD83C\uDF38","\uD83C\uDF3A","\uD83C\uDF3B","\uD83C\uDF37","\uD83C\uDF31","\uD83C\uDF32","\uD83C\uDF33","\uD83C\uDF34","\uD83C\uDF35","\uD83C\uDF3E","\uD83C\uDF4E","\uD83C\uDF50","\uD83C\uDF4A","\uD83C\uDF4B","\uD83C\uDF4C","\uD83C\uDF49","\uD83C\uDF47","\uD83C\uDF53","\uD83C\uDF48","\uD83C\uDF52","‚öΩ","\uD83C\uDFC0","\uD83C\uDFC8","‚öæ","\uD83C\uDFBE","\uD83C\uDFD0","\uD83C\uDFC9","\uD83C\uDFB1","\uD83C\uDFD3","\uD83C\uDFF8","\uD83D\uDE97","\uD83D\uDE95","\uD83D\uDE99","\uD83D\uDE8C","\uD83D\uDE8E","\uD83C\uDFCE","\uD83D\uDE93","\uD83D\uDE91","\uD83D\uDE92","\uD83D\uDE90","‚ù§Ô∏è","\uD83D\uDC94","‚ù£Ô∏è","\uD83D\uDC95","\uD83D\uDC9E","\uD83D\uDC93","\uD83D\uDC97","\uD83D\uDC96","\uD83D\uDC98","\uD83D\uDC9D"].map((a,b)=>(0,d.jsx)("button",{onClick:()=>{p(b=>b+a),L(!1)},title:a,className:"jsx-4198319ec94a7ce text-xl p-1 hover:bg-gray-100 rounded transition-colors",children:a},b))})})]})]}):(0,d.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 flex items-center justify-center bg-gray-100",children:(0,d.jsxs)("div",{className:"jsx-4198319ec94a7ce text-center text-gray-500 p-4",children:[(0,d.jsx)(k.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,d.jsx)("h3",{className:"jsx-4198319ec94a7ce text-lg font-medium mb-2",children:"Select a conversation"}),(0,d.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm mb-4",children:"Choose someone to start chatting with"}),(0,d.jsx)("button",{onClick:()=>E(!0),className:"jsx-4198319ec94a7ce bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-all",children:"Find People to Chat"})]})})})]})]})}):null}var J=c(13964),K=c(88059),L=c(19080),M=c(97051),N=c(41689);function O(){let{user:a}=(0,n.useAuthStore)(),[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),[h,j]=(0,e.useState)(!0),k=b.filter(a=>!a.read).length,l=async a=>{a.read||await (0,N.bA)(a.id),g(!1)},o=async()=>{a?.uid&&(await (0,N.he)(a.uid),c(a=>a.map(a=>({...a,read:!0}))))};return a?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>g(!f),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full transition-colors",children:[(0,d.jsx)(M.A,{className:"w-6 h-6"}),k>0&&(0,d.jsx)(r.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:k>99?"99+":k})]}),(0,d.jsx)(q.N,{children:f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),(0,d.jsxs)(r.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),k>0&&(0,d.jsx)("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"})]}),k>0&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[k," unread notification",1!==k?"s":""]})]}),(0,d.jsx)("div",{className:"max-h-80 overflow-y-auto",children:h?(0,d.jsxs)("div",{className:"p-4 text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):0===b.length?(0,d.jsxs)("div",{className:"p-6 text-center",children:[(0,d.jsx)(M.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"No notifications yet"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"We'll notify you when something happens"})]}):(0,d.jsx)("div",{className:"divide-y divide-gray-100",children:b.slice(0,10).map(b=>(0,d.jsx)(i(),{href:(b=>{if(b.data?.orderId)return`/orders/${b.data.orderId}`;if(b.data?.productId)return`/product/${b.data.productId}`;let c=a?.role;return"seller"===c||"brand"===c||"company"===c?"/brand/dashboard?tab=orders":"/orders"})(b),onClick:()=>l(b),children:(0,d.jsx)("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${!b.read?"bg-blue-50 border-l-4 border-blue-500":""}`,children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(a=>{switch(a){case"order_placed":return(0,d.jsx)(m.A,{className:"w-5 h-5 text-green-600"});case"order_confirmed":return(0,d.jsx)(J.A,{className:"w-5 h-5 text-blue-600"});case"order_shipped":return(0,d.jsx)(K.A,{className:"w-5 h-5 text-purple-600"});case"order_delivered":return(0,d.jsx)(L.A,{className:"w-5 h-5 text-green-600"});case"order_cancelled":return(0,d.jsx)(y.A,{className:"w-5 h-5 text-red-600"});default:return(0,d.jsx)(M.A,{className:"w-5 h-5 text-gray-600"})}})(b.type)}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("p",{className:`text-sm font-medium ${!b.read?"text-gray-900":"text-gray-700"}`,children:b.title}),!b.read&&(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:b.message}),(0,d.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,d.jsx)("p",{className:"text-xs text-gray-400",children:(a=>{let b=Math.floor((new Date().getTime()-a.getTime())/1e3);return b<60?"Just now":b<3600?`${Math.floor(b/60)}m ago`:b<86400?`${Math.floor(b/3600)}h ago`:b<604800?`${Math.floor(b/86400)}d ago`:a.toLocaleDateString()})(b.createdAt)}),b.data?.orderNumber&&(0,d.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["#",b.data.orderNumber]})]})]})]})})},b.id))})}),b.length>0&&(0,d.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,d.jsx)(i(),{href:"/notifications",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all notifications"})})]})]})})]}):null}var P=c(5748),Q=c(96474),R=c(88233),S=c(70334);function T(){let[a,b]=(0,e.useState)(!1),{cart:c,getCartItemCount:f,getCartTotal:h,updateQuantity:j,removeFromCart:k,loading:l,initializeCart:p}=(0,o.x)(),{user:s}=(0,n.useAuthStore)(),t=(0,g.useRouter)(),u=(0,e.useRef)(null),v=a=>`$${a.toFixed(2)}`;return(0,d.jsxs)("div",{className:"relative",ref:u,children:[(0,d.jsxs)("button",{onClick:()=>b(!a),className:"relative text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,d.jsx)(m.A,{className:"w-5 h-5 sm:w-6 sm:h-6"}),(c?.items?.length||0)>0&&(0,d.jsx)(r.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:c?.items?.length||0})]}),(0,d.jsx)(q.N,{children:a&&(0,d.jsxs)(r.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Shopping Cart (",c?.items?.length||0,")"]}),(0,d.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,d.jsx)(y.A,{className:"w-5 h-5"})})]}),(0,d.jsx)("div",{className:"max-h-64 overflow-y-auto",children:l&&!c?(0,d.jsxs)("div",{className:"p-4 text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading cart..."})]}):s?c&&0!==c.items.length?(0,d.jsx)("div",{className:"p-2",children:c.items.map(a=>(0,d.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[a.product?.image&&(0,d.jsx)("img",{src:a.product.image,alt:a.product.title,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:a.product?.title||"Product"}),(0,d.jsx)("p",{className:"text-purple-600 font-semibold text-sm",children:v(a.product?.price||0)})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,d.jsx)("button",{onClick:()=>j(a.productId,Math.max(0,a.quantity-1)),className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:(0,d.jsx)(P.A,{className:"w-3 h-3"})}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-6 text-center",children:a.quantity}),(0,d.jsx)("button",{onClick:()=>j(a.productId,a.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:(0,d.jsx)(Q.A,{className:"w-3 h-3"})}),(0,d.jsx)("button",{onClick:()=>k(a.productId),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors ml-2",children:(0,d.jsx)(R.A,{className:"w-3 h-3 text-red-600 dark:text-red-400"})})]})]},a.productId))}):(0,d.jsxs)("div",{className:"p-8 text-center",children:[(0,d.jsx)(m.A,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Your cart is empty"}),(0,d.jsx)("button",{onClick:()=>{b(!1),t.push("/explore")},className:"text-purple-600 hover:text-purple-700 font-medium",children:"Start Shopping"})]}):(0,d.jsxs)("div",{className:"p-8 text-center",children:[(0,d.jsx)(m.A,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please login to view cart"}),(0,d.jsx)("button",{onClick:()=>{b(!1),t.push("/login")},className:"text-purple-600 hover:text-purple-700 font-medium",children:"Login"})]})}),c&&c.items.length>0&&(0,d.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),(0,d.jsx)("span",{className:"text-lg font-bold text-purple-600",children:v(h())})]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)(i(),{href:"/cart",onClick:()=>b(!1),className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white py-2 px-4 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-center",children:"View Cart"}),(0,d.jsxs)("button",{onClick:()=>{b(!1),t.push("/cart")},className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 px-4 rounded-xl font-medium hover:from-purple-700 hover:to-pink-700 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,d.jsx)("span",{children:"Checkout"}),(0,d.jsx)(S.A,{className:"w-4 h-4"})]})]})]})]})})]})}function U(){let[a,b]=(0,e.useState)(""),[c,f]=(0,e.useState)(!1),[h,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(!1);(0,g.usePathname)(),(0,g.useParams)();let{user:y,loading:z}=(0,n.useAuthStore)(),{getCartItemCount:A,initializeCart:B}=(0,o.x)(),{profile:C,fetchProfile:D,subscribeToProfile:E}=(0,p.n)(),F=(0,g.useRouter)(),G=async()=>{try{await (0,s.CI)(t.j2),v(!1),u.oR.success("Logged out successfully"),F.push("/")}catch(a){u.oR.error("Failed to logout")}};return(0,d.jsxs)("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 shadow-md border-b border-gray-200 dark:border-white/10",children:[(0,d.jsxs)("div",{className:"container mx-auto px-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,d.jsxs)(i(),{href:"/",className:"flex items-center space-x-2 flex-shrink-0",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-white font-bold text-lg",children:"Z"})}),(0,d.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 hidden sm:block",children:"Zaillisy"})]}),(0,d.jsx)("div",{className:"flex-1 max-w-xl mx-2 sm:mx-4 md:mx-8",children:(0,d.jsx)("form",{onSubmit:c=>{c.preventDefault(),a.trim()&&(F.push(`/search?q=${encodeURIComponent(a.trim())}`),b(""))},className:"w-full",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),(0,d.jsx)("input",{type:"text",value:a,onChange:a=>b(a.target.value),placeholder:"Search products, sellers, categories...",className:"w-full pl-8 sm:pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-white/10 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent hover:border-gray-400 dark:hover:border-white/20 transition-colors text-gray-900 dark:text-gray-100 bg-white dark:bg-white/5 placeholder-gray-400"})]})})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[(0,d.jsx)(T,{}),y?(0,d.jsxs)("button",{onClick:()=>x(!0),className:"relative text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 border border-transparent hover:border-gray-300 dark:hover:border-white/20",title:"Messages",children:[(0,d.jsx)(k.A,{className:"w-5 h-5 sm:w-6 sm:h-6"}),(0,d.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]}):(0,d.jsx)("button",{onClick:()=>u.oR.info("Please login to access messages"),className:"relative text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 border border-transparent hover:border-gray-300 dark:hover:border-white/20",title:"Messages (Login Required)",children:(0,d.jsx)(k.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),y&&(0,d.jsx)(O,{}),z?(0,d.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-200 rounded-full animate-pulse"}):y?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("button",{onClick:()=>v(!h),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors",children:(0,d.jsx)("img",{src:C?.customPhotoURL||C?.photoURL||C?.profilePic||C?.avatar||y.photoURL||`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(y.displayName||"user")}`,alt:y.displayName||"User",width:"28",height:"28",className:"rounded-full sm:w-8 sm:h-8"})}),(0,d.jsx)(q.N,{children:h&&(0,d.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-white/10 py-2 z-50",children:[(0,d.jsxs)(i(),{href:`/profile/${y.uid}`,prefetch:!1,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>v(!1),children:[(0,d.jsx)(l.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Profile"})]}),(0,d.jsxs)(i(),{href:"/orders",className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>v(!1),children:[(0,d.jsx)(m.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Orders"})]}),y?.role==="seller"&&(0,d.jsxs)(i(),{href:"/seller/dashboard",className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>v(!1),children:[(0,d.jsx)("span",{children:"\uD83D\uDCBC"}),(0,d.jsx)("span",{children:"Seller Dashboard"})]}),(0,d.jsx)("hr",{className:"my-2 border-gray-200 dark:border-white/10"}),(0,d.jsx)("button",{onClick:G,className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 w-full text-left",children:(0,d.jsx)("span",{children:"Logout"})})]})})]}):(0,d.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,d.jsx)(i(),{href:"/auth-login",className:"px-2 sm:px-4 py-2 text-sm sm:text-base text-gray-700 dark:text-gray-300 hover:text-purple-600 font-medium",children:"Login"}),(0,d.jsx)(i(),{href:"/register",className:"px-2 sm:px-4 py-2 text-sm sm:text-base bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Sign Up"})]})]})]}),(0,d.jsx)(q.N,{children:c&&(0,d.jsx)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 dark:border-white/10 py-4",children:(0,d.jsxs)("nav",{className:"space-y-2",children:[(0,d.jsxs)(i(),{href:"/",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>f(!1),children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83C\uDFE0"}),(0,d.jsx)("span",{className:"font-medium",children:"Home"})]}),(0,d.jsxs)(i(),{href:"/explore",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>f(!1),children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0D"}),(0,d.jsx)("span",{className:"font-medium",children:"Explore"})]}),(0,d.jsxs)(i(),{href:"/videos",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>f(!1),children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAC"}),(0,d.jsx)("span",{className:"font-medium",children:"Reels"})]}),(0,d.jsxs)(i(),{href:"/categories",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>f(!1),children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDCF1"}),(0,d.jsx)("span",{className:"font-medium",children:"Categories"})]}),(0,d.jsxs)(i(),{href:"/become-seller",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>f(!1),children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDCBC"}),(0,d.jsx)("span",{className:"font-medium",children:"Sell"})]})]})})})]}),(0,d.jsx)(I,{isOpen:w,onClose:()=>x(!1)})]})}function V(){let{theme:a}=(0,f.D)(),[b,c]=(0,e.useState)([{name:"Fashion",href:"/categories/fashion"},{name:"Electronics",href:"/categories/electronics"},{name:"Beauty",href:"/categories/beauty"},{name:"Home",href:"/categories/home"}]),[g,h]=(0,e.useState)(!1),j=g?a:"light";return(0,d.jsxs)("footer",{className:`relative ${g&&"dark"===a?"bg-gradient-to-br from-gray-900 via-purple-900/5 to-gray-900":"bg-gradient-to-br from-gray-50 to-gray-100"} ${g&&"dark"===a?"text-white":"text-gray-900"} transition-colors duration-300`,children:[(0,d.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,d.jsx)("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full mix-blend-soft-light filter blur-2xl animate-pulse ${"dark"===j?"bg-gradient-to-r from-purple-500 to-pink-500 opacity-15":"bg-gradient-to-r from-purple-300 to-pink-300 opacity-20"}`}),(0,d.jsx)("div",{className:`absolute bottom-0 left-0 w-32 h-32 rounded-full mix-blend-soft-light filter blur-2xl ${"dark"===j?"bg-gradient-to-r from-blue-500 to-teal-500 opacity-10":"bg-gradient-to-r from-blue-300 to-teal-300 opacity-15"}`})]}),(0,d.jsxs)("div",{className:"container mx-auto px-0 relative z-10",children:[(0,d.jsx)("div",{className:"px-6 py-10",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto",children:[(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute inset-0 rounded-lg blur-sm opacity-70 ${"dark"===j?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-gradient-to-r from-purple-400 to-pink-400"}`}),(0,d.jsx)("div",{className:`relative w-10 h-10 rounded-lg flex items-center justify-center ${"dark"===j?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-500"}`,children:(0,d.jsx)("span",{className:"text-white font-bold",children:"Z"})})]}),(0,d.jsx)("span",{className:`text-xl font-bold ml-3 ${"dark"===j?"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent":"text-purple-600"}`,children:"Zaillisy"})]}),(0,d.jsx)("p",{className:`text-sm mb-4 leading-relaxed ${g&&"dark"===a?"text-gray-400":"text-gray-600"}`,children:"Social commerce platform connecting buyers and sellers."}),(0,d.jsx)("div",{className:"flex space-x-3",children:[{name:"Facebook",href:"https://facebook.com",icon:"\uD83D\uDCD8"},{name:"Instagram",href:"https://instagram.com",icon:"\uD83D\uDCF7"},{name:"Twitter",href:"https://twitter.com",icon:"\uD83D\uDC26"}].map(a=>(0,d.jsx)("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm group ${"dark"===j?"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 hover:bg-gradient-to-r hover:from-purple-600 hover:to-pink-600":"bg-white border border-gray-200 hover:bg-gradient-to-r hover:from-purple-500 hover:to-pink-500"}`,title:a.name,children:(0,d.jsx)("span",{className:"text-base group-hover:scale-110 transition-transform",children:a.icon})},a.name))}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(i(),{href:"/become-seller",className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm ${"dark"===j?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600"}`,children:"Become a Seller"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:`text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ${"dark"===j?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"}`,children:["Categories",(0,d.jsx)("span",{className:`absolute bottom-0 left-0 w-8 h-0.5 rounded-full ${"dark"===j?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500"}`})]}),(0,d.jsxs)("ul",{className:"space-y-2",children:[b.map(b=>(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:b.href,className:`transition-all duration-300 text-sm flex items-center group py-1 ${g&&"dark"===a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"}`,children:[(0,d.jsx)("span",{className:`w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ${"dark"===j?"bg-purple-500":"bg-purple-400"}`}),(0,d.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:b.name})]})},b.name)),(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/categories",className:`transition-colors text-sm font-medium flex items-center group py-1 ${"dark"===j?"text-purple-400 hover:text-purple-300":"text-purple-600 hover:text-purple-800"}`,children:[(0,d.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:"View All"}),(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1 transform group-hover:translate-x-1 transition-transform duration-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:`text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ${"dark"===j?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"}`,children:["Support",(0,d.jsx)("span",{className:`absolute bottom-0 left-0 w-8 h-0.5 rounded-full ${"dark"===j?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500"}`})]}),(0,d.jsx)("ul",{className:"space-y-2 mb-4",children:[{name:"Help Center",href:"/help-center"},{name:"Contact Us",href:"/contact-us"},{name:"FAQs",href:"/faqs"}].map(a=>(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:a.href,className:`transition-all duration-300 text-sm flex items-center group py-1 ${"dark"===j?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"}`,children:[(0,d.jsx)("span",{className:`w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ${"dark"===j?"bg-purple-500":"bg-purple-400"}`}),(0,d.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:a.name})]})},a.name))}),(0,d.jsxs)("h3",{className:`text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ${"dark"===j?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"}`,children:["Company",(0,d.jsx)("span",{className:`absolute bottom-0 left-0 w-8 h-0.5 rounded-full ${"dark"===j?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500"}`})]}),(0,d.jsx)("ul",{className:"space-y-2",children:[{name:"About Us",href:"/about"},{name:"Careers",href:"/careers"},{name:"Blog",href:"/blog"}].map(a=>(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:a.href,className:`transition-all duration-300 text-sm flex items-center group py-1 ${"dark"===j?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"}`,children:[(0,d.jsx)("span",{className:`w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ${"dark"===j?"bg-purple-500":"bg-purple-400"}`}),(0,d.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:a.name})]})},a.name))})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:`text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ${"dark"===j?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"}`,children:["Legal",(0,d.jsx)("span",{className:`absolute bottom-0 left-0 w-8 h-0.5 rounded-full ${"dark"===j?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500"}`})]}),(0,d.jsx)("ul",{className:"space-y-2",children:[{name:"Terms",href:"/terms"},{name:"Privacy",href:"/privacy"},{name:"Cookies",href:"/cookies"}].map(a=>(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:a.href,className:`transition-all duration-300 text-sm flex items-center group py-1 ${"dark"===j?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"}`,children:[(0,d.jsx)("span",{className:`w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ${"dark"===j?"bg-purple-500":"bg-purple-400"}`}),(0,d.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:a.name})]})},a.name))})]})]})}),(0,d.jsx)("div",{className:`border-t mx-6 ${"dark"===j?"border-gray-800/50":"border-gray-200"}`}),(0,d.jsx)("div",{className:"px-6 py-6",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center max-w-6xl mx-auto",children:[(0,d.jsxs)("div",{className:`text-sm mb-4 md:mb-0 ${"dark"===j?"text-gray-500":"text-gray-600"}`,children:["\xa9 ",new Date().getFullYear()," Zaillisy. All rights reserved."]}),(0,d.jsxs)("div",{className:"flex space-x-6",children:[(0,d.jsx)(i(),{href:"/privacy",className:`text-sm transition-colors ${"dark"===j?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"}`,children:"Privacy Policy"}),(0,d.jsx)(i(),{href:"/terms",className:`text-sm transition-colors ${"dark"===j?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"}`,children:"Terms of Service"}),(0,d.jsx)(i(),{href:"/cookies",className:`text-sm transition-colors ${"dark"===j?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"}`,children:"Cookie Policy"})]})]})})]})]})}var W=c(32192),X=c(2943),Y=c(6943),Z=c(51361);function $(){let a=(0,g.usePathname)();(0,g.useParams)();let{user:b}=(0,n.useAuthStore)(),{profile:c,fetchProfile:f}=(0,p.n)(),[h,k]=(0,e.useState)(!1),[m,o]=(0,e.useState)(!1),q=[{href:"/",icon:W.A,label:"Home"},{href:"/explore",icon:j.A,label:"Explore"},{href:"/videos",icon:X.A,label:"Reels"},{href:"/categories",icon:Y.A,label:"Categories"},{href:b?`/profile/${b.uid}`:"/register",icon:l.A,label:"Profile"}],r=[{href:"/",icon:W.A,label:"Home"},{href:"/explore",icon:j.A,label:"Explore"},{href:"/videos",icon:X.A,label:"Reels"},{href:"#",icon:Q.A,label:"Upload",isUpload:!0},{href:"/categories",icon:Y.A,label:"Categories"},{href:b?`/profile/${b.uid}`:"/register",icon:l.A,label:"Profile"}],s=a=>{o(!1),"reel"===a?window.location.href="/upload/reel":window.location.href="/product/upload"};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg border-t border-gray-200/50 dark:border-white/10 shadow-2xl flex justify-around items-center h-16 sm:h-16 px-2 sm:px-4 z-40 block",children:(h?r:q).map(({href:b,icon:c,label:e,isUpload:f})=>{let g=a===b||b.includes("/profile")&&a.startsWith("/profile")||"/auth-login"===b&&a.startsWith("/auth-login")||"/reels"===b&&a.startsWith("/reels")||"/upload"===b&&a.startsWith("/upload")||"/product/upload"===b&&a.startsWith("/product/upload");return f?(0,d.jsxs)("button",{onClick:()=>{({href:b,icon:c,label:e,isUpload:f}).isUpload&&o(!0)},className:`flex flex-col items-center justify-center flex-1 py-2 transition-all duration-300 group relative ${g?"text-purple-600":"text-gray-500 hover:text-purple-600"}`,children:[(0,d.jsxs)("div",{className:`relative p-2.5 rounded-full transition-all duration-300 ${g?"bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg scale-110 ring-2 ring-purple-200":"group-hover:bg-purple-50 group-hover:scale-105 group-hover:shadow-md"}`,children:[(0,d.jsx)(c,{size:26,className:`w-6 h-6 sm:w-7 sm:h-7 ${g?"text-white":"text-gray-600 group-hover:text-purple-600"} transition-colors`}),g&&(0,d.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),(0,d.jsx)("span",{className:"text-xs mt-1 font-medium hidden md:block",children:e})]},b):(0,d.jsxs)(i(),{href:b,className:`flex flex-col items-center justify-center flex-1 py-2 transition-all duration-300 group relative ${g?"text-purple-600":"text-gray-500 hover:text-purple-600"}`,children:[(0,d.jsxs)("div",{className:`relative p-2.5 rounded-full transition-all duration-300 ${g?"bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg scale-110 ring-2 ring-purple-200":"group-hover:bg-purple-50 group-hover:scale-105 group-hover:shadow-md"}`,children:[(0,d.jsx)(c,{size:26,className:`w-6 h-6 sm:w-7 sm:h-7 ${g?"text-white":"text-gray-600 group-hover:text-purple-600"} transition-colors`}),g&&(0,d.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),(0,d.jsx)("span",{className:"text-xs mt-1 font-medium hidden md:block",children:e})]},b)})}),m&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-t-2xl w-full max-w-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload"}),(0,d.jsx)("button",{onClick:()=>o(!1),className:"p-2 rounded-full hover:bg-gray-100",children:(0,d.jsx)(y.A,{className:"w-5 h-5 text-gray-500"})})]}),(0,d.jsxs)("div",{className:"p-4 space-y-3",children:[(0,d.jsxs)("button",{onClick:()=>s("reel"),className:"w-full flex items-center space-x-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(Z.A,{className:"w-6 h-6 text-purple-600"})}),(0,d.jsxs)("div",{className:"flex-1 text-left",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900",children:"Upload Reel"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Share a video reel"})]})]}),(0,d.jsxs)("button",{onClick:()=>s("product"),className:"w-full flex items-center space-x-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(L.A,{className:"w-6 h-6 text-green-600"})}),(0,d.jsxs)("div",{className:"flex-1 text-left",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900",children:"Upload Product"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Add a new product"})]})]})]}),(0,d.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,d.jsx)("button",{onClick:()=>o(!1),className:"w-full py-3 text-gray-600 font-medium hover:bg-gray-50 rounded-lg transition-colors",children:"Cancel"})})]})})]})}function _({children:a,showFooter:b=!0,showHeader:c=!0,immersive:e=!1}){let h=(0,g.usePathname)(),i="/reels"===h||"/videos"===h,{initialize:j,unsubscribeUserListener:k}=(0,n.useAuthStore)(),{theme:l}=(0,f.D)();return(0,d.jsxs)("div",{className:"theme-surface min-h-screen flex flex-col bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100",children:[c&&!i&&(0,d.jsx)(U,{}),(0,d.jsx)("main",{className:`flex-1 ${i?"pb-16":"pb-16 sm:pb-16"}`,children:a}),b&&!i&&(0,d.jsx)(V,{}),(0,d.jsx)($,{}),(0,d.jsx)(u.l$,{position:"top-right",richColors:!0,closeButton:!0,theme:"dark"===l?"dark":"light"})]})}},94431:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(37413),e=c(85041),f=c.n(e);c(61135);var g=c(14143),h=c(94555);let i={title:"Zaillisy - Social E-Commerce Platform",description:"Discover, buy, and sell products in a social commerce environment. Connect with sellers, browse trending items, and shop with confidence.",keywords:"e-commerce, social commerce, online shopping, marketplace, buy, sell, Pakistan, Lahore",authors:[{name:"Zaillisy Team"}],robots:"index, follow",openGraph:{title:"Zaillisy - Social E-Commerce Platform",description:"Discover, buy, and sell products in a social commerce environment.",type:"website",locale:"en_US"},twitter:{card:"summary_large_image",title:"Zaillisy - Social E-Commerce Platform",description:"Discover, buy, and sell products in a social commerce environment."}};function j({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsx)(h.ThemeProvider,{children:(0,d.jsx)(g.Layout,{children:a})})})})}},94555:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Goryl Website\\goryl\\src\\components\\providers\\ThemeProvider.tsx","ThemeProvider")}};