"use strict";exports.id=2135,exports.ids=[2135],exports.modules={52135:(a,b,c)=>{c.r(b),c.d(b,{createCategory:()=>f,deleteCategory:()=>j,generateCategorySlug:()=>t,getAllCategories:()=>k,getCategory:()=>g,getCategoryBySlug:()=>h,getCategoryPath:()=>v,getCategoryStats:()=>p,getCategoryTree:()=>n,getChildCategories:()=>m,getParentCategories:()=>l,initializeDefaultCategories:()=>w,isCategoryActive:()=>u,reorderCategories:()=>y,searchCategories:()=>q,subscribeToCategories:()=>r,subscribeToCategory:()=>s,toggleCategoryActive:()=>x,updateCategory:()=>i,updateCategoryProductCount:()=>o});var d=c(75535),e=c(762);let f=async a=>{try{let b=(0,d.doc)((0,d.collection)(e.db,"categories")),c=Object.assign(Object.assign({},a),{productCount:0,isActive:!0,createdAt:(0,d.serverTimestamp)(),updatedAt:(0,d.serverTimestamp)()});return await (0,d.BN)(b,c),b.id}catch(a){throw console.error("Error creating category:",a),a}},g=async a=>{try{let b=(0,d.doc)(e.db,"categories",a),c=await (0,d.x7)(b);if(c.exists())return Object.assign({id:c.id},c.data());return null}catch(a){throw console.error("Error getting category:",a),a}},h=async a=>{try{let b=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.where)("slug","==",a),(0,d.where)("isActive","==",!0)),c=await (0,d.getDocs)(b);if(!c.empty){let a=c.docs[0];return Object.assign({id:a.id},a.data())}return null}catch(a){throw console.error("Error getting category by slug:",a),a}},i=async(a,b)=>{try{let c=(0,d.doc)(e.db,"categories",a);await (0,d.mZ)(c,Object.assign(Object.assign({},b),{updatedAt:(0,d.serverTimestamp)()}))}catch(a){throw console.error("Error updating category:",a),a}},j=async a=>{try{let b=(0,d.doc)(e.db,"categories",a);await (0,d.kd)(b)}catch(a){throw console.error("Error deleting category:",a),a}},k=async(a=!1)=>{try{let b=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.My)("sortOrder","asc"));return a||(b=(0,d.query)(b,(0,d.where)("isActive","==",!0))),(await (0,d.getDocs)(b)).docs.map(a=>Object.assign({id:a.id},a.data()))}catch(a){return console.log("Firebase categories not accessible, returning empty array"),[]}},l=async()=>{try{let a=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.where)("parentId","==",null),(0,d.where)("isActive","==",!0),(0,d.My)("sortOrder","asc"));return(await (0,d.getDocs)(a)).docs.map(a=>Object.assign({id:a.id},a.data()))}catch(a){throw console.error("Error getting parent categories:",a),a}},m=async a=>{try{let b=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.where)("parentId","==",a),(0,d.where)("isActive","==",!0),(0,d.My)("sortOrder","asc"));return(await (0,d.getDocs)(b)).docs.map(a=>Object.assign({id:a.id},a.data()))}catch(a){throw console.error("Error getting child categories:",a),a}},n=async()=>{try{let a=await k(),b=a.filter(a=>!a.parentId),c=b=>{let d=a.filter(a=>a.parentId===b.id);return Object.assign(Object.assign({},b),{children:d.map(c)})};return b.map(c)}catch(a){throw console.error("Error getting category tree:",a),a}},o=async(a,b=1)=>{try{let c=(0,d.doc)(e.db,"categories",a);await (0,d.mZ)(c,{productCount:b(b),updatedAt:(0,d.serverTimestamp)()})}catch(a){throw console.error("Error updating category product count:",a),a}},p=async a=>{try{let b=await g(a);if(!b)return null;let c=await m(a);return{id:b.id,name:b.name,slug:b.slug,productCount:b.productCount,childCount:c.length,isActive:b.isActive,sortOrder:b.sortOrder}}catch(a){throw console.error("Error getting category stats:",a),a}},q=async a=>{try{let b=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.where)("isActive","==",!0),(0,d.My)("name","asc"));return(await (0,d.getDocs)(b)).docs.map(a=>Object.assign({id:a.id},a.data())).filter(b=>{var c;return b.name.toLowerCase().includes(a.toLowerCase())||(null==(c=b.description)?void 0:c.toLowerCase().includes(a.toLowerCase()))})}catch(a){throw console.error("Error searching categories:",a),a}},r=a=>{let b=(0,d.query)((0,d.collection)(e.db,"categories"),(0,d.where)("isActive","==",!0),(0,d.My)("sortOrder","asc"));return(0,d.onSnapshot)(b,b=>{a(b.docs.map(a=>Object.assign({id:a.id},a.data())))})},s=(a,b)=>{let c=(0,d.doc)(e.db,"categories",a);return(0,d.onSnapshot)(c,a=>{a.exists()?b(Object.assign({id:a.id},a.data())):b(null)})},t=a=>a.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),u=a=>a.isActive,v=async a=>{try{let b=[],c=await g(a);for(;c;)if(b.unshift(c),c.parentId)c=await g(c.parentId);else break;return b}catch(a){throw console.error("Error getting category path:",a),a}},w=async()=>{try{for(let a of[{name:"Fashion & Apparel",slug:"fashion-apparel",description:"Clothing, shoes, and accessories",sortOrder:1,icon:"\uD83D\uDC55"},{name:"Electronics",slug:"electronics",description:"Computers, phones, and gadgets",sortOrder:2,icon:"\uD83D\uDCF1"},{name:"Home & Garden",slug:"home-garden",description:"Furniture, decor, and garden items",sortOrder:3,icon:"\uD83C\uDFE0"},{name:"Beauty & Cosmetics",slug:"beauty-cosmetics",description:"Makeup, skincare, and beauty products",sortOrder:4,icon:"\uD83D\uDC84"},{name:"Sports & Fitness",slug:"sports-fitness",description:"Sports equipment and fitness gear",sortOrder:5,icon:"⚽"},{name:"Books & Media",slug:"books-media",description:"Books, movies, and music",sortOrder:6,icon:"\uD83D\uDCDA"},{name:"Toys & Games",slug:"toys-games",description:"Toys, games, and entertainment",sortOrder:7,icon:"\uD83C\uDFAE"},{name:"Automotive",slug:"automotive",description:"Car parts and accessories",sortOrder:8,icon:"\uD83D\uDE97"},{name:"Food & Beverages",slug:"food-beverages",description:"Food, drinks, and snacks",sortOrder:9,icon:"\uD83C\uDF55"},{name:"Health & Wellness",slug:"health-wellness",description:"Health products and supplements",sortOrder:10,icon:"\uD83D\uDC8A"}])await h(a.slug)||await f(a);console.log("✅ Default categories initialized")}catch(a){throw console.error("Error initializing default categories:",a),a}},x=async(a,b)=>{try{await i(a,{isActive:b})}catch(a){throw console.error("Error toggling category active status:",a),a}},y=async a=>{try{let b=e.db.batch();a.forEach((a,c)=>{let f=(0,d.doc)(e.db,"categories",a);b.update(f,{sortOrder:c+1,updatedAt:(0,d.serverTimestamp)()})}),await b.commit()}catch(a){throw console.error("Error reordering categories:",a),a}}}};