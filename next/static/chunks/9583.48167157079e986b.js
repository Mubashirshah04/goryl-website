"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1964,5610,9583],{25610:(e,t,r)=>{r.d(t,{db:()=>u,j2:()=>g,storage:()=>y});var a=r(23915),o=r(16203),s=r(35317),i=r(90858),c=r(92144),n=r(81115),d=r(86864);let l=(0,a.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),g=(0,o.xI)(l),u=(0,s.aU)(l);(0,n.C3)(l);let y=(0,i.c7)(l);(0,c.Uz)(l);try{(0,d.TT)().then(e=>{e?((0,d.P5)(l),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",l.options.projectId)},89583:(e,t,r)=>{r.r(t),r.d(t,{createCategory:()=>s,deleteCategory:()=>d,generateCategorySlug:()=>C,getAllCategories:()=>l,getCategory:()=>i,getCategoryBySlug:()=>c,getCategoryPath:()=>O,getCategoryStats:()=>h,getCategoryTree:()=>y,getChildCategories:()=>u,getParentCategories:()=>g,initializeDefaultCategories:()=>v,isCategoryActive:()=>f,reorderCategories:()=>j,searchCategories:()=>m,subscribeToCategories:()=>b,subscribeToCategory:()=>w,toggleCategoryActive:()=>A,updateCategory:()=>n,updateCategoryProductCount:()=>p});var a=r(35317),o=r(25610);let s=async e=>{try{let t=(0,a.doc)((0,a.collection)(o.db,"categories")),r=Object.assign(Object.assign({},e),{productCount:0,isActive:!0,createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()});return await (0,a.BN)(t,r),t.id}catch(e){throw console.error("Error creating category:",e),e}},i=async e=>{try{let t=(0,a.doc)(o.db,"categories",e),r=await (0,a.x7)(t);if(r.exists())return Object.assign({id:r.id},r.data());return null}catch(e){throw console.error("Error getting category:",e),e}},c=async e=>{try{let t=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.where)("slug","==",e),(0,a.where)("isActive","==",!0)),r=await (0,a.getDocs)(t);if(!r.empty){let e=r.docs[0];return Object.assign({id:e.id},e.data())}return null}catch(e){throw console.error("Error getting category by slug:",e),e}},n=async(e,t)=>{try{let r=(0,a.doc)(o.db,"categories",e);await (0,a.mZ)(r,Object.assign(Object.assign({},t),{updatedAt:(0,a.serverTimestamp)()}))}catch(e){throw console.error("Error updating category:",e),e}},d=async e=>{try{let t=(0,a.doc)(o.db,"categories",e);await (0,a.kd)(t)}catch(e){throw console.error("Error deleting category:",e),e}},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.My)("sortOrder","asc"));return e||(t=(0,a.query)(t,(0,a.where)("isActive","==",!0))),(await (0,a.getDocs)(t)).docs.map(e=>Object.assign({id:e.id},e.data()))}catch(e){return console.log("Firebase categories not accessible, returning empty array"),[]}},g=async()=>{try{let e=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.where)("parentId","==",null),(0,a.where)("isActive","==",!0),(0,a.My)("sortOrder","asc"));return(await (0,a.getDocs)(e)).docs.map(e=>Object.assign({id:e.id},e.data()))}catch(e){throw console.error("Error getting parent categories:",e),e}},u=async e=>{try{let t=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.where)("parentId","==",e),(0,a.where)("isActive","==",!0),(0,a.My)("sortOrder","asc"));return(await (0,a.getDocs)(t)).docs.map(e=>Object.assign({id:e.id},e.data()))}catch(e){throw console.error("Error getting child categories:",e),e}},y=async()=>{try{let e=await l(),t=e.filter(e=>!e.parentId),r=t=>{let a=e.filter(e=>e.parentId===t.id);return Object.assign(Object.assign({},t),{children:a.map(r)})};return t.map(r)}catch(e){throw console.error("Error getting category tree:",e),e}},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{let r=(0,a.doc)(o.db,"categories",e);await (0,a.mZ)(r,{productCount:t(t),updatedAt:(0,a.serverTimestamp)()})}catch(e){throw console.error("Error updating category product count:",e),e}},h=async e=>{try{let t=await i(e);if(!t)return null;let r=await u(e);return{id:t.id,name:t.name,slug:t.slug,productCount:t.productCount,childCount:r.length,isActive:t.isActive,sortOrder:t.sortOrder}}catch(e){throw console.error("Error getting category stats:",e),e}},m=async e=>{try{let t=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.where)("isActive","==",!0),(0,a.My)("name","asc"));return(await (0,a.getDocs)(t)).docs.map(e=>Object.assign({id:e.id},e.data())).filter(t=>{var r;return t.name.toLowerCase().includes(e.toLowerCase())||(null==(r=t.description)?void 0:r.toLowerCase().includes(e.toLowerCase()))})}catch(e){throw console.error("Error searching categories:",e),e}},b=e=>{let t=(0,a.query)((0,a.collection)(o.db,"categories"),(0,a.where)("isActive","==",!0),(0,a.My)("sortOrder","asc"));return(0,a.onSnapshot)(t,t=>{e(t.docs.map(e=>Object.assign({id:e.id},e.data())))})},w=(e,t)=>{let r=(0,a.doc)(o.db,"categories",e);return(0,a.onSnapshot)(r,e=>{e.exists()?t(Object.assign({id:e.id},e.data())):t(null)})},C=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),f=e=>e.isActive,O=async e=>{try{let t=[],r=await i(e);for(;r;)if(t.unshift(r),r.parentId)r=await i(r.parentId);else break;return t}catch(e){throw console.error("Error getting category path:",e),e}},v=async()=>{try{for(let e of[{name:"Fashion & Apparel",slug:"fashion-apparel",description:"Clothing, shoes, and accessories",sortOrder:1,icon:"\uD83D\uDC55"},{name:"Electronics",slug:"electronics",description:"Computers, phones, and gadgets",sortOrder:2,icon:"\uD83D\uDCF1"},{name:"Home & Garden",slug:"home-garden",description:"Furniture, decor, and garden items",sortOrder:3,icon:"\uD83C\uDFE0"},{name:"Beauty & Cosmetics",slug:"beauty-cosmetics",description:"Makeup, skincare, and beauty products",sortOrder:4,icon:"\uD83D\uDC84"},{name:"Sports & Fitness",slug:"sports-fitness",description:"Sports equipment and fitness gear",sortOrder:5,icon:"⚽"},{name:"Books & Media",slug:"books-media",description:"Books, movies, and music",sortOrder:6,icon:"\uD83D\uDCDA"},{name:"Toys & Games",slug:"toys-games",description:"Toys, games, and entertainment",sortOrder:7,icon:"\uD83C\uDFAE"},{name:"Automotive",slug:"automotive",description:"Car parts and accessories",sortOrder:8,icon:"\uD83D\uDE97"},{name:"Food & Beverages",slug:"food-beverages",description:"Food, drinks, and snacks",sortOrder:9,icon:"\uD83C\uDF55"},{name:"Health & Wellness",slug:"health-wellness",description:"Health products and supplements",sortOrder:10,icon:"\uD83D\uDC8A"}])await c(e.slug)||await s(e);console.log("✅ Default categories initialized")}catch(e){throw console.error("Error initializing default categories:",e),e}},A=async(e,t)=>{try{await n(e,{isActive:t})}catch(e){throw console.error("Error toggling category active status:",e),e}},j=async e=>{try{let t=o.db.batch();e.forEach((e,r)=>{let s=(0,a.doc)(o.db,"categories",e);t.update(s,{sortOrder:r+1,updatedAt:(0,a.serverTimestamp)()})}),await t.commit()}catch(e){throw console.error("Error reordering categories:",e),e}}}}]);