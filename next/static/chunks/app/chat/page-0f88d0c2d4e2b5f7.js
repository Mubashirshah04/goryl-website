(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,8457],{23472:(e,t,s)=>{Promise.resolve().then(s.bind(s,42047))},25610:(e,t,s)=>{"use strict";s.d(t,{db:()=>h,j2:()=>u,storage:()=>x});var r=s(23915),a=s(16203),i=s(35317),l=s(90858),o=s(92144),n=s(81115),c=s(86864);let d=(0,r.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,a.xI)(d),h=(0,i.aU)(d);(0,n.C3)(d);let x=(0,l.c7)(d);(0,o.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},42047:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(95155),a=s(12115),i=s(35695),l=s(6874),o=s.n(l),n=s(1978),c=s(60760),d=s(71366),u=s(47924),h=s(35169),x=s(19420),p=s(9803),m=s(12486),b=s(68084),g=s(56671),v=s(35317),w=s(25610),f=s(29700),y=s(76766);let j=e=>{if(!e)return"";if(e instanceof Date)return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(null==e?void 0:e.toDate)return e.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};function N(){var e,t,s,l,N,U;let{user:k}=(0,b.useAuthStore)();(0,i.useRouter)();let[A,P]=(0,a.useState)([]),[S,L]=(0,a.useState)(null),[C,T]=(0,a.useState)([]),[R,E]=(0,a.useState)(""),[D,z]=(0,a.useState)(!0),[O,F]=(0,a.useState)(!1),[H,I]=(0,a.useState)(!1),[M,_]=(0,a.useState)(""),[B,V]=(0,a.useState)([]),[J,K]=(0,a.useState)(!1);(0,a.useEffect)(()=>{I(!0)},[]),(0,a.useEffect)(()=>{k&&(async()=>{K(!0);try{let e=(0,v.collection)(w.db,"users/".concat(k.uid,"/suggestedFriends")),t=await (0,v.getDocs)(e);V(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){V([])}finally{K(!1)}})()},[k]);let G=async e=>{if(k)try{(0,v.doc)(w.db,"users",k.uid),g.oR.success("Followed!")}catch(e){g.oR.error("Failed to follow")}},W=async(e,t,s)=>{if(k)try{let r=A.find(t=>{var s;return(null==(s=t.otherUser)?void 0:s.id)===e});if(r){L(r),g.oR.success("Opened chat with ".concat(t));return}let a={id:await startChatIfNeeded(k.uid,e),participants:[k.uid,e],lastMessage:null,lastMessageTime:null,otherUser:{id:e,name:t,photoURL:s}};L(a),P(e=>[a,...e]),g.oR.success("Started chat with ".concat(t))}catch(e){console.error("Error starting chat:",e),g.oR.error("Failed to start chat")}};(0,a.useEffect)(()=>{if(!k)return void z(!1);(async()=>{try{let e=await getUserChats(k.uid),t=await Promise.all(e.map(async e=>{var t;let s=null==(t=e.participants)?void 0:t.find(e=>e!==k.uid);if(s)try{let t=await (0,v.x7)("users",s);return{...e,otherUser:t?{id:t.id,name:t.name||t.displayName||"Unknown User",photoURL:t.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(t.name||"user")}:void 0}}catch(e){console.error("Error fetching user:",e)}return e}));P(t)}catch(e){console.error("Error loading chats:",e),g.oR.error("Failed to load chats")}finally{z(!1)}})()},[k]),(0,a.useEffect)(()=>{if(!S)return;(async()=>{try{let e=await getChatMessages(S.id);T(e)}catch(e){console.error("Error loading messages:",e),g.oR.error("Failed to load messages")}})();let e=(0,f.sy)("chats/".concat(S.id,"/messages"),e=>{T(e)},[],"createdAt","asc");return()=>e()},[S]);let Z=async()=>{if(R.trim()&&S&&k&&!O){F(!0);try{await sendMessage(S.id,k.uid,R.trim(),k.displayName||"User"),E("")}catch(e){console.error("Error sending message:",e),g.oR.error("Failed to send message")}finally{F(!1)}}},q=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Z())},Q=A.filter(e=>{var t;return null==(t=e.otherUser)?void 0:t.name.toLowerCase().includes(M.toLowerCase())});return k?D?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"animate-pulse space-y-6",children:[(0,r.jsx)("div",{className:"h-12 bg-white/10 rounded-2xl w-1/4"}),(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-white/20 rounded w-1/3"}),(0,r.jsx)("div",{className:"h-3 bg-white/10 rounded w-2/3"})]})]},t))})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-fuchsia-500 rounded-3xl flex items-center justify-center shadow-2xl ring-4 ring-purple-500/20",children:(0,r.jsx)(d.A,{className:"text-white",size:32})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"Premium Messages"}),(0,r.jsxs)("p",{className:"text-purple-200 text-xl font-semibold",children:[A.length," ",1===A.length?"conversation":"conversations"]})]})]})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:(0,r.jsx)(EnhancedUserSearch,{currentUserId:k.uid,onStartChat:W,onFollow:G})}),0===A.length?(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-40 h-40 bg-gradient-to-br from-purple-500/20 to-fuchsia-500/20 rounded-full flex items-center justify-center mx-auto mb-8 backdrop-blur-xl border border-white/20",children:(0,r.jsx)(d.A,{className:"w-24 h-24 text-purple-300"})}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-4 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"No conversations yet"}),(0,r.jsx)("p",{className:"text-purple-200 text-xl mb-8 leading-relaxed",children:"Start chatting with sellers and other users!"}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-8 py-4 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-2xl font-bold text-lg inline-flex items-center space-x-3",children:(0,r.jsx)(o(),{href:"/",className:"flex items-center space-x-3",children:(0,r.jsx)("span",{children:"Browse Products"})})})]}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"lg:hidden",children:S?(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl min-h-[80vh] flex flex-col shadow-2xl",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-white/20 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>L(null),className:"p-2 text-purple-200 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:(0,r.jsx)(h.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y.A,{user:{photoURL:null==(e=S.otherUser)?void 0:e.photoURL,name:(null==(t=S.otherUser)?void 0:t.name)||"User"},size:40,className:"rounded-2xl ring-2 ring-white/10"}),(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-white text-lg",children:(null==(s=S.otherUser)?void 0:s.name)||"Unknown User"}),(0,r.jsx)("p",{className:"text-green-400 text-sm font-semibold",children:"Online"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-purple-200 hover:text-white hover:bg-white/10 rounded-2xl transition-all duration-300",children:(0,r.jsx)(x.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-purple-200 hover:text-white hover:bg-white/10 rounded-2xl transition-all duration-300",children:(0,r.jsx)(p.A,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 max-h-[50vh]",children:(0,r.jsx)(c.N,{children:C.map((e,t)=>{let s=e.senderId===k.uid;return(0,r.jsx)(n.P.div,{initial:H?{opacity:0,y:20}:void 0,animate:H?{opacity:1,y:0}:void 0,transition:{delay:.05*t},className:"flex ".concat(s?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[85%] rounded-3xl px-4 py-3 ".concat(s?"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white":"bg-white/20 text-white backdrop-blur-sm"),children:[(0,r.jsx)("p",{className:"text-sm leading-relaxed",children:e.text}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(s?"text-purple-100":"text-purple-300"),children:j(e.createdAt)})]})},e.id)})})}),(0,r.jsx)("div",{className:"p-4 border-t border-white/20",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"text",value:R,onChange:e=>E(e.target.value),onKeyPress:q,placeholder:"Type a message...",className:"flex-1 bg-white/10 border border-white/20 rounded-2xl px-4 py-3 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm",disabled:O}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,disabled:O||!R.trim(),className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white p-3 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})})]}):(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl min-h-[70vh] overflow-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-white/20",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-300",size:16}),(0,r.jsx)("input",{type:"text",placeholder:"Search conversations...",value:M,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm text-sm"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto divide-y divide-white/10",children:(0,r.jsx)(c.N,{children:Q.map((e,t)=>{var s,a,i;return(0,r.jsx)(n.P.div,{initial:H?{opacity:0,x:-20}:void 0,animate:H?{opacity:1,x:0}:void 0,transition:{delay:.1*t},className:"p-4 cursor-pointer transition-all duration-300 hover:bg-white/10 active:bg-white/20",onClick:()=>L(e),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,r.jsx)(y.A,{user:{photoURL:null==(s=e.otherUser)?void 0:s.photoURL,name:(null==(a=e.otherUser)?void 0:a.name)||"User"},size:48,className:"rounded-2xl ring-2 ring-white/10"}),(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-white"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-semibold text-white text-base truncate",children:(null==(i=e.otherUser)?void 0:i.name)||"Unknown User"}),(0,r.jsx)("p",{className:"text-purple-200 text-sm truncate",children:e.lastMessage||"No messages yet"}),e.lastMessageTime&&(0,r.jsx)("p",{className:"text-purple-300 text-xs mt-1",children:j(e.lastMessageTime)})]})]})},e.id)})})})]})}),(0,r.jsxs)("div",{className:"hidden lg:grid lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl h-[700px] overflow-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"p-6 border-b border-white/20",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-purple-300",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Search conversations...",value:M,onChange:e=>_(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto divide-y divide-white/10",children:(0,r.jsx)(c.N,{children:Q.map((e,t)=>{var s,a,i;return(0,r.jsx)(n.P.div,{initial:H?{opacity:0,x:-20}:void 0,animate:H?{opacity:1,x:0}:void 0,transition:{delay:.1*t},className:"p-6 cursor-pointer transition-all duration-300 hover:bg-white/10 ".concat((null==S?void 0:S.id)===e.id?"bg-white/20 border-r-4 border-purple-500":""),onClick:()=>L(e),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y.A,{user:{photoURL:null==(s=e.otherUser)?void 0:s.photoURL,name:(null==(a=e.otherUser)?void 0:a.name)||"User"},size:56,className:"rounded-2xl ring-4 ring-white/10"}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-bold text-white text-lg truncate",children:(null==(i=e.otherUser)?void 0:i.name)||"Unknown User"}),(0,r.jsx)("p",{className:"text-purple-200 text-sm truncate",children:e.lastMessage||"No messages yet"}),e.lastMessageTime&&(0,r.jsx)("p",{className:"text-purple-300 text-xs mt-1",children:j(e.lastMessageTime)})]})]})},e.id)})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:S?(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl h-[700px] flex flex-col shadow-2xl",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-white/20 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y.A,{user:{photoURL:null==(l=S.otherUser)?void 0:l.photoURL,name:(null==(N=S.otherUser)?void 0:N.name)||"User"},size:48,className:"rounded-2xl ring-4 ring-white/10"}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-white text-xl",children:(null==(U=S.otherUser)?void 0:U.name)||"Unknown User"}),(0,r.jsx)("p",{className:"text-green-400 text-sm font-semibold",children:"Online"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-3 text-purple-200 hover:text-white hover:bg-white/10 rounded-2xl transition-all duration-300",children:(0,r.jsx)(x.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-3 text-purple-200 hover:text-white hover:bg-white/10 rounded-2xl transition-all duration-300",children:(0,r.jsx)(p.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-3 text-purple-200 hover:text-white hover:bg-white/10 rounded-2xl transition-all duration-300",children:(0,r.jsx)(MoreVertical,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:(0,r.jsx)(c.N,{children:C.map((e,t)=>{let s=e.senderId===k.uid;return(0,r.jsx)(n.P.div,{initial:H?{opacity:0,y:20}:void 0,animate:H?{opacity:1,y:0}:void 0,transition:{delay:.05*t},className:"flex ".concat(s?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[75%] rounded-3xl px-6 py-4 ".concat(s?"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white shadow-lg":"bg-white/20 text-white backdrop-blur-sm border border-white/10"),children:[(0,r.jsx)("p",{className:"leading-relaxed",children:e.text}),(0,r.jsx)("p",{className:"text-xs mt-2 ".concat(s?"text-purple-100":"text-purple-300"),children:j(e.createdAt)})]})},e.id)})})}),(0,r.jsx)("div",{className:"p-6 border-t border-white/20",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("input",{type:"text",value:R,onChange:e=>E(e.target.value),onKeyPress:q,placeholder:"Type a message...",className:"flex-1 bg-white/10 border border-white/20 rounded-2xl px-6 py-4 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm",disabled:O}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,disabled:O||!R.trim(),className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-6 py-4 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})})]}):(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl h-[700px] flex items-center justify-center shadow-2xl",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(d.A,{className:"w-24 h-24 text-purple-300 mx-auto mb-6"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Select a conversation"}),(0,r.jsx)("p",{className:"text-purple-200 text-lg",children:"Choose a chat from the sidebar to start messaging"})]})})})]})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md mx-auto px-4",children:[(0,r.jsx)("div",{className:"w-40 h-40 bg-gradient-to-br from-purple-500/20 to-fuchsia-500/20 rounded-full flex items-center justify-center mx-auto mb-8 backdrop-blur-xl border border-white/20",children:(0,r.jsx)(d.A,{className:"w-24 h-24 text-purple-300"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-4 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"Sign in to view your chats"}),(0,r.jsx)("p",{className:"text-purple-200 text-xl mb-8 leading-relaxed",children:"Connect with sellers and other users through premium messaging."}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-8 py-4 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-2xl font-bold text-lg",children:(0,r.jsx)(o(),{href:"/auth-login",children:"Sign In"})})]})})}},68084:(e,t,s)=>{"use strict";s.d(t,{useAuthStore:()=>o});var r=s(88693),a=s(16203),i=s(25610),l=s(95997);let o=(0,r.vt)((e,t)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:t=>e({user:t}),setUserData:t=>e({userData:t}),setLoading:t=>e({loading:t}),setUnsubscribeUserListener:t=>e({unsubscribeUserListener:t}),initialize:()=>(0,a.hg)(i.j2,async r=>{if(r)try{let a=await (0,l.gL)(r.uid),i=Object.assign(Object.assign({},r),{role:null==a?void 0:a.role});e({user:i,userData:a,loading:!1});let{doc:o,onSnapshot:n}=await Promise.resolve().then(s.bind(s,35317)),{db:c}=await Promise.resolve().then(s.bind(s,25610)),d=o(c,"users",r.uid),u=n(d,s=>{if(s.exists()){let r=s.data();e({userData:r,user:Object.assign(Object.assign({},t().user||{}),{role:r.role})})}});e({unsubscribeUserListener:u})}catch(t){console.error("Error fetching user data:",t),e({user:Object.assign(Object.assign({},r),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:s}=t();s&&(s(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:s}=t();if(s)try{let r=await (0,l.gL)(s.uid);e({userData:r,user:Object.assign(Object.assign({},t().user||{}),{role:null==r?void 0:r.role})}),setTimeout(async()=>{try{let r=await (0,l.gL)(s.uid);e({userData:r,user:Object.assign(Object.assign({},t().user||{}),{role:null==r?void 0:r.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{o.getState().initialize()},0)},76766:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(95155),a=s(12115);function i(e){let{user:t,size:s=128,className:i=""}=e,[l,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)("");(0,a.useEffect)(()=>{o(!1),c(!0);let e=(null==t?void 0:t.customPhotoURL)||(null==t?void 0:t.photoURL)||(null==t?void 0:t.profilePic)||(null==t?void 0:t.avatar)||"";if(!e){u("https://api.dicebear.com/7.x/avataaars/svg?seed=Default"),c(!1);return}e.includes("firebasestorage.googleapis.com")||e.includes("firebasestorage.app")||e.includes("googleusercontent.com"),u(e),c(!1)},[t]);let h=l?"https://api.dicebear.com/7.x/avataaars/svg?seed=Default":d||"https://api.dicebear.com/7.x/avataaars/svg?seed=Default";return(0,r.jsxs)("div",{className:"relative",style:{width:s,height:s},children:[(0,r.jsx)("img",{src:h,alt:(null==t?void 0:t.name)||"Profile",width:s,height:s,onLoad:()=>{console.log("Profile image loaded successfully:",h),c(!1)},onError:e=>{console.log("Profile image failed to load:",{src:e.target.src,user:(null==t?void 0:t.name)||"Unknown user"}),o(!0),c(!1)},referrerPolicy:"no-referrer",className:"".concat(i," ").concat(n?"opacity-0":"opacity-100"," absolute inset-0 w-full h-full object-cover")}),n&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 rounded-full",style:{width:s,height:s}})]})}},95997:(e,t,s)=>{"use strict";s.d(t,{G6:()=>o,HW:()=>u,Hh:()=>c,Jv:()=>n,eT:()=>b,gL:()=>h,qc:()=>m,xw:()=>d});var r=s(16203),a=s(35317),i=s(25610);let l=new r.HF;l.addScope("email"),l.addScope("profile");let o=async()=>{var e;try{let t=(await (0,r.df)(i.j2,l)).user;if(!(await (0,a.x7)((0,a.doc)(i.db,"users",t.uid))).exists()){let s={id:t.uid,email:t.email||"",name:t.displayName||"Anonymous",username:(null==(e=t.email)?void 0:e.split("@")[0])||"user",avatar:t.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(i.db,"users",t.uid),s)}return t}catch(e){throw console.error("Google sign-in error:",e),e}},n=async(e,t)=>{try{return(await (0,r.x9)(i.j2,e,t)).user}catch(e){throw e}},c=async function(e,t,s){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let o=(await (0,r.eJ)(i.j2,e,t)).user;await (0,r.r7)(o,{displayName:s});try{let t={id:o.uid,email:o.email||"",name:s,username:e.split("@")[0],avatar:o.photoURL||"",bio:"",role:l,accountType:l,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(i.db,"users",o.uid),t),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return o}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,r.J1)(i.j2,e)}catch(e){throw e}},u=()=>i.j2.currentUser,h=async e=>{try{let t=await (0,a.x7)((0,a.doc)(i.db,"users",e));if(t.exists())return t.data();return null}catch(e){return console.error("Error getting user data:",e),null}},x=async e=>{try{let t=await h(e);return(null==t?void 0:t.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},p=async e=>{try{let t=await h(e);return(null==t?void 0:t.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},m=async e=>"admin"===await x(e),b=async e=>["personal_seller","brand","company"].includes(await p(e))}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,6874,282,9700,8441,5964,7358],()=>e(e.s=23472)),_N_E=e.O()}]);