(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1778,5610],{25610:(e,t,r)=>{"use strict";r.d(t,{db:()=>m,j2:()=>u,storage:()=>x});var s=r(23915),a=r(16203),i=r(35317),n=r(90858),l=r(92144),d=r(81115),c=r(86864);let o=(0,s.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,a.xI)(o),m=(0,i.aU)(o);(0,d.C3)(o);let x=(0,n.c7)(o);(0,l.Uz)(o);try{(0,c.TT)().then(e=>{e?((0,c.P5)(o),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",o.options.projectId)},25883:(e,t,r)=>{Promise.resolve().then(r.bind(r,95804))},60525:(e,t,r)=>{"use strict";r.d(t,{Jq:()=>o,Kv:()=>l,UL:()=>d,h6:()=>c});var s=r(35317),a=r(25610),i=r(53690);class n{static async updateOrderStatus(e,t,r,n){try{console.log("\uD83D\uDCE6 Updating order ".concat(e," to status: ").concat(t));let l=(0,s.doc)(a.db,"orders",e),d=new Date,c={status:t,message:r||this.getDefaultStatusMessage(t),timestamp:d,location:n||"Processing Center"};await (0,s.mZ)(l,{status:t,updatedAt:d,["timeline.".concat(Date.now())]:c}),console.log("✅ Order status updated successfully");let o=await (0,s.x7)(l);if(o.exists()){let s=Object.assign({id:e},o.data());await (0,i.wA)(e,t,s),await this.sendStatusUpdateNotification(e,t,r)}return{success:!0}}catch(e){return console.error("❌ Error updating order status:",e),{success:!1,error:e}}}static async sendStatusUpdateNotification(e,t,r){try{await (0,s.addDoc)((0,s.collection)(a.db,"notifications"),{orderId:e,type:"order_status_update",status:t,message:r||this.getDefaultStatusMessage(t),title:this.getStatusTitle(t),createdAt:(0,s.serverTimestamp)(),read:!1}),console.log("\uD83D\uDCF1 Status update notification sent")}catch(e){console.error("❌ Error sending status notification:",e)}}static getDefaultStatusMessage(e){return({pending:"Your order has been placed and is awaiting confirmation",confirmed:"Your order has been confirmed and is being prepared",processing:"Your order is being processed and packed",shipped:"Your order has been shipped and is on its way",out_for_delivery:"Your order is out for delivery and will arrive soon",delivered:"Your order has been delivered successfully",cancelled:"Your order has been cancelled"})[e]||"Order status updated"}static getStatusTitle(e){return({pending:"⏳ Order Placed",confirmed:"✅ Order Confirmed",processing:"\uD83D\uDCE6 Processing Order",shipped:"\uD83D\uDE9A Order Shipped",out_for_delivery:"\uD83D\uDE9B Out for Delivery",delivered:"\uD83D\uDCE6 Order Delivered",cancelled:"❌ Order Cancelled"})[e]||"\uD83D\uDCCB Order Update"}static async cancelOrder(e,t){try{console.log("❌ Cancelling order: ".concat(e));let r=(0,s.doc)(a.db,"orders",e);return await (0,s.mZ)(r,{status:"cancelled",cancelReason:t||"Cancelled by customer",cancelledAt:new Date,updatedAt:new Date}),await this.updateOrderStatus(e,"cancelled","Order cancelled: ".concat(t||"Customer request")),console.log("✅ Order cancelled successfully"),{success:!0}}catch(e){return console.error("❌ Error cancelling order:",e),{success:!1,error:e}}}static async initiateReturn(e,t,r){try{console.log("\uD83D\uDD04 Initiating return for order: ".concat(e));let i={orderId:e,reason:t,items:r||[],status:"return_requested",requestedAt:new Date,createdAt:(0,s.serverTimestamp)()},n=await (0,s.addDoc)((0,s.collection)(a.db,"returns"),i),l=(0,s.doc)(a.db,"orders",e);return await (0,s.mZ)(l,{returnStatus:"return_requested",returnId:n.id,updatedAt:new Date}),console.log("✅ Return request created successfully"),{success:!0,returnId:n.id}}catch(e){return console.error("❌ Error initiating return:",e),{success:!1,error:e}}}static async submitReview(e,t,r,i,n){try{console.log("⭐ Submitting review for order: ".concat(e));let l={orderId:e,productId:t,userId:n,rating:r,review:i,createdAt:(0,s.serverTimestamp)(),verified:!0};await (0,s.addDoc)((0,s.collection)(a.db,"reviews"),l);let d=(0,s.doc)(a.db,"products",t);return await (0,s.mZ)(d,{totalReviews:(0,s.GV)(1),totalRating:(0,s.GV)(r)}),console.log("✅ Review submitted successfully"),{success:!0}}catch(e){return console.error("❌ Error submitting review:",e),{success:!1,error:e}}}static async generateInvoice(e){try{console.log("\uD83D\uDCC4 Generating invoice for order: ".concat(e));let t={orderId:e,invoiceNumber:"INV-".concat(Date.now()),generatedAt:new Date,downloadUrl:"/invoices/".concat(e,".pdf")};return console.log("✅ Invoice generated:",t),{success:!0,invoice:t}}catch(e){return console.error("❌ Error generating invoice:",e),{success:!1,error:e}}}static async getDetailedTracking(e){try{console.log("\uD83D\uDD0D Getting detailed tracking for: ".concat(e));let t={orderId:e,currentLocation:"Distribution Center",estimatedDelivery:new Date(Date.now()+1728e5),trackingEvents:[{time:new Date,location:"Order Placed",status:"confirmed"},{time:new Date,location:"Processing Center",status:"processing"},{time:new Date,location:"Shipped",status:"shipped"}]};return{success:!0,tracking:t}}catch(e){return console.error("❌ Error getting tracking info:",e),{success:!1,error:e}}}}let l=n.updateOrderStatus.bind(n);n.cancelOrder.bind(n);let d=n.initiateReturn.bind(n),c=n.submitReview.bind(n),o=n.generateInvoice.bind(n);n.getDetailedTracking.bind(n)},68084:(e,t,r)=>{"use strict";r.d(t,{useAuthStore:()=>l});var s=r(88693),a=r(16203),i=r(25610),n=r(95997);let l=(0,s.vt)((e,t)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:t=>e({user:t}),setUserData:t=>e({userData:t}),setLoading:t=>e({loading:t}),setUnsubscribeUserListener:t=>e({unsubscribeUserListener:t}),initialize:()=>(0,a.hg)(i.j2,async s=>{if(s)try{let a=await (0,n.gL)(s.uid),i=Object.assign(Object.assign({},s),{role:null==a?void 0:a.role});e({user:i,userData:a,loading:!1});let{doc:l,onSnapshot:d}=await Promise.resolve().then(r.bind(r,35317)),{db:c}=await Promise.resolve().then(r.bind(r,25610)),o=l(c,"users",s.uid),u=d(o,r=>{if(r.exists()){let s=r.data();e({userData:s,user:Object.assign(Object.assign({},t().user||{}),{role:s.role})})}});e({unsubscribeUserListener:u})}catch(t){console.error("Error fetching user data:",t),e({user:Object.assign(Object.assign({},s),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:r}=t();r&&(r(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:r}=t();if(r)try{let s=await (0,n.gL)(r.uid);e({userData:s,user:Object.assign(Object.assign({},t().user||{}),{role:null==s?void 0:s.role})}),setTimeout(async()=>{try{let s=await (0,n.gL)(r.uid);e({userData:s,user:Object.assign(Object.assign({},t().user||{}),{role:null==s?void 0:s.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{l.getState().initialize()},0)},95804:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(95155),a=r(12115),i=r(35317),n=r(25610),l=r(68084),d=r(14186),c=r(40646),o=r(29799),u=r(54861),m=r(37108),x=r(92657),g=r(53904),p=r(38564),h=r(91788),y=r(71366),b=r(19420),v=r(54416),f=r(69074),j=r(81586),w=r(4516),N=r(1978),D=r(60525);let k={pending:{icon:d.A,color:"text-yellow-600",bg:"bg-yellow-100"},confirmed:{icon:c.A,color:"text-blue-600",bg:"bg-blue-100"},shipped:{icon:o.A,color:"text-purple-600",bg:"bg-purple-100"},delivered:{icon:c.A,color:"text-green-600",bg:"bg-green-100"},cancelled:{icon:u.A,color:"text-red-600",bg:"bg-red-100"}};function A(){var e,t,r,d,c,A,C,O,S,E,T;let{user:U}=(0,l.useAuthStore)(),[I,R]=(0,a.useState)([]),[L,P]=(0,a.useState)(!0),[F,_]=(0,a.useState)("all"),[Y,q]=(0,a.useState)(null),[G,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!U){console.log("❌ No user found for orders"),P(!1);return}console.log("\uD83D\uDD0D Loading orders for user:",U.uid);let e=(0,i.query)((0,i.collection)(n.db,"orders"),(0,i.where)("userId","==",U.uid),(0,i.My)("createdAt","desc")),t=(0,i.onSnapshot)(e,e=>{console.log("\uD83D\uDCE6 Orders found:",e.docs.length);let t=e.docs.map(e=>{var t,r;let s=e.data();return{id:e.id,...s,createdAt:(null==(t=s.createdAt)?void 0:t.toDate)?s.createdAt:new Date(s.createdAt),updatedAt:(null==(r=s.updatedAt)?void 0:r.toDate)?s.updatedAt:new Date(s.updatedAt)}});console.log("\uD83D\uDCCB Orders loaded successfully:",t.length),R(t),P(!1)},e=>{console.error("❌ Error loading orders:",e),P(!1)});return()=>t()},[null==U?void 0:U.uid]);let z="all"===F?I:I.filter(e=>e.status===F),$=()=>{q(null),M(!1)},V=e=>{alert("\n\uD83D\uDE9A ORDER TRACKING DETAILS\n━━━━━━━━━━━━━━━━━━━━━━━━━━\n\uD83D\uDCE6 Order ID: #".concat(e.id.slice(-8).toUpperCase(),"\n\uD83D\uDCC5 Order Date: ").concat(new Date(e.createdAt.toDate()).toLocaleDateString(),"\n\uD83D\uDCB0 Order Total: $").concat((e.totalAmount||e.total||0).toFixed(2),"\n\uD83C\uDFF7️ Tracking Number: ").concat(e.trackingNumber||"GW".concat(Date.now().toString().slice(-8)),"\n\n\uD83D\uDCCD CURRENT STATUS: ").concat(e.status.toUpperCase().replace("_"," "),"\n").concat({pending:"\uD83D\uDCCB Your order has been placed and is awaiting confirmation from the seller.",confirmed:"✅ Your order has been confirmed by the seller and is being prepared.",processing:"\uD83D\uDCE6 Your order is being processed and packed for shipment.",shipped:"\uD83D\uDE9A Your order has been shipped and is on its way to you.",out_for_delivery:"\uD83D\uDE9B Your order is out for delivery and will arrive soon.",delivered:"\uD83D\uDCE6 Your order has been delivered successfully.",cancelled:"❌ Your order has been cancelled."}[e.status]||"Status update in progress...","\n\n⏱️ ESTIMATED DELIVERY: ").concat({pending:"1-2 business days",confirmed:"2-3 business days",processing:"1-2 business days",shipped:"3-5 business days",out_for_delivery:"Today",delivered:"Completed",cancelled:"N/A"}[e.status],"\n\n\uD83D\uDCF1 You will receive SMS/Email updates at each step\n\uD83D\uDD14 Turn on notifications for real-time updates\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━\n\uD83C\uDFEA Goryl Marketplace - Track Your Order\n    "))},B=async e=>{let t=I.find(t=>t.id===e);if(t&&confirm("Are you sure you want to cancel Order #".concat(e.slice(-8).toUpperCase(),"?\n\nThis action cannot be undone.")))try{let r=(0,i.doc)(n.db,"orders",e);await (0,i.mZ)(r,{status:"cancelled",updatedAt:new Date,timeline:[...t.timeline||[],{status:"cancelled",message:"Order cancelled by customer",timestamp:new Date}]}),alert("✅ Order cancelled successfully!")}catch(e){console.error("❌ Error cancelling order:",e),alert("❌ Failed to cancel order. Please try again.")}},W=async e=>{try{let t=await (0,D.Jq)(e);t.success&&(alert("\uD83D\uDCC4 Invoice Generated!\n\nInvoice Number: ".concat(t.invoice.invoiceNumber,"\nDownload will start shortly...")),console.log("\uD83D\uDCC4 Invoice ready for download:",t.invoice))}catch(e){alert("❌ Failed to generate invoice. Please try again.")}},Z=async e=>{let t=I.find(t=>t.id===e);if(!t||!U)return;let r=prompt("Rate this order (1-5 stars):"),s=prompt("Write a review (optional):");if(r&&parseInt(r)>=1&&5>=parseInt(r))try{var a;(await (0,D.h6)(e,(null==(a=t.items[0])?void 0:a.productId)||"unknown",parseInt(r),s||"",U.uid)).success&&alert("⭐ Thank you for your review!")}catch(e){alert("❌ Failed to submit review. Please try again.")}},J=async e=>{if(!I.find(t=>t.id===e))return;let t=prompt("Reason for return:");if(t)try{let r=await (0,D.UL)(e,t);r.success&&alert("\uD83D\uDD04 Return Request Submitted!\n\nReturn ID: ".concat(r.returnId,"\nWe will contact you within 24 hours."))}catch(e){alert("❌ Failed to initiate return. Please try again.")}};return L?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Orders"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track and manage your purchases"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-8",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"flex space-x-8 px-6",children:["all","pending","confirmed","shipped","delivered","cancelled"].map(e=>(0,s.jsxs)("button",{onClick:()=>_(e),className:"py-4 px-1 border-b-2 font-medium text-sm capitalize whitespace-nowrap ".concat(F===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e,(0,s.jsx)("span",{className:"ml-2 text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-1",children:"all"===e?I.length:I.filter(t=>t.status===e).length})]},e))})})}),0===z.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===F?"No orders yet":"No ".concat(F," orders")}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===F?"Start shopping to see your orders here!":"You don't have any ".concat(F," orders at the moment.")}),"all"===F&&(0,s.jsx)("button",{className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700",children:"Start Shopping"})]}):(0,s.jsx)("div",{className:"space-y-6",children:z.map((e,t)=>{var r,a;let i=k[e.status].icon;return(0,s.jsxs)(N.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",e.id.slice(-8).toUpperCase()]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ".concat(k[e.status].bg," ").concat(k[e.status].color),children:[(0,s.jsx)(i,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})]}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["Placed on ",new Date(e.createdAt.toDate()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",(e.totalAmount||e.total||0).toFixed(2)]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"card"===e.paymentMethod?"Card":"cod"===e.paymentMethod?"COD":(null==(r=e.payment)?void 0:r.method)==="online"?"Card":"COD"}),e.trackingNumber&&(0,s.jsxs)("p",{className:"text-xs text-purple-600 font-mono",children:["#",e.trackingNumber]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-4 mb-4",children:(0,s.jsx)("div",{className:"space-y-3",children:(null==(a=e.items)?void 0:a.map((e,t)=>{var r,a,i,n,l;return(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("img",{src:(null==(r=e.product)?void 0:r.image)||e.image||"/placeholder-product.jpg",alt:(null==(a=e.product)?void 0:a.title)||e.title||"Product",className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:e=>{e.target.src="/placeholder-product.jpg"}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:(null==(i=e.product)?void 0:i.title)||e.title||"Product"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Quantity: ",e.quantity]}),(null==(n=e.product)?void 0:n.price)&&(0,s.jsxs)("p",{className:"text-gray-500 dark:text-gray-500 text-xs",children:["$",e.product.price.toFixed(2)," each"]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",(((null==(l=e.product)?void 0:l.price)||e.price||0)*e.quantity).toFixed(2)]})})]},t)}))||(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Order details not available"})})}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{q(e),M(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"View Details"]}),("confirmed"===e.status||"shipped"===e.status||"delivered"===e.status)&&(0,s.jsxs)("button",{onClick:()=>V(e),className:"flex items-center bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 font-medium text-sm transition-colors",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Track Package"]}),("pending"===e.status||"confirmed"===e.status)&&(0,s.jsxs)("button",{onClick:()=>B(e.id),className:"flex items-center text-red-600 hover:text-red-700 font-medium text-sm border border-red-600 px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Cancel Order"]}),"delivered"===e.status&&(0,s.jsxs)("button",{onClick:()=>J(e.id),className:"flex items-center text-orange-600 hover:text-orange-700 font-medium text-sm border border-orange-600 px-4 py-2 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Return Item"]}),"delivered"===e.status&&(0,s.jsxs)("button",{onClick:()=>Z(e.id),className:"flex items-center text-yellow-600 hover:text-yellow-700 font-medium text-sm border border-yellow-600 px-4 py-2 rounded-lg hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Write Review"]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("button",{onClick:()=>W(e.id),className:"flex items-center border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 font-medium text-sm transition-colors",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Invoice"]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("button",{onClick:()=>(e=>{let t=I.find(t=>t.id===e);alert("\n\uD83D\uDCDE CUSTOMER SUPPORT\n━━━━━━━━━━━━━━━━━━\n\uD83D\uDCCB Order ID: #".concat(e.slice(-8).toUpperCase(),"\n\uD83D\uDCC5 Order Date: ").concat((null==t?void 0:t.createdAt)?new Date(t.createdAt.toDate()).toLocaleDateString():"N/A","\n\uD83D\uDCB0 Order Total: $").concat(((null==t?void 0:t.totalAmount)||(null==t?void 0:t.total)||0).toFixed(2),"\n\n\uD83D\uDCDE Phone: +1-800-GORYL-HELP\n\uD83D\uDCE7 Email: support@goryl.com\n\uD83D\uDCAC Live Chat: Available 24/7\n\uD83D\uDD52 Response Time: Within 2 hours\n\n━━━━━━━━━━━━━━━━━━\n\uD83C\uDFEA Goryl Customer Care\n    "))})(e.id),className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[(0,s.jsx)(y.A,{className:"w-4 h-4 mr-1"}),"Get Help"]}),(0,s.jsxs)("button",{onClick:()=>(e=>{let t=I.find(t=>t.id===e);if(t){var r;alert("\uD83D\uDED2 Reorder Feature\n\nAdding ".concat((null==(r=t.items)?void 0:r.length)||0," items to your cart...\n\nRedirecting to cart...")),setTimeout(()=>{window.location.href="/cart"},2e3)}})(e.id),className:"flex items-center text-green-600 hover:text-green-700 font-medium",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"Buy Again"]}),(0,s.jsxs)("button",{className:"flex items-center text-gray-600 hover:text-gray-700 font-medium",children:[(0,s.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Call Support"]})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Need help? Contact us 24/7"})]})]}),e.timeline&&e.timeline.length>0&&(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 mt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Order Timeline"}),(0,s.jsx)("div",{className:"space-y-2",children:e.timeline.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full mr-3"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[e.message," - ",new Date(e.timestamp.toDate()).toLocaleString()]})]},t))})]})]},e.id)})})]}),G&&Y&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Order Details"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Order #",Y.id.slice(-8).toUpperCase()]})]}),(0,s.jsx)("button",{onClick:$,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,s.jsx)(v.A,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Order Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ".concat(k[Y.status].bg," ").concat(k[Y.status].color),children:[a.createElement(k[Y.status].icon,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"capitalize",children:Y.status})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(f.A,{className:"w-4 h-4 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Order Date"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(Y.createdAt.toDate()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.A,{className:"w-4 h-4 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Payment Method"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"card"===Y.paymentMethod?"Credit Card":"cod"===Y.paymentMethod?"Cash on Delivery":"Online Payment"})]})]}),Y.trackingNumber&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Tracking Number"}),(0,s.jsx)("p",{className:"font-medium text-purple-600 dark:text-purple-400 font-mono",children:Y.trackingNumber})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(w.A,{className:"w-5 h-5 mr-2"}),"Shipping Address"]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[null==(e=Y.shippingAddress)?void 0:e.firstName," ",null==(t=Y.shippingAddress)?void 0:t.lastName]}),(null==(r=Y.shippingAddress)?void 0:r.company)&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:Y.shippingAddress.company}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:null==(d=Y.shippingAddress)?void 0:d.addressLine1}),(null==(c=Y.shippingAddress)?void 0:c.addressLine2)&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:Y.shippingAddress.addressLine2}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[null==(A=Y.shippingAddress)?void 0:A.city,", ",null==(C=Y.shippingAddress)?void 0:C.state," ",null==(O=Y.shippingAddress)?void 0:O.postalCode]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:null==(S=Y.shippingAddress)?void 0:S.country}),(null==(E=Y.shippingAddress)?void 0:E.phone)&&(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 flex items-center mt-2",children:[(0,s.jsx)(b.A,{className:"w-4 h-4 mr-2"}),Y.shippingAddress.phone]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Order Items"}),(0,s.jsx)("div",{className:"space-y-4",children:(null==(T=Y.items)?void 0:T.map((e,t)=>{var r,a,i,n,l;return(0,s.jsxs)("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,s.jsx)("img",{src:(null==(r=e.product)?void 0:r.image)||e.image||"/placeholder-product.jpg",alt:(null==(a=e.product)?void 0:a.title)||e.title||"Product",className:"w-20 h-20 object-cover rounded-lg",onError:e=>{e.target.src="/placeholder-product.jpg"}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white text-lg",children:(null==(i=e.product)?void 0:i.title)||e.title||"Product"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Quantity: ",e.quantity]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Price: $",((null==(n=e.product)?void 0:n.price)||e.price||0).toFixed(2)," each"]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",(((null==(l=e.product)?void 0:l.price)||e.price||0)*e.quantity).toFixed(2)]})})]},t)}))||(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No items found in this order"})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),(0,s.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["$",(Y.subtotal||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax:"}),(0,s.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["$",(Y.tax||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Shipping:"}),(0,s.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["$",(Y.shipping||5.99).toFixed(2)]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2 mt-2",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Total:"}),(0,s.jsxs)("span",{className:"text-gray-900 dark:text-white",children:["$",(Y.totalAmount||Y.total||0).toFixed(2)]})]})})]})]}),Y.timeline&&Y.timeline.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Order Timeline"}),(0,s.jsx)("div",{className:"space-y-4",children:Y.timeline.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.message}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(e.timestamp.toDate()).toLocaleString()})]})]},t))})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("button",{onClick:()=>V(Y),className:"flex items-center bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 font-medium text-sm transition-colors",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Track Order"]}),(0,s.jsxs)("button",{onClick:()=>W(Y.id),className:"flex items-center border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 font-medium text-sm transition-colors",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Download Invoice"]}),"delivered"===Y.status&&(0,s.jsxs)("button",{onClick:()=>Z(Y.id),className:"flex items-center text-yellow-600 hover:text-yellow-700 font-medium text-sm border border-yellow-600 px-4 py-2 rounded-lg hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Rate & Review"]}),("pending"===Y.status||"confirmed"===Y.status)&&(0,s.jsxs)("button",{onClick:()=>{B(Y.id),$()},className:"flex items-center text-red-600 hover:text-red-700 font-medium text-sm border border-red-600 px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Cancel Order"]})]})]})]})})]})}},95997:(e,t,r)=>{"use strict";r.d(t,{G6:()=>l,HW:()=>u,Hh:()=>c,Jv:()=>d,eT:()=>h,gL:()=>m,qc:()=>p,xw:()=>o});var s=r(16203),a=r(35317),i=r(25610);let n=new s.HF;n.addScope("email"),n.addScope("profile");let l=async()=>{var e;try{let t=(await (0,s.df)(i.j2,n)).user;if(!(await (0,a.x7)((0,a.doc)(i.db,"users",t.uid))).exists()){let r={id:t.uid,email:t.email||"",name:t.displayName||"Anonymous",username:(null==(e=t.email)?void 0:e.split("@")[0])||"user",avatar:t.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(i.db,"users",t.uid),r)}return t}catch(e){throw console.error("Google sign-in error:",e),e}},d=async(e,t)=>{try{return(await (0,s.x9)(i.j2,e,t)).user}catch(e){throw e}},c=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let l=(await (0,s.eJ)(i.j2,e,t)).user;await (0,s.r7)(l,{displayName:r});try{let t={id:l.uid,email:l.email||"",name:r,username:e.split("@")[0],avatar:l.photoURL||"",bio:"",role:n,accountType:n,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(i.db,"users",l.uid),t),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return l}catch(e){throw console.error("Signup error:",e),e}},o=async e=>{try{await (0,s.J1)(i.j2,e)}catch(e){throw e}},u=()=>i.j2.currentUser,m=async e=>{try{let t=await (0,a.x7)((0,a.doc)(i.db,"users",e));if(t.exists())return t.data();return null}catch(e){return console.error("Error getting user data:",e),null}},x=async e=>{try{let t=await m(e);return(null==t?void 0:t.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},g=async e=>{try{let t=await m(e);return(null==t?void 0:t.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},p=async e=>"admin"===await x(e),h=async e=>["personal_seller","brand","company"].includes(await g(e))}},e=>{e.O(0,[2992,9507,1794,6899,8599,7194,637,3690,8441,5964,7358],()=>e(e.s=25883)),_N_E=e.O()}]);