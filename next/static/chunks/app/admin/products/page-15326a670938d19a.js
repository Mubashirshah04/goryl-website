(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,7575],{8813:(e,t,r)=>{"use strict";r.d(t,{I_:()=>u,TV:()=>p,createProduct:()=>i,d$:()=>d,deleteProduct:()=>n,oo:()=>c,updateProduct:()=>o,vC:()=>h});var s=r(35317),a=r(25610),l=r(95997);let i=async e=>{try{if(!await (0,l.eT)(e.sellerId))throw Error("Only approved sellers can create products");let t={id:e.sellerId,name:e.sellerName||"",type:"personal"};try{let r=await (0,s.x7)((0,s.doc)(a.db,"users",e.sellerId));if(r.exists()){let s=r.data();t={id:s.id||e.sellerId,name:s.name||e.sellerName||"",type:s.sellerType||s.role||"personal"}}}catch(e){console.warn("Could not fetch seller info for product creation:",e)}return(await (0,s.addDoc)((0,s.collection)(a.db,"products"),Object.assign(Object.assign({},e),{seller:t,sellerRef:{id:t.id,name:t.name,photoURL:""},likes:[],views:0,rating:0,reviewCount:0,comments:0,status:"active",createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()}))).id}catch(e){throw console.error("Error creating product:",e),e}},c=async e=>{try{let t=(0,s.doc)(a.db,"products",e),r=await (0,s.x7)(t);if(r.exists()){let e=Object.assign({id:r.id},r.data());if(e.sellerId)try{let t=await (0,s.x7)((0,s.doc)(a.db,"users",e.sellerId));if(t.exists()){let r=t.data();e.seller={id:r.id,name:r.name,avatar:r.avatar,isVerified:r.isVerified,rating:r.rating}}}catch(e){console.warn("Could not fetch seller information:",e)}return e}return null}catch(e){throw console.error("Error getting product:",e),e}},o=async(e,t)=>{try{let r=(0,s.doc)(a.db,"products",e);await (0,s.mZ)(r,Object.assign(Object.assign({},t),{updatedAt:(0,s.serverTimestamp)()}))}catch(e){throw console.error("Error updating product:",e),e}},n=async e=>{try{let t=(0,s.doc)(a.db,"products",e);await (0,s.kd)(t)}catch(e){throw console.error("Error deleting product:",e),e}},d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"createdAt",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;try{let i=(0,s.collection)(a.db,"products"),c=[];e.category&&c.push({field:"category",operator:"==",value:e.category}),e.sellerId&&c.push({field:"sellerId",operator:"==",value:e.sellerId}),e.status?c.push({field:"status",operator:"==",value:e.status}):c.push({field:"status",operator:"==",value:"active"}),void 0!==e.minPrice&&c.push({field:"price",operator:">=",value:e.minPrice}),void 0!==e.maxPrice&&c.push({field:"price",operator:"<=",value:e.maxPrice}),c.forEach(e=>{i=(0,s.query)(i,(0,s.where)(e.field,e.operator,e.value))}),i=(0,s.query)(i,(0,s.My)(t,r)),i=(0,s.query)(i,(0,s.AB)(l));let o=(await (0,s.getDocs)(i)).docs.map(e=>Object.assign({id:e.id},e.data()));if(e.search){let t=e.search.toLowerCase();o=o.filter(e=>{var r;return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null==(r=e.brand)?void 0:r.toLowerCase().includes(t))})}let n=[...new Set(o.map(e=>e.sellerId))],d=new Map;for(let e of n)try{let t=await (0,s.x7)((0,s.doc)(a.db,"users",e));t.exists()&&d.set(e,t.data())}catch(t){console.warn("Could not fetch seller ".concat(e,":"),t)}return o.map(e=>{let t=d.get(e.sellerId);return t&&(e.seller={id:t.id,name:t.name,avatar:t.avatar,isVerified:t.isVerified,rating:t.rating}),e})}catch(e){return console.log("Firebase products not accessible, returning empty array"),[]}},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"createdAt",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",i=(0,s.collection)(a.db,"products"),c=[];return t.category&&c.push({field:"category",operator:"==",value:t.category}),t.sellerId&&c.push({field:"sellerId",operator:"==",value:t.sellerId}),t.status&&c.push({field:"status",operator:"==",value:t.status}),void 0!==t.minPrice&&c.push({field:"price",operator:">=",value:t.minPrice}),void 0!==t.maxPrice&&c.push({field:"price",operator:"<=",value:t.maxPrice}),c.forEach(e=>{i=(0,s.query)(i,(0,s.where)(e.field,e.operator,e.value))}),i=(0,s.query)(i,(0,s.My)(r,l)),(0,s.onSnapshot)(i,async r=>{console.log("Products found:",r.docs.length);let l=r.docs.map(e=>Object.assign({id:e.id},e.data()));if(t.search){let e=t.search.toLowerCase();l=l.filter(t=>{var r;return t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||(null==(r=t.brand)?void 0:r.toLowerCase().includes(e))})}let i=[...new Set(l.map(e=>e.sellerId))],c=new Map;for(let e of i)try{let t=await (0,s.x7)((0,s.doc)(a.db,"users",e));t.exists()&&c.set(e,t.data())}catch(t){console.warn("Could not fetch seller ".concat(e,":"),t)}e(l.map(e=>{let t=c.get(e.sellerId);return t&&(e.seller={id:t.id,name:t.name,avatar:t.avatar,isVerified:t.isVerified,rating:t.rating}),e}))},t=>{console.error("Firestore error:",t.message),e([])})},h=async(e,t)=>{try{let r=await c(e);if(!r)throw Error("Product not found");let s=r.likes||[];s.includes(t)?await o(e,{likes:s.filter(e=>e!==t)}):await o(e,{likes:[...s,t]})}catch(e){throw console.error("Error toggling product like:",e),e}},p=async e=>d({sellerId:e})},9589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(95155),a=r(12115),l=r(1978),i=r(60760),c=r(91788),o=r(84616),n=r(37108),d=r(14186),u=r(33109),h=r(92657),p=r(66474),m=r(40646),x=r(54861),w=r(38564),b=r(62525),g=r(27213),v=r(56671),y=r(27372),f=r(51362),j=r(8813);function N(){var e,t,N,k,A,C;let[P,S]=(0,a.useState)([]),[T,I]=(0,a.useState)([]),[L,E]=(0,a.useState)(""),[M,U]=(0,a.useState)("all"),[R,D]=(0,a.useState)("all"),[V,O]=(0,a.useState)("all"),[H,F]=(0,a.useState)(null),[q,z]=(0,a.useState)(!1),[_,B]=(0,a.useState)(!1),[J,W]=(0,a.useState)(!1),[K,G]=(0,a.useState)({title:"",category:"",price:0,stock:0,description:"",images:[],tags:[],sellerId:"",sellerName:""}),{theme:Z,setTheme:$}=(0,f.D)();(0,a.useEffect)(()=>{let e=(0,j.I_)(e=>{console.log("\uD83D\uDD04 Admin real-time products update:",e.length,"products"),S(e),I(e)});return()=>{e&&e()}},[]),(0,a.useEffect)(()=>{let e=[...P];if(L){let t=L.toLowerCase();e=e.filter(e=>{var r;return e.title.toLowerCase().includes(t)||(null==(r=e.seller)?void 0:r.name.toLowerCase().includes(t))||e.category.toLowerCase().includes(t)})}"all"!==M&&(e=e.filter(e=>e.category===M)),"all"!==V&&(e=e.filter(e=>e.status===V)),I(e)},[P,L,M,V]);let Q=async(e,t)=>{W(!0);try{let{updateProduct:s,deleteProduct:a}=await Promise.resolve().then(r.bind(r,8813));if("delete"===t)await a(e),S(t=>t.filter(t=>t.id!==e)),v.oR.success("Product deleted successfully");else{let r="active";"deactivate"===t&&(r="inactive"),"draft"===t&&(r="draft"),"activate"===t&&(r="active"),await s(e,{status:r}),S(t=>t.map(t=>t.id===e?{...t,status:r}:t)),v.oR.success("Product status updated to ".concat(r))}}catch(e){console.error("Failed to update product:",e),v.oR.error("Failed to ".concat(t," product"))}finally{W(!1)}},X=async()=>{W(!0);try{let{createProduct:e}=await Promise.resolve().then(r.bind(r,8813)),t={title:K.title,description:K.description,price:K.price,stock:K.stock,images:K.images,category:K.category,tags:K.tags,sellerId:K.sellerId,seller:{id:K.sellerId,name:K.sellerName,isVerified:!1,rating:0},sellerName:K.sellerName,currency:"USD",isActive:!0,isFeatured:!1,isTrending:!1,isOnSale:!1,rating:0,likes:[],views:0,reviewCount:0,status:"active"};await e(t),v.oR.success("Product created successfully"),B(!1),G({title:"",category:"",price:0,stock:0,description:"",images:[],tags:[],sellerId:"",sellerName:""})}catch(e){console.error("Failed to create product:",e),v.oR.error("Failed to create product")}finally{W(!1)}},Y=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),ee=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e),et=Array.from(new Set(P.map(e=>e.category).filter(Boolean)));return(0,s.jsx)(f.N,{attribute:"class",children:(0,s.jsx)(y.A,{title:"Product Management",subtitle:"Manage product listings and approvals",searchPlaceholder:"Search products by name, seller, or category...",onSearch:e=>{E(e)},actions:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{let e=new Blob([T.map(e=>{var t,r;return[e.title,e.category,e.price,e.stock,null!=(r=null==(t=e.seller)?void 0:t.name)?r:""].join(",")}).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="products.csv",r.click(),URL.revokeObjectURL(t),v.oR.success("Products exported!")},className:"bg-white/10 text-white px-4 py-2 rounded-xl font-bold hover:bg-white/20 transition-all duration-300 border border-white/20 flex items-center space-x-2",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Export"})]}),(0,s.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(!0),className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-4 py-2 rounded-xl font-bold hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-lg flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add Product"})]}),(0,s.jsx)("button",{onClick:()=>$("dark"===Z?"light":"dark"),className:"bg-white/10 text-white px-3 py-2 rounded-xl font-bold border border-white/20 ml-2",title:"dark"===Z?"Switch to Light Mode":"Switch to Dark Mode",children:"dark"===Z?"\uD83C\uDF19":"☀️"})]}),children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-200",children:"Total Products"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:P.length})]}),(0,s.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-2xl border border-blue-500/30",children:(0,s.jsx)(n.A,{className:"w-8 h-8 text-blue-400"})})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-200",children:"Pending Review"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:P.filter(e=>"inactive"===e.status).length})]}),(0,s.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-2xl border border-yellow-500/30",children:(0,s.jsx)(d.A,{className:"w-8 h-8 text-yellow-400"})})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-200",children:"Total Sales"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:P.length})]}),(0,s.jsx)("div",{className:"p-3 bg-green-500/20 rounded-2xl border border-green-500/30",children:(0,s.jsx)(u.A,{className:"w-8 h-8 text-green-400"})})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-200",children:"Total Views"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:P.reduce((e,t)=>e+(t.views||0),0).toLocaleString()})]}),(0,s.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-2xl border border-purple-500/30",children:(0,s.jsx)(h.A,{className:"w-8 h-8 text-purple-400"})})]})})]}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-2xl",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-6",children:[(0,s.jsx)("div",{className:"flex space-x-1 bg-white/10 rounded-xl p-1",children:["all","active","inactive","draft"].map(e=>(0,s.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ".concat(V===e?"bg-purple-500 text-white shadow-lg":"text-purple-200 hover:text-white hover:bg-white/10"),children:[e.charAt(0).toUpperCase()+e.slice(1),(0,s.jsx)("span",{className:"ml-2 bg-white/20 px-2 py-0.5 rounded-full text-xs",children:"all"===e?P.length:P.filter(t=>t.status===e).length})]},e))}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:M,onChange:e=>U(e.target.value),className:"bg-white/10 border border-white/20 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 appearance-none pr-10",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),et.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},e+"-"+t))]}),(0,s.jsx)(p.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-purple-300 pointer-events-none"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:R,onChange:e=>D(e.target.value),className:"bg-white/10 border border-white/20 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 appearance-none pr-10",children:[(0,s.jsx)("option",{value:"all",children:"All Sellers"}),["personal","brand","company"].map(e=>(0,s.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,s.jsx)(p.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-purple-300 pointer-events-none"})]})]})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-white/20",children:[(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Product"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Seller"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Category"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Price"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Performance"}),(0,s.jsx)("th",{className:"text-left p-6 text-purple-200 font-semibold",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:T.map((e,t)=>{var r;return(0,s.jsxs)(l.P.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7+.1*t},className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-fuchsia-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-semibold",children:e.title}),(0,s.jsxs)("p",{className:"text-purple-200 text-sm",children:[e.stock," in stock"]})]})]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsx)("div",{children:(()=>{var t;let r=null!=(t=e.seller)?t:{name:"Unknown",type:"personal"};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-white font-medium",children:r.name}),(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border bg-purple-500/20 text-purple-400 border-purple-500/30",children:"Personal"})]})})()})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsx)("span",{className:"text-purple-200",children:e.category})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-semibold",children:Y(e.price)}),!1]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ".concat((e=>{switch(e){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"draft":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}})(null!=(r=e.status)?r:"inactive")),children:["active"===e.status&&(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"inactive"===e.status&&(0,s.jsx)(x.A,{className:"w-3 h-3 mr-1"}),"draft"===e.status&&(0,s.jsx)(d.A,{className:"w-3 h-3 mr-1"}),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 text-purple-300"}),(0,s.jsx)("span",{className:"text-white text-sm",children:("number"==typeof e.views?e.views:0).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 text-green-300"}),(0,s.jsx)("span",{className:"text-white text-sm",children:"0 sales"})]}),e.rating>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(w.A,{className:"w-4 h-4 text-yellow-300"}),(0,s.jsxs)("span",{className:"text-white text-sm",children:[e.rating," (",e.reviewCount,")"]})]})]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{F(e),z(!0)},className:"p-2 bg-blue-500/20 rounded-xl hover:bg-blue-500/30 transition-colors border border-blue-500/30",title:"Preview Product",children:(0,s.jsx)(h.A,{className:"w-4 h-4 text-blue-400"})}),"inactive"===e.status&&(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{var t;return Q(null!=(t=e.id)?t:"","activate")},disabled:J,className:"p-2 bg-green-500/20 rounded-xl hover:bg-green-500/30 transition-colors border border-green-500/30",title:"Activate Product",children:(0,s.jsx)(m.A,{className:"w-4 h-4 text-green-400"})}),"active"===e.status&&(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{var t;return Q(null!=(t=e.id)?t:"","deactivate")},disabled:J,className:"p-2 bg-red-500/20 rounded-xl hover:bg-red-500/30 transition-colors border border-red-500/30",title:"Deactivate Product",children:(0,s.jsx)(x.A,{className:"w-4 h-4 text-red-400"})}),"draft"===e.status&&(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{var t;return Q(null!=(t=e.id)?t:"","activate")},disabled:J,className:"p-2 bg-green-500/20 rounded-xl hover:bg-green-500/30 transition-colors border border-green-500/30",title:"Publish Product",children:(0,s.jsx)(m.A,{className:"w-4 h-4 text-green-400"})}),(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{var t;return Q(null!=(t=e.id)?t:"","delete")},disabled:J,className:"p-2 bg-red-500/20 rounded-xl hover:bg-red-500/30 transition-colors border border-red-500/30",title:"Delete Product",children:(0,s.jsx)(b.A,{className:"w-4 h-4 text-red-400"})})]})})]},e.id)})})]})})}),(0,s.jsx)(i.N,{children:q&&H&&(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>z(!1),children:(0,s.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Product Preview"}),(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>z(!1),className:"p-2 bg-white/10 rounded-xl hover:bg-white/20 transition-colors",children:(0,s.jsx)(x.A,{className:"w-6 h-6 text-white"})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Product Images"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:null==H||null==(e=H.images)?void 0:e.map((e,t)=>(0,s.jsx)("div",{className:"aspect-square bg-gradient-to-br from-purple-500/20 to-fuchsia-500/20 rounded-xl flex items-center justify-center border border-white/20",children:(0,s.jsx)(g.A,{className:"w-8 h-8 text-purple-300"})},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Product Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Name"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:null!=(N=null==H?void 0:H.title)?N:""})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Category"}),(0,s.jsx)("p",{className:"text-white",children:null!=(k=null==H?void 0:H.category)?k:""})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Price"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:(null==H?void 0:H.price)!==void 0?Y(H.price):""})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Stock"}),(0,s.jsxs)("p",{className:"text-white",children:[null!=(A=null==H?void 0:H.stock)?A:""," units"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Tags"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:null==H||null==(t=H.tags)?void 0:t.map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 rounded-lg text-xs",children:e},t))})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Performance"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-purple-200",children:"Views"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:(null==H?void 0:H.views)!==void 0?H.views.toLocaleString():""})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-purple-200",children:"Sales"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"N/A"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-purple-200",children:"Rating"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:(null==H?void 0:H.rating)&&H.rating>0?"".concat(H.rating,"/5 (").concat(H.reviewCount," reviews)"):"No reviews"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-purple-200",children:"Created"}),(0,s.jsx)("span",{className:"text-white",children:(null==H?void 0:H.createdAt)?ee(H.createdAt):""})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-purple-200",children:"Updated"}),(0,s.jsx)("span",{className:"text-white",children:(null==H?void 0:H.updatedAt)?ee(H.updatedAt):""})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Description"}),(0,s.jsx)("p",{className:"text-purple-200 leading-relaxed",children:null!=(C=null==H?void 0:H.description)?C:""})]})]})]})})}),(0,s.jsx)(i.N,{children:_&&(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>B(!1),children:(0,s.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl w-full max-w-xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/20 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Add Product"}),(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>B(!1),className:"p-2 bg-white/10 rounded-xl hover:bg-white/20 transition-colors",children:(0,s.jsx)(x.A,{className:"w-6 h-6 text-white"})})]}),(0,s.jsxs)("form",{className:"p-6 space-y-4",onSubmit:e=>{e.preventDefault(),X()},children:[(0,s.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Product Name",value:K.title,onChange:e=>G(t=>({...t,title:e.target.value})),required:!0}),(0,s.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Category",value:K.category,onChange:e=>G(t=>({...t,category:e.target.value})),required:!0}),(0,s.jsx)("input",{type:"number",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Price",value:K.price,onChange:e=>G(t=>({...t,price:Number(e.target.value)})),required:!0}),(0,s.jsx)("input",{type:"number",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Stock",value:K.stock,onChange:e=>G(t=>({...t,stock:Number(e.target.value)})),required:!0}),(0,s.jsx)("textarea",{className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Description",value:K.description,onChange:e=>G(t=>({...t,description:e.target.value})),required:!0}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*",className:"w-full p-2 rounded bg-white/10 text-white",onChange:async e=>{let t=Array.from(e.target.files||[]),r=await Promise.all(t.map(async e=>URL.createObjectURL(e)));G(e=>({...e,images:r}))}}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:K.images&&K.images.map((e,t)=>(0,s.jsx)("img",{src:e,alt:"Product ".concat(t),className:"w-16 h-16 object-cover rounded"},t))}),(0,s.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Seller ID",value:K.sellerId,onChange:e=>G(t=>({...t,sellerId:e.target.value})),required:!0}),(0,s.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-white/10 text-white",placeholder:"Seller Name",value:K.sellerName,onChange:e=>G(t=>({...t,sellerName:e.target.value})),required:!0}),(0,s.jsx)("button",{type:"submit",className:"w-full py-2 rounded bg-purple-500 text-white font-bold hover:bg-purple-600 transition",children:J?"Creating...":"Create Product"})]})]})})})]})})})}},14186:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},25610:(e,t,r)=>{"use strict";r.d(t,{db:()=>h,j2:()=>u,storage:()=>p});var s=r(23915),a=r(16203),l=r(35317),i=r(90858),c=r(92144),o=r(81115),n=r(86864);let d=(0,s.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,a.xI)(d),h=(0,l.aU)(d);(0,o.C3)(d);let p=(0,i.c7)(d);(0,c.Uz)(d);try{(0,n.TT)().then(e=>{e?((0,n.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},27213:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},28061:(e,t,r)=>{Promise.resolve().then(r.bind(r,9589))},33109:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},40646:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51362:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,N:()=>d});var s=r(12115),a=(e,t,r,s,a,l,i,c)=>{let o=document.documentElement,n=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,s=r&&l?a.map(e=>l[e]||e):a;r?(o.classList.remove(...s),o.classList.add(l&&l[t]?l[t]:t)):o.setAttribute(e,t)}),r=t,c&&n.includes(r)&&(o.style.colorScheme=r)}if(s)d(s);else try{let e=localStorage.getItem(t)||r,s=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(s)}catch(e){}},l=["light","dark"],i="(prefers-color-scheme: dark)",c=s.createContext(void 0),o={setTheme:e=>{},themes:[]},n=()=>{var e;return null!=(e=s.useContext(c))?e:o},d=e=>s.useContext(c)?s.createElement(s.Fragment,null,e.children):s.createElement(h,{...e}),u=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:a=!0,enableColorScheme:o=!0,storageKey:n="theme",themes:d=u,defaultTheme:h=a?"system":"light",attribute:b="data-theme",value:g,children:v,nonce:y,scriptProps:f}=e,[j,N]=s.useState(()=>m(n,h)),[k,A]=s.useState(()=>"system"===j?w():j),C=g?Object.values(g):d,P=s.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=w());let s=g?g[t]:t,i=r?x(y):null,c=document.documentElement,n=e=>{"class"===e?(c.classList.remove(...C),s&&c.classList.add(s)):e.startsWith("data-")&&(s?c.setAttribute(e,s):c.removeAttribute(e))};if(Array.isArray(b)?b.forEach(n):n(b),o){let e=l.includes(h)?h:null,r=l.includes(t)?t:e;c.style.colorScheme=r}null==i||i()},[y]),S=s.useCallback(e=>{let t="function"==typeof e?e(j):e;N(t);try{localStorage.setItem(n,t)}catch(e){}},[j]),T=s.useCallback(e=>{A(w(e)),"system"===j&&a&&!t&&P("system")},[j,t]);s.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(T),T(e),()=>e.removeListener(T)},[T]),s.useEffect(()=>{let e=e=>{e.key===n&&(e.newValue?N(e.newValue):S(h))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[S]),s.useEffect(()=>{P(null!=t?t:j)},[t,j]);let I=s.useMemo(()=>({theme:j,setTheme:S,forcedTheme:t,resolvedTheme:"system"===j?k:j,themes:a?[...d,"system"]:d,systemTheme:a?k:void 0}),[j,S,t,k,a,d]);return s.createElement(c.Provider,{value:I},s.createElement(p,{forcedTheme:t,storageKey:n,attribute:b,enableSystem:a,enableColorScheme:o,defaultTheme:h,value:g,themes:d,nonce:y,scriptProps:f}),v)},p=s.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:l,enableSystem:i,enableColorScheme:c,defaultTheme:o,value:n,themes:d,nonce:u,scriptProps:h}=e,p=JSON.stringify([l,r,o,t,d,n,i,c]).slice(1,-1);return s.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(p,")")}})}),m=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},x=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},w=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")},54861:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},62525:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},84616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},91788:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},92657:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95997:(e,t,r)=>{"use strict";r.d(t,{G6:()=>c,HW:()=>u,Hh:()=>n,Jv:()=>o,eT:()=>w,gL:()=>h,qc:()=>x,xw:()=>d});var s=r(16203),a=r(35317),l=r(25610);let i=new s.HF;i.addScope("email"),i.addScope("profile");let c=async()=>{var e;try{let t=(await (0,s.df)(l.j2,i)).user;if(!(await (0,a.x7)((0,a.doc)(l.db,"users",t.uid))).exists()){let r={id:t.uid,email:t.email||"",name:t.displayName||"Anonymous",username:(null==(e=t.email)?void 0:e.split("@")[0])||"user",avatar:t.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(l.db,"users",t.uid),r)}return t}catch(e){throw console.error("Google sign-in error:",e),e}},o=async(e,t)=>{try{return(await (0,s.x9)(l.j2,e,t)).user}catch(e){throw e}},n=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let c=(await (0,s.eJ)(l.j2,e,t)).user;await (0,s.r7)(c,{displayName:r});try{let t={id:c.uid,email:c.email||"",name:r,username:e.split("@")[0],avatar:c.photoURL||"",bio:"",role:i,accountType:i,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(l.db,"users",c.uid),t),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return c}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,s.J1)(l.j2,e)}catch(e){throw e}},u=()=>l.j2.currentUser,h=async e=>{try{let t=await (0,a.x7)((0,a.doc)(l.db,"users",e));if(t.exists())return t.data();return null}catch(e){return console.error("Error getting user data:",e),null}},p=async e=>{try{let t=await h(e);return(null==t?void 0:t.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},m=async e=>{try{let t=await h(e);return(null==t?void 0:t.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},x=async e=>"admin"===await p(e),w=async e=>["personal_seller","brand","company"].includes(await m(e))}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,4511,7372,8441,5964,7358],()=>e(e.s=28061)),_N_E=e.O()}]);