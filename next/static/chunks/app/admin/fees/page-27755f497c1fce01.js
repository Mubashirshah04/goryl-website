(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378,5610],{2782:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(95155),s=r(12115),c=r(1978),l=r(84616),n=r(55868),i=r(34869),o=r(13717),d=r(54416),u=r(40646),p=r(62525),x=r(4229),m=r(35317),y=r(25610);r(47439);let h={FEES:"fees"},g={async getFeeStructure(e){try{let t=(0,m.query)((0,m.collection)(y.db,h.FEES),(0,m.where)("country","==",e),(0,m.where)("isActive","==",!0)),r=await (0,m.getDocs)(t);if(!r.empty){let e=r.docs[0];return Object.assign({id:e.id},e.data())}return null}catch(e){throw console.error("Error getting fee structure:",e),e}},async getAllFeeStructures(){try{let e=(0,m.query)((0,m.collection)(y.db,h.FEES),(0,m.My)("country","asc"));return(await (0,m.getDocs)(e)).docs.map(e=>Object.assign({id:e.id},e.data()))}catch(e){throw console.error("Error getting all fee structures:",e),e}},async createFeeStructure(e){try{return(await (0,m.addDoc)((0,m.collection)(y.db,h.FEES),Object.assign(Object.assign({},e),{createdAt:new Date,updatedAt:new Date}))).id}catch(e){throw console.error("Error creating fee structure:",e),e}},async updateFeeStructure(e,t){try{let r=(0,m.doc)(y.db,h.FEES,e);await (0,m.mZ)(r,Object.assign(Object.assign({},t),{updatedAt:new Date}))}catch(e){throw console.error("Error updating fee structure:",e),e}},async deleteFeeStructure(e){try{let t=(0,m.doc)(y.db,h.FEES,e);await (0,m.kd)(t)}catch(e){throw console.error("Error deleting fee structure:",e),e}}};var f=r(56671);function b(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)(!0),[y,h]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[v,w]=(0,s.useState)({country:"",currency:"",companyFee:0,brandFee:0,personalFee:0,feeType:"one_time",trialPeriod:30,isActive:!0});(0,s.useEffect)(()=>{N()},[]);let N=async()=>{try{m(!0);let e=await g.getAllFeeStructures();t(e)}catch(e){console.error("Error loading fees:",e),f.oR.error("Failed to load fee structures")}finally{m(!1)}},F=(e,t)=>{w(r=>({...r,[e]:t}))},A=()=>{w({country:"",currency:"",companyFee:0,brandFee:0,personalFee:0,feeType:"one_time",trialPeriod:30,isActive:!0}),j(null)},k=async e=>{e.preventDefault();try{b?(await g.updateFeeStructure(b.id,v),f.oR.success("Fee structure updated successfully")):(await g.createFeeStructure(v),f.oR.success("Fee structure created successfully")),N(),h(!1),A()}catch(e){console.error("Error saving fee structure:",e),f.oR.error("Failed to save fee structure")}},S=async e=>{if(confirm("Are you sure you want to delete this fee structure?"))try{await g.deleteFeeStructure(e),f.oR.success("Fee structure deleted successfully"),N()}catch(e){console.error("Error deleting fee structure:",e),f.oR.error("Failed to delete fee structure")}},E=async e=>{try{await g.updateFeeStructure(e.id,{isActive:!e.isActive}),f.oR.success("Fee structure ".concat(e.isActive?"deactivated":"activated"," successfully")),N()}catch(e){console.error("Error toggling fee structure:",e),f.oR.error("Failed to update fee structure")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fee Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage fee structures for different countries"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("button",{onClick:()=>{A(),h(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Add New Fee Structure"]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:r?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading fee structures..."})]}):0===e.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(n.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No fee structures found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create your first fee structure to get started."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company Fee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand Fee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Personal Fee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)(c.P.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.country})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.currency}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currency," ",e.companyFee.toLocaleString()]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currency," ",e.brandFee.toLocaleString()]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currency," ",e.personalFee.toLocaleString()]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:e.feeType.replace("_"," ")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{j(e),w({country:e.country,currency:e.currency,companyFee:e.companyFee,brandFee:e.brandFee,personalFee:e.personalFee,feeType:e.feeType,trialPeriod:e.trialPeriod||30,isActive:e.isActive}),h(!0)},className:"text-purple-600 hover:text-purple-900 mr-3",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>E(e),className:"mr-3 ".concat(e.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),children:e.isActive?(0,a.jsx)(d.A,{className:"w-4 h-4"}):(0,a.jsx)(u.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>S(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})})]})]},e.id))})]})})})]}),y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(c.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:b?"Edit Fee Structure":"Add New Fee Structure"}),(0,a.jsx)("button",{onClick:()=>{h(!1),A()},className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})})]})}),(0,a.jsxs)("form",{onSubmit:k,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Country ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:v.country,onChange:e=>F("country",e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Pakistan"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Currency ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:v.currency,onChange:e=>F("currency",e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., PKR"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Fee ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:v.companyFee,onChange:e=>F("companyFee",parseInt(e.target.value)),required:!0,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brand Fee ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:v.brandFee,onChange:e=>F("brandFee",parseInt(e.target.value)),required:!0,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Personal Fee ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:v.personalFee,onChange:e=>F("personalFee",parseInt(e.target.value)),required:!0,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fee Type ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:v.feeType,onChange:e=>F("feeType",e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"one_time",children:"One Time"}),(0,a.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trial Period (days)"}),(0,a.jsx)("input",{type:"number",value:v.trialPeriod,onChange:e=>F("trialPeriod",parseInt(e.target.value)),min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"30"})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.isActive,onChange:e=>F("isActive",e.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{h(!1),A()},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),b?"Update":"Create"]})]})]})]})})]})}},3948:(e,t,r)=>{Promise.resolve().then(r.bind(r,2782))},4229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},13717:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},25610:(e,t,r)=>{"use strict";r.d(t,{db:()=>p,j2:()=>u,storage:()=>x});var a=r(23915),s=r(16203),c=r(35317),l=r(90858),n=r(92144),i=r(81115),o=r(86864);let d=(0,a.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,s.xI)(d),p=(0,c.aU)(d);(0,i.C3)(d);let x=(0,l.c7)(d);(0,n.Uz)(d);try{(0,o.TT)().then(e=>{e?((0,o.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},34869:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},40646:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},47439:(e,t,r)=>{"use strict";r.d(t,{QM:()=>c,V6:()=>l,nJ:()=>n});var a=r(25610),s=r(90858);let c=async(e,t,r)=>{console.log("=== FIREBASE UPLOAD DEBUG START ==="),console.log("Starting file upload..."),console.log("File:",e.name,"Size:",e.size,"Type:",e.type),console.log("Upload path:",t),console.log("Firebase storage initialized:",!!a.storage),console.log("=========================");try{if(!a.storage)throw Error("Firebase storage not initialized");let c=(0,s.ref)(a.storage,t),l=(0,s.bp)(c,e);return new Promise((a,c)=>{l.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Firebase upload error:",e),c(e)},async()=>{try{let r=await (0,s.getDownloadURL)(l.snapshot.ref);console.log("File available at",r),a({url:r,path:t,name:e.name})}catch(e){console.error("Error getting download URL:",e),c(e)}})})}catch(r){return console.error("Error uploading file:",r),console.error("Full error details:",JSON.stringify(r,null,2)),{url:"https://via.placeholder.com/400x400/6366f1/ffffff?text=".concat(encodeURIComponent(e.name)),path:t,name:e.name}}},l=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"products",a=arguments.length>3?arguments[3]:void 0,s=Date.now(),l="".concat(s,"_").concat(e.name);return c(e,"".concat(r,"/").concat(t,"/").concat(l),a)},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0xa00000,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["image/jpeg","image/png","image/webp","video/mp4","video/mov"];return e.size>t?{valid:!1,error:"File size must be less than ".concat(Math.round(t/1024/1024),"MB")}:r.includes(e.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Allowed types: ".concat(r.join(", "))}}},54416:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},62525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},84616:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,8441,5964,7358],()=>e(e.s=3948)),_N_E=e.O()}]);