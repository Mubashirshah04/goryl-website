(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4530],{14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35914:(e,t,s)=>{Promise.resolve().then(s.bind(s,41188))},40646:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},41188:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(95155),r=s(12115),l=s(91788),c=s(66932),i=s(47863),d=s(66474),n=s(57434),o=s(40646),x=s(54416),m=s(14186),p=s(71007),h=s(92657),u=s(27372),g=s(90389);function y(){let[e,t]=(0,r.useState)([]),[s,y]=(0,r.useState)(!0),[j,N]=(0,r.useState)({actor:"",action:"",targetType:"",dateFrom:void 0,dateTo:void 0,search:""}),[v,b]=(0,r.useState)(!1),[f,A]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=(0,g.Em)(j,e=>{t(e),y(!1)});return()=>e()},[j]);let w=(e,t)=>{N(s=>({...s,[e]:t}))},T=e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e),E=(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{let t=new Blob([[["Timestamp","Actor","Action","Target Type","Target ID","IP Address","User Agent"],...e.map(e=>[T(e.timestamp),e.actorName,e.action,e.targetType,e.targetId,e.ip,e.userAgent])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="audit-logs-".concat(new Date().toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(s)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2 inline"}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>b(!v),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2 inline"}),"Filters",v?(0,a.jsx)(i.A,{className:"w-4 h-4 ml-2 inline"}):(0,a.jsx)(d.A,{className:"w-4 h-4 ml-2 inline"})]})]});return(0,a.jsx)(u.A,{title:"Audit Log",subtitle:"Track all platform activities and changes",searchPlaceholder:"Search audit logs by actor or action...",onSearch:e=>{N(t=>({...t,search:e}))},actions:E,children:(0,a.jsxs)("div",{className:"space-y-6",children:[v&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Type"}),(0,a.jsxs)("select",{value:j.action,onChange:e=>w("action",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-black",children:[(0,a.jsx)("option",{value:"all",children:"All Actions"}),(0,a.jsx)("option",{value:"UPDATE_USER_ROLE",children:"Update User Role"}),(0,a.jsx)("option",{value:"UPDATE_KYC_STATUS",children:"Update KYC Status"}),(0,a.jsx)("option",{value:"UPDATE_PRODUCT_STATUS",children:"Update Product Status"}),(0,a.jsx)("option",{value:"UPDATE_ORDER_STATUS",children:"Update Order Status"}),(0,a.jsx)("option",{value:"BAN_USER",children:"Ban User"}),(0,a.jsx)("option",{value:"UNBAN_USER",children:"Unban User"}),(0,a.jsx)("option",{value:"APPROVE_PAYMENT",children:"Approve Payment"}),(0,a.jsx)("option",{value:"REJECT_PAYMENT",children:"Reject Payment"}),(0,a.jsx)("option",{value:"REMOVE_REVIEW",children:"Remove Review"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Type"}),(0,a.jsxs)("select",{value:j.targetType,onChange:e=>w("targetType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-black",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"product",children:"Product"}),(0,a.jsx)("option",{value:"order",children:"Order"}),(0,a.jsx)("option",{value:"payment",children:"Payment"}),(0,a.jsx)("option",{value:"review",children:"Review"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{type:"date",value:j.dateFrom?j.dateFrom.toISOString().split("T")[0]:"",onChange:e=>w("dateFrom",e.target.value?new Date(e.target.value):void 0),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-black"}),(0,a.jsx)("input",{type:"date",value:j.dateTo?j.dateTo.toISOString().split("T")[0]:"",onChange:e=>w("dateTo",e.target.value?new Date(e.target.value):void 0),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-black"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Logs"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Approvals"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>e.action.includes("APPROVE")).length})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 text-red-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Rejections"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>e.action.includes("REJECT")||e.action.includes("BAN")).length})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>{let t=new Date;return new Date(e.timestamp).toDateString()===t.toDateString()}).length})]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?A(e.map(e=>e.id)):A([])},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actor"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No audit logs found"})}):e.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:f.includes(e.id),onChange:t=>{t.target.checked?A(t=>[...t,e.id]):A(t=>t.filter(t=>t!==e.id))},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(e.timestamp)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.actorName}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.actorId.slice(-6)]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl mr-2",children:(e=>{switch(e){case"UPDATE_USER_ROLE":case"UPDATE_KYC_STATUS":return"\uD83D\uDC64";case"UPDATE_PRODUCT_STATUS":case"FEATURE_PRODUCT":return"\uD83D\uDCE6";case"UPDATE_ORDER_STATUS":return"\uD83D\uDED2";case"BAN_USER":case"UNBAN_USER":return"\uD83D\uDEAB";case"APPROVE_PAYMENT":case"REJECT_PAYMENT":return"\uD83D\uDCB3";case"REMOVE_REVIEW":return"â­";default:return"\uD83D\uDCDD"}})(e.action)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat((t=e.action).includes("BAN")||t.includes("REJECT")||t.includes("REMOVE")?"text-red-600":t.includes("APPROVE")||t.includes("UPDATE")?"text-green-600":"text-blue-600"),children:e.action.replace(/_/g," ")})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 capitalize",children:e.targetType}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.targetId.slice(-8)]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.ip}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{className:"text-purple-600 hover:text-purple-900",onClick:()=>{},children:(0,a.jsx)(h.A,{className:"w-4 h-4"})})})]},e.id)})})]})})})]})})}},47863:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},66932:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},91788:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[2992,9507,1794,6899,8599,7194,4511,7372,389,8441,5964,7358],()=>e(e.s=35914)),_N_E=e.O()}]);