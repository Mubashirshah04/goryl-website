(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{8813:(e,r,s)=>{"use strict";s.d(r,{I_:()=>u,TV:()=>m,createProduct:()=>l,d$:()=>c,deleteProduct:()=>n,oo:()=>a,updateProduct:()=>d,vC:()=>h});var t=s(35317),i=s(25610),o=s(95997);let l=async e=>{try{if(!await (0,o.eT)(e.sellerId))throw Error("Only approved sellers can create products");let r={id:e.sellerId,name:e.sellerName||"",type:"personal"};try{let s=await (0,t.x7)((0,t.doc)(i.db,"users",e.sellerId));if(s.exists()){let t=s.data();r={id:t.id||e.sellerId,name:t.name||e.sellerName||"",type:t.sellerType||t.role||"personal"}}}catch(e){console.warn("Could not fetch seller info for product creation:",e)}return(await (0,t.addDoc)((0,t.collection)(i.db,"products"),Object.assign(Object.assign({},e),{seller:r,sellerRef:{id:r.id,name:r.name,photoURL:""},likes:[],views:0,rating:0,reviewCount:0,comments:0,status:"active",createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()}))).id}catch(e){throw console.error("Error creating product:",e),e}},a=async e=>{try{let r=(0,t.doc)(i.db,"products",e),s=await (0,t.x7)(r);if(s.exists()){let e=Object.assign({id:s.id},s.data());if(e.sellerId)try{let r=await (0,t.x7)((0,t.doc)(i.db,"users",e.sellerId));if(r.exists()){let s=r.data();e.seller={id:s.id,name:s.name,avatar:s.avatar,isVerified:s.isVerified,rating:s.rating}}}catch(e){console.warn("Could not fetch seller information:",e)}return e}return null}catch(e){throw console.error("Error getting product:",e),e}},d=async(e,r)=>{try{let s=(0,t.doc)(i.db,"products",e);await (0,t.mZ)(s,Object.assign(Object.assign({},r),{updatedAt:(0,t.serverTimestamp)()}))}catch(e){throw console.error("Error updating product:",e),e}},n=async e=>{try{let r=(0,t.doc)(i.db,"products",e);await (0,t.kd)(r)}catch(e){throw console.error("Error deleting product:",e),e}},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"createdAt",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;try{let l=(0,t.collection)(i.db,"products"),a=[];e.category&&a.push({field:"category",operator:"==",value:e.category}),e.sellerId&&a.push({field:"sellerId",operator:"==",value:e.sellerId}),e.status?a.push({field:"status",operator:"==",value:e.status}):a.push({field:"status",operator:"==",value:"active"}),void 0!==e.minPrice&&a.push({field:"price",operator:">=",value:e.minPrice}),void 0!==e.maxPrice&&a.push({field:"price",operator:"<=",value:e.maxPrice}),a.forEach(e=>{l=(0,t.query)(l,(0,t.where)(e.field,e.operator,e.value))}),l=(0,t.query)(l,(0,t.My)(r,s)),l=(0,t.query)(l,(0,t.AB)(o));let d=(await (0,t.getDocs)(l)).docs.map(e=>Object.assign({id:e.id},e.data()));if(e.search){let r=e.search.toLowerCase();d=d.filter(e=>{var s;return e.title.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||(null==(s=e.brand)?void 0:s.toLowerCase().includes(r))})}let n=[...new Set(d.map(e=>e.sellerId))],c=new Map;for(let e of n)try{let r=await (0,t.x7)((0,t.doc)(i.db,"users",e));r.exists()&&c.set(e,r.data())}catch(r){console.warn("Could not fetch seller ".concat(e,":"),r)}return d.map(e=>{let r=c.get(e.sellerId);return r&&(e.seller={id:r.id,name:r.name,avatar:r.avatar,isVerified:r.isVerified,rating:r.rating}),e})}catch(e){return console.log("Firebase products not accessible, returning empty array"),[]}},u=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"createdAt",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",l=(0,t.collection)(i.db,"products"),a=[];return r.category&&a.push({field:"category",operator:"==",value:r.category}),r.sellerId&&a.push({field:"sellerId",operator:"==",value:r.sellerId}),r.status&&a.push({field:"status",operator:"==",value:r.status}),void 0!==r.minPrice&&a.push({field:"price",operator:">=",value:r.minPrice}),void 0!==r.maxPrice&&a.push({field:"price",operator:"<=",value:r.maxPrice}),a.forEach(e=>{l=(0,t.query)(l,(0,t.where)(e.field,e.operator,e.value))}),l=(0,t.query)(l,(0,t.My)(s,o)),(0,t.onSnapshot)(l,async s=>{console.log("Products found:",s.docs.length);let o=s.docs.map(e=>Object.assign({id:e.id},e.data()));if(r.search){let e=r.search.toLowerCase();o=o.filter(r=>{var s;return r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||(null==(s=r.brand)?void 0:s.toLowerCase().includes(e))})}let l=[...new Set(o.map(e=>e.sellerId))],a=new Map;for(let e of l)try{let r=await (0,t.x7)((0,t.doc)(i.db,"users",e));r.exists()&&a.set(e,r.data())}catch(r){console.warn("Could not fetch seller ".concat(e,":"),r)}e(o.map(e=>{let r=a.get(e.sellerId);return r&&(e.seller={id:r.id,name:r.name,avatar:r.avatar,isVerified:r.isVerified,rating:r.rating}),e}))},r=>{console.error("Firestore error:",r.message),e([])})},h=async(e,r)=>{try{let s=await a(e);if(!s)throw Error("Product not found");let t=s.likes||[];t.includes(r)?await d(e,{likes:t.filter(e=>e!==r)}):await d(e,{likes:[...t,r]})}catch(e){throw console.error("Error toggling product like:",e),e}},m=async e=>c({sellerId:e})},33681:(e,r,s)=>{"use strict";s.d(r,{q:()=>m});var t=s(88693),i=s(35317),o=s(25610);let l=()=>new Promise(e=>{let r=o.j2.onAuthStateChanged(s=>{r(),e(s)});setTimeout(()=>{r(),e(null)},5e3)}),a=()=>{var e;return(null==(e=o.j2.currentUser)?void 0:e.uid)||null},d=async(e,r)=>{try{if(!e)throw Error("User ID is required");if(!o.j2.currentUser||a()!==e){let r=await l();if(!r||r.uid!==e)throw Error("Permission denied. Please make sure you are logged in.")}console.log("Adding product to wishlist for user:",e);let s=(0,i.doc)(o.db,"wishlists",e),t=await (0,i.x7)(s),d={items:[],updatedAt:(0,i.serverTimestamp)()};t.exists()&&(d=t.data());let n=d.items.findIndex(e=>e.productId===r.id);if(-1!==n)throw Error("Product already in wishlist");let c={id:r.id,userId:e,productId:r.id,product:r,addedAt:new Date};d.items.push(c),await (0,i.mZ)(s,{items:d.items,updatedAt:(0,i.serverTimestamp)()}),console.log("Successfully added product to wishlist for user:",e)}catch(e){if(console.error("Error adding to wishlist:",e),e.code){if("permission-denied"===e.code)throw Error("Permission denied. Please make sure you are logged in.");throw e}throw Error(e.message||"Failed to add item to wishlist")}},n=async(e,r)=>{try{if(!e)throw Error("User ID is required");if(!o.j2.currentUser||a()!==e){let r=await l();if(!r||r.uid!==e)throw Error("Permission denied. Please make sure you are logged in.")}console.log("Removing product from wishlist for user:",e,"product:",r);let s=(0,i.doc)(o.db,"wishlists",e),t=await (0,i.x7)(s);if(!t.exists())return void console.log("Wishlist document does not exist for user:",e);let d=t.data().items.filter(e=>e.productId!==r);await (0,i.mZ)(s,{items:d,updatedAt:(0,i.serverTimestamp)()}),console.log("Successfully removed product from wishlist for user:",e)}catch(e){if(console.error("Error removing from wishlist:",e),e.code){if("permission-denied"===e.code)throw Error("Permission denied. Please make sure you are logged in.");throw e}throw Error(e.message||"Failed to remove item from wishlist")}},c=async e=>{try{if(!e)throw Error("User ID is required");if(!o.j2.currentUser||a()!==e){let r=await l();if(!r||r.uid!==e)throw Error("Permission denied. Please make sure you are logged in.")}console.log("Attempting to fetch wishlist for user:",e);let r=(0,i.doc)(o.db,"wishlists",e),s=await (0,i.x7)(r);if(!s.exists())return console.log("Wishlist document does not exist for user:",e),[];let t=s.data();return console.log("Successfully fetched wishlist for user:",e),t.items||[]}catch(e){if(console.error("Error getting user wishlist:",e),e.code){if("permission-denied"===e.code)throw Error("Permission denied. Please make sure you are logged in.");throw e}throw Error(e.message||"Failed to load wishlist")}};var u=s(68084);let h=new Set,m=(0,t.vt)((e,r)=>({wishlist:[],loading:!1,error:null,setWishlist:r=>e({wishlist:r}),setLoading:r=>e({loading:r}),setError:r=>e({error:r}),initializeWishlist:async r=>{if(!r)return void e({error:"User not authenticated",loading:!1});if(!h.has(r)){h.add(r),console.log("Initializing wishlist for:",r),e({loading:!0,error:null});try{let s=await c(r);e({wishlist:s,loading:!1}),console.log("Wishlist initialized successfully for:",r);let t=((e,r)=>{if(!e)return console.error("User ID is required for wishlist subscription"),r([]),()=>{};if(!o.j2.currentUser||a()!==e)return console.error("Permission denied. User not authenticated for wishlist subscription"),r([]),()=>{};console.log("Subscribing to wishlist for user:",e);let s=(0,i.doc)(o.db,"wishlists",e);return(0,i.onSnapshot)(s,s=>{s.exists()?r(s.data().items||[]):(console.log("Wishlist document does not exist for user:",e),r([]))},e=>{console.error("Error subscribing to wishlist:",e),e.code&&console.error("Firebase error code:",e.code),r([])})})(r,r=>{e({wishlist:r})});window.wishlistUnsubscribe=t}catch(s){console.error("Error initializing wishlist:",s),h.delete(r),(null==s?void 0:s.code)==="permission-denied"||(null==s?void 0:s.message)&&s.message.includes("Permission denied")?e({error:"Permission denied. Please make sure you are logged in.",loading:!1,wishlist:[]}):e({error:s.message||"Failed to load wishlist",loading:!1})}}},addToWishlist:async r=>{let{user:s}=u.useAuthStore.getState();if(s){if(!s.uid)return void e({error:"User ID not available"});e({loading:!0,error:null});try{await d(s.uid,r),e({loading:!1,error:null})}catch(r){console.error("Error adding to wishlist:",r),(null==r?void 0:r.code)==="permission-denied"||(null==r?void 0:r.message)&&r.message.includes("Permission denied")?e({error:"Permission denied. Please make sure you are logged in.",loading:!1}):e({error:r.message||"Failed to add item to wishlist",loading:!1})}}},removeFromWishlist:async r=>{let{user:s}=u.useAuthStore.getState();if(!s)return void e({error:"Please login to remove items from wishlist"});if(!s.uid)return void e({error:"User ID not available"});e({loading:!0,error:null});try{await n(s.uid,r),e({loading:!1,error:null})}catch(r){console.error("Error removing from wishlist:",r),(null==r?void 0:r.code)==="permission-denied"||(null==r?void 0:r.message)&&r.message.includes("Permission denied")?e({error:"Permission denied. Please make sure you are logged in.",loading:!1}):e({error:r.message||"Failed to remove item from wishlist",loading:!1})}},isInWishlist:e=>{let{wishlist:s}=r();return s.some(r=>r.productId===e)},getWishlistCount:()=>{let{wishlist:e}=r();return e.length}}))},39575:(e,r,s)=>{Promise.resolve().then(s.bind(s,94012))},94012:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>N});var t=s(95155),i=s(12115),o=s(68084),l=s(66935),a=s(33681),d=s(60760),n=s(1978),c=s(56671),u=s(6874),h=s.n(u),m=s(38564),g=s(47924),p=s(66932),x=s(54653),f=s(15968),v=s(27809),w=s(51976),y=s(62108),b=s(66516),j=s(8813);function N(){let[e,r]=(0,i.useState)([]),[s,u]=(0,i.useState)(!0),[N,P]=(0,i.useState)(!1),[k,C]=(0,i.useState)("grid"),[E,A]=(0,i.useState)(!1),[I,S]=(0,i.useState)({}),[L,R]=(0,i.useState)(""),{user:F,userData:U}=(0,o.useAuthStore)(),{addToCart:T}=(0,l.x)(),{addToWishlist:q,removeFromWishlist:D,isInWishlist:_}=(0,a.q)();(0,i.useEffect)(()=>{P(!0)},[]),(0,i.useEffect)(()=>{F&&(l.x.getState().initializeCart(F.uid),a.q.getState().initializeWishlist(F.uid))},[F]),(0,i.useEffect)(()=>{let e=(0,j.I_)(e=>{console.log("Explore products loaded:",e.length);let s=e.map(e=>{var r,s;return{...e,comments:e.commentsCount||e.comments||0,sellerRef:e.sellerRef||{id:e.sellerId||"",name:(null==(r=e.seller)?void 0:r.name)||e.sellerName||"",photoURL:(null==(s=e.seller)?void 0:s.avatar)||e.sellerPhoto||""}}});if(console.log("Explore products after filtering:",(s=s.filter(e=>{var r;let s=e.title.toLowerCase(),t=(null==(r=e.sellerName)?void 0:r.toLowerCase())||"",i=["organic cotton t-shirt","premium wireless headphones","demo smart watch"].some(e=>s.includes(e)||e.includes(s)),o=["ecofashion","audiomaster","techgear pro"].some(e=>t.includes(e)||e.includes(t));return!i&&!o})).length),L){let e=L.toLowerCase();s=s.filter(r=>{var s;return r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||(null==(s=r.brand)?void 0:s.toLowerCase().includes(e))})}if(void 0!==I.minPrice&&(s=s.filter(e=>e.price>=I.minPrice)),void 0!==I.maxPrice&&(s=s.filter(e=>e.price<=I.maxPrice)),void 0!==I.rating&&(s=s.filter(e=>e.rating>=I.rating)),I.sortBy)switch(I.sortBy){case"price_low":s.sort((e,r)=>e.price-r.price);break;case"price_high":s.sort((e,r)=>r.price-e.price);break;case"rating":s.sort((e,r)=>r.rating-e.rating);break;case"popularity":s.sort((e,r)=>{var s,t;return((null==(s=r.likes)?void 0:s.length)||0)-((null==(t=e.likes)?void 0:t.length)||0)});break;default:s.sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime())}r(s),u(!1)},{category:I.category});return()=>e()},[I,L]);let W=async e=>{if(!F)return void c.oR.error("Please login to like products");try{await (0,j.vC)(e.id,F.uid),c.oR.success("Like updated!")}catch(e){console.error("Error toggling like:",e),c.oR.error("Failed to update like")}},M=async e=>{if(!F)return void c.oR.error("Please login to save products");let r=_(e.id);try{r?(await D(e.id),c.oR.success("Removed from wishlist")):(await q(e),c.oR.success("Added to wishlist!"))}catch(e){c.oR.error("Failed to update wishlist")}},O=async e=>{if(!F)return void c.oR.error("Please login to add items to cart");try{await T(e,1),c.oR.success("Added to cart!")}catch(e){c.oR.error("Failed to add to cart")}},B=async e=>{let r="".concat(window.location.origin,"/product/").concat(e.id);if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:r})}catch(e){}else await navigator.clipboard.writeText(r),c.oR.success("Link copied to clipboard!")};return s?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,r)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[(0,t.jsx)("div",{className:"h-48 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},r))})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Explore Products"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Discover amazing products from our community"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search products...",value:L,onChange:e=>R(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("button",{onClick:()=>A(!E),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Filters"})]}),(0,t.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>C("grid"),className:"px-3 py-2 ".concat("grid"===k?"bg-purple-600 text-white":"bg-white text-gray-600"),children:(0,t.jsx)(x.A,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>C("list"),className:"px-3 py-2 ".concat("list"===k?"bg-purple-600 text-white":"bg-white text-gray-600"),children:(0,t.jsx)(f.A,{className:"w-5 h-5"})})]})]}),(0,t.jsx)(d.N,{children:E&&(0,t.jsx)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,t.jsxs)("select",{value:I.category||"",onChange:e=>S({...I,category:e.target.value||void 0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),(0,t.jsx)("option",{value:"Electronics",children:"Electronics"}),(0,t.jsx)("option",{value:"Fashion",children:"Fashion"}),(0,t.jsx)("option",{value:"Home & Garden",children:"Home & Garden"}),(0,t.jsx)("option",{value:"Sports",children:"Sports"}),(0,t.jsx)("option",{value:"Books",children:"Books"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price"}),(0,t.jsx)("input",{type:"number",placeholder:"0",value:I.minPrice||"",onChange:e=>S({...I,minPrice:e.target.value?Number(e.target.value):void 0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price"}),(0,t.jsx)("input",{type:"number",placeholder:"1000",value:I.maxPrice||"",onChange:e=>S({...I,maxPrice:e.target.value?Number(e.target.value):void 0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,t.jsxs)("select",{value:I.sortBy||"newest",onChange:e=>S({...I,sortBy:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"newest",children:"Newest"}),(0,t.jsx)("option",{value:"price_low",children:"Price: Low to High"}),(0,t.jsx)("option",{value:"price_high",children:"Price: High to Low"}),(0,t.jsx)("option",{value:"rating",children:"Highest Rated"}),(0,t.jsx)("option",{value:"popularity",children:"Most Popular"})]})]})]})})})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)(g.A,{className:"w-16 h-16 mx-auto"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):(0,t.jsx)("div",{className:"grid"===k?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:e.map(e=>{var r,s,i,o,l;return(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow ".concat("list"===k?"flex":""),children:[(0,t.jsx)("div",{className:"list"===k?"w-48 h-48":"aspect-square",children:(0,t.jsx)(h(),{href:"/product/".concat(e.id),children:(0,t.jsx)("img",{src:e.images[0]||"/placeholder-product.jpg",alt:e.title,width:"list"===k?"192":"400",height:"list"===k?"192":"400",className:"w-full h-full object-cover hover:scale-105 transition-transform"})})}),(0,t.jsxs)("div",{className:"p-4 ".concat("list"===k?"flex-1":""),children:[(0,t.jsx)(h(),{href:"/product/".concat(e.id),children:(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 hover:text-purple-600 transition-colors",children:e.title})}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("span",{className:"text-xl font-bold text-purple-600",children:["$",e.price.toFixed(2)]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(e=>{let r=[],s=Math.floor(e);for(let e=0;e<s;e++)r.push((0,t.jsx)(m.A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},e));e%1!=0&&r.push((0,t.jsx)(m.A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},"half"));let i=5-Math.ceil(e);for(let e=0;e<i;e++)r.push((0,t.jsx)(m.A,{className:"w-4 h-4 text-gray-300"},"empty-".concat(e)));return r})(e.rating),(0,t.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:["(",e.rating,")"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,t.jsx)("img",{src:(null==(r=e.seller)?void 0:r.avatar)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent((null==(s=e.seller)?void 0:s.name)||"seller")),alt:(null==(i=e.seller)?void 0:i.name)||"Seller",width:"20",height:"20",className:"rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:null==(o=e.seller)?void 0:o.name}),(null==(l=e.seller)?void 0:l.isVerified)&&(0,t.jsx)("span",{className:"text-blue-500 text-xs",children:"âœ“"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("button",{onClick:()=>O(e),className:"flex items-center space-x-1 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Add to Cart"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>W(e),className:"p-2 rounded-full transition-colors ".concat(Array.isArray(e.likes)&&e.likes.includes((null==F?void 0:F.uid)||"")?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"),children:(0,t.jsx)(w.A,{className:"w-4 h-4 ".concat(Array.isArray(e.likes)&&e.likes.includes((null==F?void 0:F.uid)||"")?"fill-current":"")})}),(0,t.jsx)("button",{onClick:()=>M(e),className:"p-2 rounded-full transition-colors ".concat(_(e.id)?"text-purple-500 bg-purple-50":"text-gray-400 hover:text-purple-500 hover:bg-purple-50"),children:(0,t.jsx)(y.A,{className:"w-4 h-4 ".concat(_(e.id)?"fill-current":"")})}),(0,t.jsx)("button",{onClick:()=>B(e),className:"p-2 rounded-full text-gray-400 hover:text-green-500 hover:bg-green-50 transition-colors",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:[Array.isArray(e.likes)?e.likes.length:0," likes"]}),(0,t.jsxs)("span",{children:[e.comments||0," comments"]}),(0,t.jsxs)("span",{children:[e.views||0," views"]})]})]})]},e.id)})}),e.length>0&&(0,t.jsx)("div",{className:"text-center mt-8",children:(0,t.jsx)("button",{className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors",children:"Load More Products"})})]})})}}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,6874,5973,6935,8441,5964,7358],()=>e(e.s=39575)),_N_E=e.O()}]);