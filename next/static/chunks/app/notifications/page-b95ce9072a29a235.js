(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,6173],{25610:(e,t,r)=>{"use strict";r.d(t,{db:()=>p,j2:()=>u,storage:()=>h});var a=r(23915),s=r(16203),i=r(35317),l=r(90858),o=r(92144),n=r(81115),c=r(86864);let d=(0,a.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,s.xI)(d),p=(0,i.aU)(d);(0,n.C3)(d);let h=(0,l.c7)(d);(0,o.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},27435:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(95155),s=r(12115),i=r(1978),l=r(60760),o=r(27809),n=r(37108),c=r(17580),d=r(381),u=r(81586),p=r(29799),h=r(23861),x=r(47924),m=r(66932),b=r(62525),g=r(68084),f=r(56671),w=r(53690),y=r(6874),v=r.n(y);function j(){let{user:e}=(0,g.useAuthStore)(),[t,r]=(0,s.useState)([]),[y,j]=(0,s.useState)(!0),[N,A]=(0,s.useState)("all"),[k,S]=(0,s.useState)("");(0,s.useEffect)(()=>{if(!(null==e?void 0:e.uid))return;console.log("\uD83D\uDCF1 Loading notifications for user:",e.uid),j(!0);let t=(0,w.Jv)(e.uid,e=>{let t=e.map(e=>({id:e.id,type:C(e.type),title:e.title,message:e.message,timestamp:e.createdAt,read:e.read,actionUrl:U(e),priority:L(e.type)}));r(t),j(!1),console.log("\uD83D\uDCF1 Notifications loaded:",t.length)});return()=>{t&&t()}},[null==e?void 0:e.uid]);let C=e=>e.includes("order")?"order":e.includes("payment")?"payment":e.includes("ship")?"shipping":e.includes("product")?"product":e.includes("social")?"social":"system",U=t=>{var r,a;if(null==(r=t.data)?void 0:r.orderId)return"/orders/".concat(t.data.orderId);if(null==(a=t.data)?void 0:a.productId)return"/product/".concat(t.data.productId);let s=null==e?void 0:e.role;return"seller"===s||"brand"===s||"company"===s?"/brand/dashboard?tab=orders":"/orders"},L=e=>e.includes("cancelled")||e.includes("failed")?"high":e.includes("delivered")||e.includes("confirmed")?"medium":"low",T=async e=>{try{await (0,w.bA)(e),r(t=>t.map(t=>t.id===e?{...t,read:!0}:t))}catch(e){console.error("Error marking notification as read:",e),f.oR.error("Failed to mark notification as read")}},P=async()=>{if(null==e?void 0:e.uid)try{await (0,w.he)(e.uid),r(e=>e.map(e=>({...e,read:!0}))),f.oR.success("All notifications marked as read")}catch(e){console.error("Error marking all notifications as read:",e),f.oR.error("Failed to mark all notifications as read")}},O=t.filter(e=>"unread"===N?!e.read:"orders"===N?"order"===e.type:"social"===N?"social"===e.type:"system"!==N||"system"===e.type).filter(e=>e.title.toLowerCase().includes(k.toLowerCase())||e.message.toLowerCase().includes(k.toLowerCase())),D=t.filter(e=>!e.read).length;return e?y?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-12 bg-white/10 rounded-2xl w-1/4"}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-2xl"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-white/10 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-white/5 rounded w-1/2"})]})]})},t))})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-fuchsia-500 rounded-3xl flex items-center justify-center shadow-2xl ring-4 ring-purple-500/20 relative",children:[(0,a.jsx)(h.A,{className:"text-white",size:32}),D>0&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:D>99?"99+":D})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"Premium Notifications"}),(0,a.jsxs)("p",{className:"text-purple-200 text-xl font-semibold",children:[D," unread • ",t.length," total"]})]})]}),D>0&&(0,a.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:P,className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-6 py-3 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-2xl font-bold text-lg",children:"Mark All Read"})]})}),(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 mb-8 shadow-2xl",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)(x.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-purple-300",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search notifications...",value:k,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"text-purple-300",size:20}),(0,a.jsxs)("select",{value:N,onChange:e=>A(e.target.value),className:"bg-white/10 border border-white/20 rounded-2xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Notifications"}),(0,a.jsx)("option",{value:"unread",children:"Unread Only"}),(0,a.jsx)("option",{value:"orders",children:"Orders"}),(0,a.jsx)("option",{value:"social",children:"Social"}),(0,a.jsx)("option",{value:"system",children:"System"})]})]})]})}),0===O.length?(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-40 h-40 bg-gradient-to-br from-purple-500/20 to-fuchsia-500/20 rounded-full flex items-center justify-center mx-auto mb-8 backdrop-blur-xl border border-white/20",children:(0,a.jsx)(h.A,{className:"w-24 h-24 text-purple-300"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-white mb-4 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:k?"No notifications found":"All caught up!"}),(0,a.jsx)("p",{className:"text-purple-200 text-xl mb-8 leading-relaxed",children:k?"Try adjusting your search terms":"You're all up to date with your notifications."})]}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(l.N,{children:O.map((e,t)=>(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,delay:.1*t},className:"bg-white/10 backdrop-blur-xl border rounded-3xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-500 group ".concat(e.read?"border-white/20":"border-purple-500/30 ".concat((e=>{switch(e){case"high":return"border-red-500/30 bg-red-500/10";case"medium":return"border-yellow-500/30 bg-yellow-500/10";case"low":return"border-blue-500/30 bg-blue-500/10";default:return"border-white/20 bg-white/5"}})(e.priority))),children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-2xl border ".concat(e.read?"bg-white/10 border-white/20":"bg-purple-500/20 border-purple-500/30"),children:(e=>{switch(e){case"order":return(0,a.jsx)(o.A,{className:"w-6 h-6 text-blue-400"});case"product":return(0,a.jsx)(n.A,{className:"w-6 h-6 text-purple-400"});case"social":return(0,a.jsx)(c.A,{className:"w-6 h-6 text-green-400"});case"system":return(0,a.jsx)(d.A,{className:"w-6 h-6 text-gray-400"});case"payment":return(0,a.jsx)(u.A,{className:"w-6 h-6 text-green-400"});case"shipping":return(0,a.jsx)(p.A,{className:"w-6 h-6 text-orange-400"});default:return(0,a.jsx)(h.A,{className:"w-6 h-6 text-purple-400"})}})(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-bold text-lg ".concat(e.read?"text-white":"text-purple-200"),children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-purple-300 text-sm",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/6e4);if(t<60)return"".concat(t,"m ago");if(t<1440){let e=Math.floor(t/60);return"".concat(e,"h ago")}{let e=Math.floor(t/1440);return"".concat(e,"d ago")}})(e.timestamp)}),!e.read&&(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})]})]}),(0,a.jsx)("p",{className:"text-purple-200 text-lg leading-relaxed mb-4",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.actionUrl&&(0,a.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{T(e.id)},className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-4 py-2 rounded-2xl font-bold hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-lg",children:(0,a.jsx)(v(),{href:e.actionUrl,children:"View Details"})}),!e.read&&(0,a.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(e.id),className:"bg-white/10 text-purple-200 hover:text-white hover:bg-white/20 px-4 py-2 rounded-2xl transition-all duration-300 border border-white/20",children:"Mark Read"}),(0,a.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var t;return t=e.id,void(r(e=>e.filter(e=>e.id!==t)),f.oR.success("Notification deleted"))},className:"bg-red-500/20 text-red-400 hover:text-red-300 hover:bg-red-500/30 px-4 py-2 rounded-2xl transition-all duration-300 border border-red-500/30",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})})]})]})]})},e.id))})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md mx-auto px-4",children:[(0,a.jsx)("div",{className:"w-40 h-40 bg-gradient-to-br from-purple-500/20 to-fuchsia-500/20 rounded-full flex items-center justify-center mx-auto mb-8 backdrop-blur-xl border border-white/20",children:(0,a.jsx)(h.A,{className:"w-24 h-24 text-purple-300"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-4 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:"Sign in to view notifications"}),(0,a.jsx)("p",{className:"text-purple-200 text-xl mb-8 leading-relaxed",children:"Stay updated with your orders, products, and social activities!"}),(0,a.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white px-8 py-4 rounded-2xl hover:from-purple-600 hover:to-fuchsia-600 transition-all duration-300 shadow-2xl font-bold text-lg",children:(0,a.jsx)(v(),{href:"/auth-login",children:"Sign In"})})]})})}},68084:(e,t,r)=>{"use strict";r.d(t,{useAuthStore:()=>o});var a=r(88693),s=r(16203),i=r(25610),l=r(95997);let o=(0,a.vt)((e,t)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:t=>e({user:t}),setUserData:t=>e({userData:t}),setLoading:t=>e({loading:t}),setUnsubscribeUserListener:t=>e({unsubscribeUserListener:t}),initialize:()=>(0,s.hg)(i.j2,async a=>{if(a)try{let s=await (0,l.gL)(a.uid),i=Object.assign(Object.assign({},a),{role:null==s?void 0:s.role});e({user:i,userData:s,loading:!1});let{doc:o,onSnapshot:n}=await Promise.resolve().then(r.bind(r,35317)),{db:c}=await Promise.resolve().then(r.bind(r,25610)),d=o(c,"users",a.uid),u=n(d,r=>{if(r.exists()){let a=r.data();e({userData:a,user:Object.assign(Object.assign({},t().user||{}),{role:a.role})})}});e({unsubscribeUserListener:u})}catch(t){console.error("Error fetching user data:",t),e({user:Object.assign(Object.assign({},a),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:r}=t();r&&(r(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:r}=t();if(r)try{let a=await (0,l.gL)(r.uid);e({userData:a,user:Object.assign(Object.assign({},t().user||{}),{role:null==a?void 0:a.role})}),setTimeout(async()=>{try{let a=await (0,l.gL)(r.uid);e({userData:a,user:Object.assign(Object.assign({},t().user||{}),{role:null==a?void 0:a.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{o.getState().initialize()},0)},74056:(e,t,r)=>{Promise.resolve().then(r.bind(r,27435))},95997:(e,t,r)=>{"use strict";r.d(t,{G6:()=>o,HW:()=>u,Hh:()=>c,Jv:()=>n,eT:()=>b,gL:()=>p,qc:()=>m,xw:()=>d});var a=r(16203),s=r(35317),i=r(25610);let l=new a.HF;l.addScope("email"),l.addScope("profile");let o=async()=>{var e;try{let t=(await (0,a.df)(i.j2,l)).user;if(!(await (0,s.x7)((0,s.doc)(i.db,"users",t.uid))).exists()){let r={id:t.uid,email:t.email||"",name:t.displayName||"Anonymous",username:(null==(e=t.email)?void 0:e.split("@")[0])||"user",avatar:t.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,s.BN)((0,s.doc)(i.db,"users",t.uid),r)}return t}catch(e){throw console.error("Google sign-in error:",e),e}},n=async(e,t)=>{try{return(await (0,a.x9)(i.j2,e,t)).user}catch(e){throw e}},c=async function(e,t,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let o=(await (0,a.eJ)(i.j2,e,t)).user;await (0,a.r7)(o,{displayName:r});try{let t={id:o.uid,email:o.email||"",name:r,username:e.split("@")[0],avatar:o.photoURL||"",bio:"",role:l,accountType:l,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,s.BN)((0,s.doc)(i.db,"users",o.uid),t),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return o}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,a.J1)(i.j2,e)}catch(e){throw e}},u=()=>i.j2.currentUser,p=async e=>{try{let t=await (0,s.x7)((0,s.doc)(i.db,"users",e));if(t.exists())return t.data();return null}catch(e){return console.error("Error getting user data:",e),null}},h=async e=>{try{let t=await p(e);return(null==t?void 0:t.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},x=async e=>{try{let t=await p(e);return(null==t?void 0:t.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},m=async e=>"admin"===await h(e),b=async e=>["personal_seller","brand","company"].includes(await x(e))}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,6874,6831,3690,8441,5964,7358],()=>e(e.s=74056)),_N_E=e.O()}]);