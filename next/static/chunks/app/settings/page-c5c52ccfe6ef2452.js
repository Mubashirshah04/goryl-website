(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662,5610],{25610:(e,r,t)=>{"use strict";t.d(r,{db:()=>p,j2:()=>u,storage:()=>f});var s=t(23915),a=t(16203),l=t(35317),i=t(90858),n=t(92144),o=t(81115),c=t(86864);let d=(0,s.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,a.xI)(d),p=(0,l.aU)(d);(0,o.C3)(d);let f=(0,i.c7)(d);(0,n.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},68084:(e,r,t)=>{"use strict";t.d(r,{useAuthStore:()=>n});var s=t(88693),a=t(16203),l=t(25610),i=t(95997);let n=(0,s.vt)((e,r)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:r=>e({user:r}),setUserData:r=>e({userData:r}),setLoading:r=>e({loading:r}),setUnsubscribeUserListener:r=>e({unsubscribeUserListener:r}),initialize:()=>(0,a.hg)(l.j2,async s=>{if(s)try{let a=await (0,i.gL)(s.uid),l=Object.assign(Object.assign({},s),{role:null==a?void 0:a.role});e({user:l,userData:a,loading:!1});let{doc:n,onSnapshot:o}=await Promise.resolve().then(t.bind(t,35317)),{db:c}=await Promise.resolve().then(t.bind(t,25610)),d=n(c,"users",s.uid),u=o(d,t=>{if(t.exists()){let s=t.data();e({userData:s,user:Object.assign(Object.assign({},r().user||{}),{role:s.role})})}});e({unsubscribeUserListener:u})}catch(r){console.error("Error fetching user data:",r),e({user:Object.assign(Object.assign({},s),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:t}=r();t&&(t(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:t}=r();if(t)try{let s=await (0,i.gL)(t.uid);e({userData:s,user:Object.assign(Object.assign({},r().user||{}),{role:null==s?void 0:s.role})}),setTimeout(async()=>{try{let s=await (0,i.gL)(t.uid);e({userData:s,user:Object.assign(Object.assign({},r().user||{}),{role:null==s?void 0:s.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{n.getState().initialize()},0)},72608:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>E});var s=t(95155),a=t(12115),l=t(51362),i=t(6874),n=t.n(i),o=t(35695),c=t(68084),d=t(98868),u=t(16203),p=t(25610),f=t(381),h=t(35169),x=t(71007),g=t(4516),m=t(23861),b=t(75525),y=t(92657),j=t(81586),v=t(33127),N=t(4229),w=t(32919),k=t(46767),A=t(84616),C=t(62525),S=t(13717),D=t(54416),P=t(34835),O=t(56671);function E(){let{user:e}=(0,c.useAuthStore)(),{profile:r,fetchProfile:t,updateProfile:i}=(0,d.n)(),E=(0,o.useRouter)(),[U,L]=(0,a.useState)("profile"),[R,M]=(0,a.useState)(!1),[F,z]=(0,a.useState)(!1),[T,I]=(0,a.useState)({name:"",phone:"",bio:"",about:""}),[_,V]=(0,a.useState)([]),[Z,B]=(0,a.useState)(!1),[G,J]=(0,a.useState)({id:"",fullName:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[H,q]=(0,a.useState)({twoFactorAuth:!1,loginNotifications:!0,deviceManagement:!0}),[W,Y]=(0,a.useState)({profileVisibility:"public",showOnlineStatus:!0,allowMessages:!0,dataSharing:!1}),[K,Q]=(0,a.useState)([]),{theme:X,setTheme:$}=(0,l.D)(),[ee,er]=(0,a.useState)(()=>{{let e=localStorage.getItem("appearanceSettings");if(e)return JSON.parse(e)}return{theme:"light",language:"en",fontSize:"medium",compactMode:!1}});(0,a.useEffect)(()=>{localStorage.setItem("appearanceSettings",JSON.stringify(ee)),"dark"===ee.theme&&$("dark"),"light"===ee.theme&&$("light")},[ee.theme,$]);let[et,es]=(0,a.useState)({emailNotifications:!0,pushNotifications:!0,marketingCommunications:!1});(0,a.useEffect)(()=>{if(!e)return void E.push("/auth-login");(async()=>{M(!0);try{await t(e.uid),V([])}catch(e){console.error("Error loading settings:",e),O.oR.error("Failed to load settings")}finally{M(!1)}})()},[]),(0,a.useEffect)(()=>{r&&I({name:r.name||"",phone:r.phone||"",bio:r.bio||"",about:r.about||""})},[r]);let ea=async()=>{if(e){z(!0);try{await i(e.uid,{name:T.name,phone:T.phone,bio:T.bio,about:T.about}),O.oR.success("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),O.oR.error("Failed to update profile")}finally{z(!1)}}},el=async()=>{try{await (0,u.CI)(p.j2),E.push("/"),O.oR.success("Signed out successfully")}catch(e){console.error("Error signing out:",e),O.oR.error("Failed to sign out")}};return e?R?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading settings..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n(),{href:"/profile/".concat(e.uid),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(h.A,{className:"w-5 h-5 text-gray-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your account preferences"})]})]})})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:(0,s.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"profile",label:"Profile",icon:x.A},{id:"shipping",label:"Shipping",icon:g.A},{id:"notifications",label:"Notifications",icon:m.A},{id:"security",label:"Security",icon:b.A},{id:"privacy",label:"Privacy",icon:y.A},{id:"payment",label:"Payment",icon:j.A},{id:"appearance",label:"Appearance",icon:v.A}].map(e=>{let r=e.icon;return(0,s.jsxs)("button",{onClick:()=>L(e.id),className:"flex items-center space-x-2 px-4 py-3 border-b-2 font-medium text-sm whitespace-nowrap ".concat(U===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(r,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.label})]},e.id)})})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:["profile"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:T.name,onChange:e=>I(r=>({...r,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",value:T.phone,onChange:e=>I(r=>({...r,phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Short Description)"}),(0,s.jsx)("textarea",{value:T.bio,onChange:e=>I(r=>({...r,bio:e.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"A short description about yourself..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"About (Detailed Description)"}),(0,s.jsx)("textarea",{value:T.about,onChange:e=>I(r=>({...r,about:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"A detailed description about yourself..."})]}),(0,s.jsxs)("button",{onClick:ea,disabled:F,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[(0,s.jsx)(N.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:F?"Saving...":"Save Changes"})]})]}),"security"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(w.A,{className:"w-5 h-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:H.twoFactorAuth,onChange:e=>q(r=>({...r,twoFactorAuth:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(m.A,{className:"w-5 h-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Login Notifications"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Get notified when someone logs into your account"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:H.loginNotifications,onChange:e=>q(r=>({...r,loginNotifications:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(k.A,{className:"w-5 h-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Device Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Manage devices that have access to your account"})]})]}),(0,s.jsx)("button",{className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"Manage"})]})]})]}),"privacy"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Privacy Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Visibility"}),(0,s.jsxs)("select",{value:W.profileVisibility,onChange:e=>Y(r=>({...r,profileVisibility:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"public",children:"Public"}),(0,s.jsx)("option",{value:"friends",children:"Friends Only"}),(0,s.jsx)("option",{value:"private",children:"Private"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Show Online Status"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Let others see when you're online"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:W.showOnlineStatus,onChange:e=>Y(r=>({...r,showOnlineStatus:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Allow Messages"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Let others send you messages"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:W.allowMessages,onChange:e=>Y(r=>({...r,allowMessages:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Data Sharing"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Allow us to use your data for improvements"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:W.dataSharing,onChange:e=>Y(r=>({...r,dataSharing:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),"payment"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Methods"}),(0,s.jsxs)("button",{onClick:()=>{let e={id:Date.now().toString(),type:"card",last4:"1234",brand:"MasterCard",isDefault:0===K.length,expiryMonth:"12",expiryYear:"2026"};Q(r=>[...r,e]),O.oR.success("Payment method added successfully")},className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[(0,s.jsx)(A.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add Payment Method"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:K.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(j.A,{className:"w-5 h-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e.brand," •••• ",e.last4]}),e.isDefault&&(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Default"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Expires ",e.expiryMonth,"/",e.expiryYear]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{var r;return r=e.id,void(Q(e=>e.map(e=>({...e,isDefault:e.id===r}))),O.oR.success("Default payment method updated"))},className:"text-xs px-2 py-1 rounded ".concat(e.isDefault?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),disabled:e.isDefault,children:e.isDefault?"Default":"Set Default"}),(0,s.jsx)("button",{onClick:()=>{var r;return r=e.id,void(Q(e=>e.filter(e=>e.id!==r)),O.oR.success("Payment method deleted successfully"))},className:"text-red-600 hover:text-red-700",title:"Delete Payment Method",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})]})]})},e.id))})]}),"appearance"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Appearance Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,s.jsxs)("select",{value:ee.theme,onChange:e=>er(r=>({...r,theme:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"light",children:"Light"}),(0,s.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,s.jsxs)("select",{value:ee.language,onChange:e=>er(r=>({...r,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"en",children:"English"}),(0,s.jsx)("option",{value:"es",children:"Spanish"}),(0,s.jsx)("option",{value:"fr",children:"French"}),(0,s.jsx)("option",{value:"de",children:"German"}),(0,s.jsx)("option",{value:"ar",children:"Arabic"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,s.jsxs)("select",{value:ee.fontSize,onChange:e=>er(r=>({...r,fontSize:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"small",children:"Small"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"large",children:"Large"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Compact Mode"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Reduce spacing for more content"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:ee.compactMode,onChange:e=>er(r=>({...r,compactMode:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),"shipping"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Shipping Addresses"}),(0,s.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[(0,s.jsx)(A.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add Address"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:_.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.fullName}),e.isDefault&&(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Default"})]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:e.phone}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.address,", ",e.city,", ",e.state," ",e.zipCode]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e.country})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{J(e),B(!0)},className:"text-gray-600 hover:text-gray-700",title:"Edit Address",children:(0,s.jsx)(S.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{var r;return r=e.id,void(V(e=>e.map(e=>({...e,isDefault:e.id===r}))),O.oR.success("Default address updated"))},className:"text-xs px-2 py-1 rounded ".concat(e.isDefault?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),disabled:e.isDefault,children:e.isDefault?"Default":"Set Default"}),(0,s.jsx)("button",{onClick:()=>{var r;return r=e.id,void(V(e=>e.filter(e=>e.id!==r)),O.oR.success("Address deleted successfully"))},className:"text-red-600 hover:text-red-700",title:"Delete Address",children:(0,s.jsx)(D.A,{className:"w-4 h-4"})})]})]})},e.id))}),Z&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:G.id?"Edit Address":"Add New Address"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Full Name",value:G.fullName,onChange:e=>J(r=>({...r,fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{type:"tel",placeholder:"Phone Number",value:G.phone,onChange:e=>J(r=>({...r,phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Address",value:G.address,onChange:e=>J(r=>({...r,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"City",value:G.city,onChange:e=>J(r=>({...r,city:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{type:"text",placeholder:"State",value:G.state,onChange:e=>J(r=>({...r,state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"ZIP Code",value:G.zipCode,onChange:e=>J(r=>({...r,zipCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Country",value:G.country,onChange:e=>J(r=>({...r,country:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>B(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(!G.fullName||!G.address||!G.city||!G.country)return void O.oR.error("Please fill in all required fields");if(_.some(e=>e.id===G.id))V(e=>e.map(e=>e.id===G.id?G:e)),O.oR.success("Address updated successfully");else{let e={...G,id:Date.now().toString()};V(r=>[...r,e]),O.oR.success("Address added successfully")}J({id:"",fullName:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),B(!1)},className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:G.id?"Update Address":"Add Address"})]})]})})]}),"notifications"===U&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Notification Preferences"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Receive order updates and promotions via email"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:et.emailNotifications,onChange:e=>es(r=>({...r,emailNotifications:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Push Notifications"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Get instant notifications on your device"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:et.pushNotifications,onChange:e=>es(r=>({...r,pushNotifications:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Marketing Communications"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Receive promotional offers and newsletters"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:et.marketingCommunications,onChange:e=>es(r=>({...r,marketingCommunications:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("button",{onClick:el,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(P.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Sign Out"})]})})]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(f.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please login first"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You need to be authenticated to access settings"})]})})}},95997:(e,r,t)=>{"use strict";t.d(r,{G6:()=>n,HW:()=>u,Hh:()=>c,Jv:()=>o,eT:()=>g,gL:()=>p,qc:()=>x,xw:()=>d});var s=t(16203),a=t(35317),l=t(25610);let i=new s.HF;i.addScope("email"),i.addScope("profile");let n=async()=>{var e;try{let r=(await (0,s.df)(l.j2,i)).user;if(!(await (0,a.x7)((0,a.doc)(l.db,"users",r.uid))).exists()){let t={id:r.uid,email:r.email||"",name:r.displayName||"Anonymous",username:(null==(e=r.email)?void 0:e.split("@")[0])||"user",avatar:r.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(l.db,"users",r.uid),t)}return r}catch(e){throw console.error("Google sign-in error:",e),e}},o=async(e,r)=>{try{return(await (0,s.x9)(l.j2,e,r)).user}catch(e){throw e}},c=async function(e,r,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let n=(await (0,s.eJ)(l.j2,e,r)).user;await (0,s.r7)(n,{displayName:t});try{let r={id:n.uid,email:n.email||"",name:t,username:e.split("@")[0],avatar:n.photoURL||"",bio:"",role:i,accountType:i,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,a.BN)((0,a.doc)(l.db,"users",n.uid),r),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return n}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,s.J1)(l.j2,e)}catch(e){throw e}},u=()=>l.j2.currentUser,p=async e=>{try{let r=await (0,a.x7)((0,a.doc)(l.db,"users",e));if(r.exists())return r.data();return null}catch(e){return console.error("Error getting user data:",e),null}},f=async e=>{try{let r=await p(e);return(null==r?void 0:r.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},h=async e=>{try{let r=await p(e);return(null==r?void 0:r.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},x=async e=>"admin"===await f(e),g=async e=>["personal_seller","brand","company"].includes(await h(e))},98868:(e,r,t)=>{"use strict";t.d(r,{n:()=>o});var s=t(88693),a=t(35317),l=t(25610);let i=new Map,n=new Map,o=(0,s.vt)((e,r)=>({profile:null,loading:!1,error:null,fetchProfile:async r=>{var t,s;if(i.get(r))return void console.log("\uD83D\uDEAB BLOCKED: Already fetching profile for:",r);e({loading:!0,error:null});let o=n.get(r);if(o){console.log("\uD83D\uDCBE CACHE HIT: Using cached profile for:",r),e({profile:o,loading:!1,error:null});return}console.log("\uD83D\uDD0D Store: Starting fetchProfile for:",r);try{let o=await (0,a.x7)((0,a.doc)(l.db,"users",r));if(o.exists()){let a=o.data(),l=Object.assign(Object.assign({id:r,joinedAt:(null==(t=a.joinedAt)?void 0:t.toDate())||new Date,usernameLastChanged:null==(s=a.usernameLastChanged)?void 0:s.toDate()},a),{customPhotoURL:a.customPhotoURL||"",photoURL:a.photoURL||"",profilePic:a.profilePic||"",avatar:a.avatar||"",name:a.name&&"string"==typeof a.name&&a.name.trim()||"User",bio:a.bio&&"string"==typeof a.bio?a.bio.trim():"",followers:Array.isArray(a.followers)?a.followers:[],following:Array.isArray(a.following)?a.following:[]});console.log("✅ Store: Profile loaded successfully:",l.name,l.id),n.set(r,l),e({profile:l,loading:!1})}else console.log("❌ Store: Profile document does not exist for:",r),i.delete(r),e({profile:null,loading:!1,error:"Profile not found. This user may not exist or their profile may be private."})}catch(t){console.error("❌ Store: Firestore error:",t),i.delete(r),e({profile:null,loading:!1,error:"Failed to load profile. Please check your internet connection and try again."})}},subscribeToProfile:e=>(console.log("\uD83D\uDD14 Subscription disabled to prevent infinite loops for:",e),()=>{}),updateProfile:async(t,s)=>{try{await (0,a.mZ)((0,a.doc)(l.db,"users",t),s);let i=r().profile;i&&i.id===t&&e({profile:Object.assign(Object.assign({},i),s)})}catch(e){throw console.error("Error updating profile:",e),e}},createProfile:async(r,t)=>{try{let s=Object.assign(Object.assign({},t),{id:r,joinedAt:new Date});await (0,a.BN)((0,a.doc)(l.db,"users",r),s),e({profile:s,loading:!1,error:null})}catch(r){console.error("Error creating profile:",r),e({error:"Failed to create profile",loading:!1})}},followUser:async(t,s)=>{try{let i=(0,a.doc)(l.db,"users",t),n=(0,a.doc)(l.db,"users",s);await (0,a.mZ)(i,{following:(0,a.hq)(s)}),await (0,a.mZ)(n,{followers:(0,a.hq)(t)});let o=r().profile;if(o&&o.id===t){let r=Array.isArray(o.following)?o.following:[];e({profile:Object.assign(Object.assign({},o),{following:[...r.filter(e=>e!==s),s]})})}}catch(e){throw console.error("Error following user:",e),e}},unfollowUser:async(t,s)=>{try{let i=(0,a.doc)(l.db,"users",t),n=(0,a.doc)(l.db,"users",s);await (0,a.mZ)(i,{following:(0,a.C3)(s)}),await (0,a.mZ)(n,{followers:(0,a.C3)(t)});let o=r().profile;if(o&&o.id===t){let r=Array.isArray(o.following)?o.following:[];e({profile:Object.assign(Object.assign({},o),{following:r.filter(e=>e!==s)})})}}catch(e){throw console.error("Error unfollowing user:",e),e}},fetchUserAnalytics:async e=>{try{return{monthlySales:0,monthlyOrders:0,monthlyRefunds:0,topProducts:[]}}catch(e){throw console.error("Error fetching analytics:",e),e}},clearProfile:()=>{e({profile:null,loading:!1,error:null})},clearUserCache:e=>{n.delete(e),i.delete(e),console.log("\uD83D\uDDD1️ Cleared cache and tracker for:",e)}}))},99303:(e,r,t)=>{Promise.resolve().then(t.bind(t,72608))}},e=>{e.O(0,[2992,9507,1794,6671,8599,7194,6874,1426,8441,5964,7358],()=>e(e.s=99303)),_N_E=e.O()}]);