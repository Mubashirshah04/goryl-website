(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,8102],{25610:(e,a,s)=>{"use strict";s.d(a,{db:()=>h,j2:()=>u,storage:()=>m});var t=s(23915),r=s(16203),n=s(35317),l=s(90858),o=s(92144),i=s(81115),c=s(86864);let d=(0,t.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,r.xI)(d),h=(0,n.aU)(d);(0,i.C3)(d);let m=(0,l.c7)(d);(0,o.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},68084:(e,a,s)=>{"use strict";s.d(a,{useAuthStore:()=>o});var t=s(88693),r=s(16203),n=s(25610),l=s(95997);let o=(0,t.vt)((e,a)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:a=>e({user:a}),setUserData:a=>e({userData:a}),setLoading:a=>e({loading:a}),setUnsubscribeUserListener:a=>e({unsubscribeUserListener:a}),initialize:()=>(0,r.hg)(n.j2,async t=>{if(t)try{let r=await (0,l.gL)(t.uid),n=Object.assign(Object.assign({},t),{role:null==r?void 0:r.role});e({user:n,userData:r,loading:!1});let{doc:o,onSnapshot:i}=await Promise.resolve().then(s.bind(s,35317)),{db:c}=await Promise.resolve().then(s.bind(s,25610)),d=o(c,"users",t.uid),u=i(d,s=>{if(s.exists()){let t=s.data();e({userData:t,user:Object.assign(Object.assign({},a().user||{}),{role:t.role})})}});e({unsubscribeUserListener:u})}catch(a){console.error("Error fetching user data:",a),e({user:Object.assign(Object.assign({},t),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:s}=a();s&&(s(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:s}=a();if(s)try{let t=await (0,l.gL)(s.uid);e({userData:t,user:Object.assign(Object.assign({},a().user||{}),{role:null==t?void 0:t.role})}),setTimeout(async()=>{try{let t=await (0,l.gL)(s.uid);e({userData:t,user:Object.assign(Object.assign({},a().user||{}),{role:null==t?void 0:t.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{o.getState().initialize()},0)},85880:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(95155),r=s(12115),n=s(68084),l=s(60760),o=s(1978),i=s(17580),c=s(4516),d=s(47924),u=s(14186),h=s(38564),m=s(71366),p=s(12318),x=s(56671),g=s(6874),b=s.n(g);function y(){let{user:e}=(0,n.useAuthStore)(),[a,s]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[f,w]=(0,r.useState)(!0),[j,v]=(0,r.useState)(""),[N,C]=(0,r.useState)("all"),[A,k]=(0,r.useState)(!1),S=async()=>{w(!0);try{let e=[{id:"contact-1",name:"Sarah Johnson",username:"sarah_j",email:"sarah@example.com",phone:"+92 300 1234567",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=sarah",bio:"Fashion enthusiast and local seller",location:"Lahore, Pakistan",role:"personal_seller",followersCount:1250,followingCount:890,isVerified:!0,isOnline:!0,lastSeen:new Date,distance:2.5,mutualConnections:15},{id:"contact-2",name:"Ahmed Ali",username:"ahmed_tech",email:"ahmed@example.com",phone:"+92 301 2345678",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=ahmed",bio:"Tech seller and gadget enthusiast",location:"Karachi, Pakistan",role:"personal_seller",followersCount:2100,followingCount:1200,isVerified:!1,isOnline:!1,lastSeen:new Date(Date.now()-72e5),distance:5.2,mutualConnections:8},{id:"contact-3",name:"Fatima Khan",username:"fatima_beauty",email:"fatima@example.com",phone:"+92 302 3456789",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=fatima",bio:"Beauty products and cosmetics",location:"Islamabad, Pakistan",role:"brand",followersCount:5600,followingCount:2100,isVerified:!0,isOnline:!0,lastSeen:new Date,distance:1.8,mutualConnections:23},{id:"contact-4",name:"Hassan Sheikh",username:"hassan_food",email:"hassan@example.com",phone:"+92 303 4567890",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=hassan",bio:"Food delivery and restaurant owner",location:"Lahore, Pakistan",role:"company",followersCount:3200,followingCount:1500,isVerified:!0,isOnline:!1,lastSeen:new Date(Date.now()-18e5),distance:3.1,mutualConnections:12},{id:"contact-5",name:"Ayesha Malik",username:"ayesha_art",email:"ayesha@example.com",phone:"+92 304 5678901",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=ayesha",bio:"Artist and handmade crafts seller",location:"Lahore, Pakistan",role:"personal_seller",followersCount:890,followingCount:650,isVerified:!1,isOnline:!0,lastSeen:new Date,distance:.8,mutualConnections:6}];s(e),y(e.filter(e=>e.distance&&e.distance<5))}catch(e){console.error("Error getting contacts:",e),x.oR.error("Failed to load contacts")}finally{w(!1)}};(0,r.useEffect)(()=>{S()},[]);let L=a.filter(e=>!!(e.name.toLowerCase().includes(j.toLowerCase())||e.username.toLowerCase().includes(j.toLowerCase()))&&("all"===N||("online"===N?e.isOnline:"nearby"===N?e.distance&&e.distance<5:"sellers"!==N||"personal_seller"===e.role||"brand"===e.role||"company"===e.role)));return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,t.jsx)(i.A,{className:"w-6 h-6 text-purple-600"}),(0,t.jsx)("span",{children:"Contacts"})]}),(0,t.jsx)("button",{onClick:()=>k(!0),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(c.A,{className:"w-5 h-5 text-gray-600"})})]})})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search contacts...",value:j,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),(0,t.jsx)("div",{className:"flex space-x-2 mb-6 overflow-x-auto",children:[{key:"all",label:"All Contacts",icon:i.A},{key:"online",label:"Online",icon:u.A},{key:"nearby",label:"Nearby",icon:c.A},{key:"sellers",label:"Sellers",icon:h.A}].map(e=>{let{key:a,label:s,icon:r}=e;return(0,t.jsxs)("button",{onClick:()=>C(a),className:"flex items-center space-x-2 px-4 py-2 rounded-full whitespace-nowrap transition-colors ".concat(N===a?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(r,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:s})]},a)})}),(0,t.jsx)(l.N,{children:A&&(0,t.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)(o.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.A,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Enable Location Access"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Allow location access to find nearby contacts and sellers in your area."}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{x.oR.success("Location permission granted"),k(!1),S()},e=>{console.error("Error getting location:",e),x.oR.error("Location permission denied")}):x.oR.error("Geolocation is not supported by this browser")},className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Allow"})]})]})})})}),f&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}),(0,t.jsx)(l.N,{children:L.length>0?(0,t.jsx)("div",{className:"space-y-4",children:L.map(e=>(0,t.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e.photoURL,alt:e.name,width:"56",height:"56",className:"rounded-full"}),e.isOnline&&(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"}),e.isVerified&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-xs",children:"✓"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsx)("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full",children:e.role})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["@",e.username]}),e.bio&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:e.bio}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.location})]}),e.distance&&(0,t.jsxs)("span",{children:[e.distance,"km away"]}),(0,t.jsxs)("span",{children:[e.mutualConnections," mutual"]}),!e.isOnline&&(0,t.jsxs)("span",{children:["Last seen ",(e=>{let a=Math.floor((new Date().getTime()-e.getTime())/6e4);return a<1?"Just now":a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):"".concat(Math.floor(a/1440),"d ago")})(e.lastSeen)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{window.location.href="/chat?user=".concat(e.id)},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Message",children:(0,t.jsx)(m.A,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsx)("button",{onClick:()=>{x.oR.success("Following ".concat(e.name))},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Follow",children:(0,t.jsx)(p.A,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsx)(b(),{href:"/profile/".concat(e.id),className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:"View Profile"})]})]})},e.id))}):!f&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No contacts found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:j?"Try adjusting your search terms":"Start connecting with people around you"}),(0,t.jsx)(b(),{href:"/search-users",className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Find People"})]})})]})]})}},87635:(e,a,s)=>{Promise.resolve().then(s.bind(s,85880))},95997:(e,a,s)=>{"use strict";s.d(a,{G6:()=>o,HW:()=>u,Hh:()=>c,Jv:()=>i,eT:()=>g,gL:()=>h,qc:()=>x,xw:()=>d});var t=s(16203),r=s(35317),n=s(25610);let l=new t.HF;l.addScope("email"),l.addScope("profile");let o=async()=>{var e;try{let a=(await (0,t.df)(n.j2,l)).user;if(!(await (0,r.x7)((0,r.doc)(n.db,"users",a.uid))).exists()){let s={id:a.uid,email:a.email||"",name:a.displayName||"Anonymous",username:(null==(e=a.email)?void 0:e.split("@")[0])||"user",avatar:a.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,r.BN)((0,r.doc)(n.db,"users",a.uid),s)}return a}catch(e){throw console.error("Google sign-in error:",e),e}},i=async(e,a)=>{try{return(await (0,t.x9)(n.j2,e,a)).user}catch(e){throw e}},c=async function(e,a,s){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let o=(await (0,t.eJ)(n.j2,e,a)).user;await (0,t.r7)(o,{displayName:s});try{let a={id:o.uid,email:o.email||"",name:s,username:e.split("@")[0],avatar:o.photoURL||"",bio:"",role:l,accountType:l,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,r.BN)((0,r.doc)(n.db,"users",o.uid),a),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return o}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,t.J1)(n.j2,e)}catch(e){throw e}},u=()=>n.j2.currentUser,h=async e=>{try{let a=await (0,r.x7)((0,r.doc)(n.db,"users",e));if(a.exists())return a.data();return null}catch(e){return console.error("Error getting user data:",e),null}},m=async e=>{try{let a=await h(e);return(null==a?void 0:a.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},p=async e=>{try{let a=await h(e);return(null==a?void 0:a.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},x=async e=>"admin"===await m(e),g=async e=>["personal_seller","brand","company"].includes(await p(e))}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,6874,2529,8441,5964,7358],()=>e(e.s=87635)),_N_E=e.O()}]);