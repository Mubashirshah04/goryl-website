(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,6434],{1796:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r=a(95155),t=a(12115),l=a(68084),i=a(60760),o=a(1978),n=a(54416),c=a(47924),d=a(17580),u=a(71007),m=a(4516),h=a(56671),x=a(6874),p=a.n(x),g=a(35317),f=a(25610);function b(){let{user:e}=(0,l.useAuthStore)(),[s,a]=(0,t.useState)(""),[x,b]=(0,t.useState)([]),[y,w]=(0,t.useState)(!1),[j,v]=(0,t.useState)("all"),[N,A]=(0,t.useState)([]),C=async s=>{if(!s.trim())return void b([]);w(!0);try{let a=(0,g.collection)(f.db,"users"),r=s(a,(0,g.where)("name",">=",s),(0,g.where)("name","<=",s+""),(0,g.My)("name"),(0,g.AB)(20)),t=await (0,g.getDocs)(r),l=[];t.forEach(s=>{let a=s.data();if(s.id!==(null==e?void 0:e.uid)){var r;l.push({id:s.id,name:a.name||"Unknown",username:a.username||(null==(r=a.email)?void 0:r.split("@")[0])||"unknown",email:a.email||"",photoURL:a.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(a.name),bio:a.bio||"",location:a.location||"",role:a.role||"user",followersCount:a.followersCount||0,followingCount:a.followingCount||0,isVerified:a.isVerified||!1})}});let i=s(a,(0,g.where)("username",">=",s),(0,g.where)("username","<=",s+""),(0,g.My)("username"),(0,g.AB)(20));(await (0,g.getDocs)(i)).forEach(s=>{let a=s.data();if(s.id!==(null==e?void 0:e.uid)&&!l.find(e=>e.id===s.id)){var r;l.push({id:s.id,name:a.name||"Unknown",username:a.username||(null==(r=a.email)?void 0:r.split("@")[0])||"unknown",email:a.email||"",photoURL:a.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(a.name),bio:a.bio||"",location:a.location||"",role:a.role||"user",followersCount:a.followersCount||0,followingCount:a.followingCount||0,isVerified:a.isVerified||!1})}}),b(l)}catch(e){console.error("Error searching users:",e),h.oR.error("Failed to search users")}finally{w(!1)}},U=async()=>{w(!0);try{A([{id:"nearby-1",name:"Sarah Johnson",username:"sarah_j",email:"sarah@example.com",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=sarah",bio:"Fashion enthusiast and local seller",location:"Lahore, Pakistan",role:"personal_seller",followersCount:1250,followingCount:890,isVerified:!0},{id:"nearby-2",name:"Ahmed Ali",username:"ahmed_tech",email:"ahmed@example.com",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=ahmed",bio:"Tech seller and gadget enthusiast",location:"Karachi, Pakistan",role:"personal_seller",followersCount:2100,followingCount:1200,isVerified:!1},{id:"nearby-3",name:"Fatima Khan",username:"fatima_beauty",email:"fatima@example.com",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=fatima",bio:"Beauty products and cosmetics",location:"Islamabad, Pakistan",role:"brand",followersCount:5600,followingCount:2100,isVerified:!0}])}catch(e){console.error("Error getting nearby users:",e)}finally{w(!1)}};(0,t.useEffect)(()=>{if(s.trim()){let e=setTimeout(()=>{C(s)},500);return()=>clearTimeout(e)}b([])},[s]),(0,t.useEffect)(()=>{U()},[]);let k=x.filter(e=>"all"===j||("sellers"===j?"personal_seller"===e.role:"brands"===j?"brand"===e.role:"companies"!==j||"company"===e.role)),S=N.filter(e=>"all"===j||("sellers"===j?"personal_seller"===e.role:"brands"===j?"brand"===e.role:"companies"!==j||"company"===e.role));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(p(),{href:"/",className:"p-2 hover:bg-gray-100 rounded-full",children:(0,r.jsx)(n.A,{className:"w-6 h-6 text-gray-600"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Search Users"})]})})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 mb-6",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{type:"text",placeholder:"Search users by name or username...",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),(0,r.jsx)("div",{className:"flex space-x-2 mb-6 overflow-x-auto",children:[{key:"all",label:"All Users",icon:d.A},{key:"sellers",label:"Sellers",icon:u.A},{key:"brands",label:"Brands",icon:u.A},{key:"companies",label:"Companies",icon:u.A}].map(e=>{let{key:s,label:a,icon:t}=e;return(0,r.jsxs)("button",{onClick:()=>v(s),className:"flex items-center space-x-2 px-4 py-2 rounded-full whitespace-nowrap transition-colors ".concat(j===s?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:[(0,r.jsx)(t,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:a})]},s)})}),y&&(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}),s&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Search Results (",k.length,")"]}),(0,r.jsx)(i.N,{children:k.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(e=>(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e.photoURL,alt:e.name,width:"48",height:"48",className:"rounded-full",referrerPolicy:"no-referrer"}),e.isVerified&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs",children:"✓"})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,r.jsx)("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full",children:e.role})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["@",e.username]}),e.bio&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.bio}),e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,r.jsx)(m.A,{className:"w-3 h-3 text-gray-400"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.location})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[e.followersCount," followers"]}),(0,r.jsxs)("span",{children:[e.followingCount," following"]})]})]}),(0,r.jsx)(p(),{href:"/profile/".concat(e.id),className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:"View Profile"})]})},e.id))}):!y&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(u.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No users found matching your search"})]})})]}),!s&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 text-purple-600"}),(0,r.jsx)("span",{children:"Nearby Users"})]}),(0,r.jsx)(i.N,{children:S.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(e=>(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e.photoURL,alt:e.name,width:"48",height:"48",className:"rounded-full",referrerPolicy:"no-referrer"}),e.isVerified&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs",children:"✓"})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,r.jsx)("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full",children:e.role})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["@",e.username]}),e.bio&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.bio}),e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,r.jsx)(m.A,{className:"w-3 h-3 text-gray-400"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.location})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[e.followersCount," followers"]}),(0,r.jsxs)("span",{children:[e.followingCount," following"]})]})]}),(0,r.jsx)(p(),{href:"/profile/".concat(e.id),className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:"View Profile"})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(m.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No nearby users found"})]})})]})]})]})}},25610:(e,s,a)=>{"use strict";a.d(s,{db:()=>m,j2:()=>u,storage:()=>h});var r=a(23915),t=a(16203),l=a(35317),i=a(90858),o=a(92144),n=a(81115),c=a(86864);let d=(0,r.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,t.xI)(d),m=(0,l.aU)(d);(0,n.C3)(d);let h=(0,i.c7)(d);(0,o.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},68084:(e,s,a)=>{"use strict";a.d(s,{useAuthStore:()=>o});var r=a(88693),t=a(16203),l=a(25610),i=a(95997);let o=(0,r.vt)((e,s)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:s=>e({user:s}),setUserData:s=>e({userData:s}),setLoading:s=>e({loading:s}),setUnsubscribeUserListener:s=>e({unsubscribeUserListener:s}),initialize:()=>(0,t.hg)(l.j2,async r=>{if(r)try{let t=await (0,i.gL)(r.uid),l=Object.assign(Object.assign({},r),{role:null==t?void 0:t.role});e({user:l,userData:t,loading:!1});let{doc:o,onSnapshot:n}=await Promise.resolve().then(a.bind(a,35317)),{db:c}=await Promise.resolve().then(a.bind(a,25610)),d=o(c,"users",r.uid),u=n(d,a=>{if(a.exists()){let r=a.data();e({userData:r,user:Object.assign(Object.assign({},s().user||{}),{role:r.role})})}});e({unsubscribeUserListener:u})}catch(s){console.error("Error fetching user data:",s),e({user:Object.assign(Object.assign({},r),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:a}=s();a&&(a(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:a}=s();if(a)try{let r=await (0,i.gL)(a.uid);e({userData:r,user:Object.assign(Object.assign({},s().user||{}),{role:null==r?void 0:r.role})}),setTimeout(async()=>{try{let r=await (0,i.gL)(a.uid);e({userData:r,user:Object.assign(Object.assign({},s().user||{}),{role:null==r?void 0:r.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{o.getState().initialize()},0)},87651:(e,s,a)=>{Promise.resolve().then(a.bind(a,1796))},95997:(e,s,a)=>{"use strict";a.d(s,{G6:()=>o,HW:()=>u,Hh:()=>c,Jv:()=>n,eT:()=>g,gL:()=>m,qc:()=>p,xw:()=>d});var r=a(16203),t=a(35317),l=a(25610);let i=new r.HF;i.addScope("email"),i.addScope("profile");let o=async()=>{var e;try{let s=(await (0,r.df)(l.j2,i)).user;if(!(await (0,t.x7)((0,t.doc)(l.db,"users",s.uid))).exists()){let a={id:s.uid,email:s.email||"",name:s.displayName||"Anonymous",username:(null==(e=s.email)?void 0:e.split("@")[0])||"user",avatar:s.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,t.BN)((0,t.doc)(l.db,"users",s.uid),a)}return s}catch(e){throw console.error("Google sign-in error:",e),e}},n=async(e,s)=>{try{return(await (0,r.x9)(l.j2,e,s)).user}catch(e){throw e}},c=async function(e,s,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let o=(await (0,r.eJ)(l.j2,e,s)).user;await (0,r.r7)(o,{displayName:a});try{let s={id:o.uid,email:o.email||"",name:a,username:e.split("@")[0],avatar:o.photoURL||"",bio:"",role:i,accountType:i,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,t.BN)((0,t.doc)(l.db,"users",o.uid),s),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return o}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,r.J1)(l.j2,e)}catch(e){throw e}},u=()=>l.j2.currentUser,m=async e=>{try{let s=await (0,t.x7)((0,t.doc)(l.db,"users",e));if(s.exists())return s.data();return null}catch(e){return console.error("Error getting user data:",e),null}},h=async e=>{try{let s=await m(e);return(null==s?void 0:s.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},x=async e=>{try{let s=await m(e);return(null==s?void 0:s.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},p=async e=>"admin"===await h(e),g=async e=>["personal_seller","brand","company"].includes(await x(e))}},e=>{e.O(0,[2992,9507,1794,6899,6671,8599,7194,6874,5432,8441,5964,7358],()=>e(e.s=87651)),_N_E=e.O()}]);