(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{18315:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,65356,23)),Promise.resolve().then(t.t.bind(t,30347,23)),Promise.resolve().then(t.bind(t,82019)),Promise.resolve().then(t.bind(t,69015))},30347:()=>{},69015:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>l});var s=t(95155),a=t(51362);function l(e){let{children:r}=e;return(0,s.jsx)(a.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:r})}t(12115)},76766:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(95155),a=t(12115);function l(e){let{user:r,size:t=128,className:l=""}=e,[o,i]=(0,a.useState)(!1),[n,c]=(0,a.useState)(!0),[d,x]=(0,a.useState)("");(0,a.useEffect)(()=>{i(!1),c(!0);let e=(null==r?void 0:r.customPhotoURL)||(null==r?void 0:r.photoURL)||(null==r?void 0:r.profilePic)||(null==r?void 0:r.avatar)||"";if(!e){x("https://api.dicebear.com/7.x/avataaars/svg?seed=Default"),c(!1);return}e.includes("firebasestorage.googleapis.com")||e.includes("firebasestorage.app")||e.includes("googleusercontent.com"),x(e),c(!1)},[r]);let u=o?"https://api.dicebear.com/7.x/avataaars/svg?seed=Default":d||"https://api.dicebear.com/7.x/avataaars/svg?seed=Default";return(0,s.jsxs)("div",{className:"relative",style:{width:t,height:t},children:[(0,s.jsx)("img",{src:u,alt:(null==r?void 0:r.name)||"Profile",width:t,height:t,onLoad:()=>{console.log("Profile image loaded successfully:",u),c(!1)},onError:e=>{console.log("Profile image failed to load:",{src:e.target.src,user:(null==r?void 0:r.name)||"Unknown user"}),i(!0),c(!1)},referrerPolicy:"no-referrer",className:"".concat(l," ").concat(n?"opacity-0":"opacity-100"," absolute inset-0 w-full h-full object-cover")}),n&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-200 rounded-full",style:{width:t,height:t}})]})}},82019:(e,r,t)=>{"use strict";t.d(r,{Layout:()=>G});var s=t(95155),a=t(12115),l=t(51362),o=t(35695),i=t(6874),n=t.n(i),c=t(47924),d=t(71366),x=t(71007),u=t(27809),h=t(68084),m=t(66935),p=t(98868),g=t(60760),f=t(1978),b=t(16203),y=t(25610),v=t(56671),j=t(11518),w=t.n(j),N=t(17580),k=t(54416),U=t(44020),C=t(99424),S=t(12486),A=t(29700),P=t(35317),R=t(12318),L=t(38564),E=t(76766);function D(e){let{currentUserId:r,onStartChat:t,onFollow:l,followingStatus:o=new Map}=e,[i,n]=(0,a.useState)(""),[x,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[b,j]=(0,a.useState)("search"),w=async e=>{if(!e.trim())return void u([]);g(!0);try{let t=(0,P.collection)(y.db,"users"),s=(await (0,P.getDocs)(t)).docs.map(e=>{let r=e.data(),t=(r.name||r.displayName||"Unknown User").replace(/dkjArdF4Q9P4Wx2Nl7nfnt6O5Rn1aNnliXy7QFYKFDwjPfrvDXJkTbm1/g,"").trim()||"User";return{id:e.id,...r,name:t}}).filter(t=>{var s,a,l;if(t.id===r)return!1;let o=(null==(s=t.name)?void 0:s.toLowerCase())||"",i=(null==(a=t.email)?void 0:a.toLowerCase())||"",n=(null==(l=t.displayName)?void 0:l.toLowerCase())||"",c=e.toLowerCase();return o.includes(c)||i.includes(c)||n.includes(c)}).filter((e,r,t)=>r===t.findIndex(r=>r.id===e.id)&&(!e.photoURL||!e.photoURL.includes("example.com"))).map(e=>{var r,t;return{id:e.id,name:e.name,username:e.username||(null==(r=e.displayName)?void 0:r.toLowerCase().replace(/\s+/g,""))||(null==(t=e.email)?void 0:t.split("@")[0])||"user",email:e.email||"",customPhotoURL:e.customPhotoURL||"",photoURL:e.photoURL||"",profilePic:e.profilePic||"",avatar:e.avatar||"",isOnline:Math.random()>.5,lastSeen:new Date(Date.now()-24*Math.random()*36e5)}});u(s)}catch(e){console.error("Error searching users:",e),v.oR.error("Failed to search users"),u([])}finally{g(!1)}};a.useEffect(()=>{(async()=>{try{let e=(0,P.collection)(y.db,"users"),t=(await (0,P.getDocs)(e)).docs.map(e=>{let r=e.data(),t=(r.name||r.displayName||"Unknown User").replace(/dkjArdF4Q9P4Wx2Nl7nfnt6O5Rn1aNnliXy7QFYKFDwjPfrvDXJkTbm1/g,"").trim()||"User";return{id:e.id,...r,name:t}}).filter(e=>e.id!==r).filter((e,r,t)=>r===t.findIndex(r=>r.id===e.id)&&(!e.photoURL||!e.photoURL.includes("example.com"))).map(e=>({id:e.id,name:e.name,customPhotoURL:e.customPhotoURL||"",photoURL:e.photoURL||"",profilePic:e.profilePic||"",avatar:e.avatar||"",mutualFriends:Math.floor(5*Math.random()),isVerified:Math.random()>.7}));m(t)}catch(e){console.error("Error loading suggested users:",e)}})()},[r]);let k=e=>{if(o.get(e))return void v.oR.info("You are already following this user");l(e)};return(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Find People"}),(0,s.jsxs)("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[(0,s.jsxs)("button",{onClick:()=>j("search"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("search"===b?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"),children:[(0,s.jsx)(c.A,{className:"w-4 h-4 inline mr-2"}),"Search"]}),(0,s.jsxs)("button",{onClick:()=>j("suggested"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("suggested"===b?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"),children:[(0,s.jsx)(N.A,{className:"w-4 h-4 inline mr-2"}),"Suggested"]})]})]}),"search"===b&&(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, or username...",value:i,onChange:e=>{n(e.target.value),w(e.target.value)},className:"w-full pl-10 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),p&&(0,s.jsx)("div",{className:"flex justify-center py-4",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-400"})}),x.length>0&&(0,s.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:x.map(e=>(0,s.jsxs)(f.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center space-x-4 p-4 bg-white/10 rounded-xl hover:bg-white/20 transition-colors",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(E.A,{user:{customPhotoURL:e.customPhotoURL,photoURL:e.photoURL,profilePic:e.profilePic,avatar:e.avatar,name:e.name},size:48,className:"rounded-full"}),e.isOnline&&(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-white",children:e.name||"User"}),(0,s.jsxs)("p",{className:"text-sm text-gray-300",children:["@",e.username]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:e.email})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>k(e.id),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors flex items-center space-x-1 disabled:opacity-50",disabled:o.get(e.id),children:[(0,s.jsx)(R.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:o.get(e.id)?"Following":"Follow"})]}),(0,s.jsxs)("button",{onClick:()=>t(e.id,e.name,e.photoURL),className:"bg-purple-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors flex items-center space-x-1",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Chat"})]})]})]},e.id))}),i&&0===x.length&&!p&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.A,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsx)("p",{className:"text-gray-300 text-lg",children:"No users found"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Try searching with different keywords"})]})]}),"suggested"===b&&(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>(0,s.jsxs)(f.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/10 rounded-xl p-4 hover:bg-white/20 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(E.A,{user:{customPhotoURL:e.customPhotoURL,photoURL:e.photoURL,profilePic:e.profilePic,avatar:e.avatar,name:e.name},size:40,className:"rounded-full"}),e.isVerified&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(L.A,{className:"w-3 h-3 text-white"})})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name||"User"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.mutualFriends," mutual friends"]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,s.jsx)("button",{onClick:()=>k(e.id),className:"flex-1 bg-blue-600 text-white py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:o.get(e.id),children:o.get(e.id)?"Following":"Follow"}),(0,s.jsx)("button",{onClick:()=>t(e.id,e.name,e.photoURL),className:"flex-1 bg-purple-600 text-white py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors",children:"Chat"})]})]},e.id))}),0===h.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(N.A,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsx)("p",{className:"text-gray-300 text-lg",children:"No suggestions yet"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"We'll show you people you might know"})]})]})]})}function F(e){var r,t,l,o,i,n,x,u,m,p,g,b;let{isOpen:j,onClose:R}=e,{user:L}=(0,h.useAuthStore)(),[E,F]=(0,a.useState)([]),[M,I]=(0,a.useState)(null),[O,T]=(0,a.useState)([]),[z,W]=(0,a.useState)(""),[_,B]=(0,a.useState)(!1),[H,Z]=(0,a.useState)(""),[V,q]=(0,a.useState)(!1),[Y,Q]=(0,a.useState)(new Set),[J,X]=(0,a.useState)(!1),[K,$]=(0,a.useState)(!1),[G,ee]=(0,a.useState)(!1),[er,et]=(0,a.useState)("chats"),[es,ea]=(0,a.useState)(!1),el=(0,a.useRef)(null),[eo,ei]=(0,a.useState)(new Map),[en,ec]=(0,a.useState)(new Map),[ed,ex]=(0,a.useState)(new Map),[eu,eh]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{ee(!0)},[]),(0,a.useEffect)(()=>{if(!L||!G)return;let e=async e=>{try{let r={userId:L.uid,isOnline:e,lastSeen:new Date},t=(0,P.doc)(y.db,"userPresence",L.uid);await (0,P.BN)(t,r,{merge:!0}),console.log("Presence updated successfully for user:",L.uid,r)}catch(e){console.error("Error updating presence for user:",L.uid,e)}};return j&&e(!0),()=>{j&&L&&e(!1)}},[L,j,G]),(0,a.useEffect)(()=>{if(!E.length||!j||!G)return;let e=[];return E.forEach(r=>{var t;if(null==(t=r.otherUser)?void 0:t.id){let t=(0,P.doc)(y.db,"userPresence",r.otherUser.id),s=(0,P.onSnapshot)(t,e=>{if(e.exists()){let t=e.data();ei(e=>{let s=new Map(e);return s.set(r.otherUser.id,{userId:t.userId,isOnline:t.isOnline,lastSeen:t.lastSeen}),s})}});e.push(s)}}),()=>{e.forEach(e=>e())}},[E,j,G]),(0,a.useEffect)(()=>{var e;if(!(null==M||null==(e=M.otherUser)?void 0:e.id)||!j||!G)return;let r=(0,P.doc)(y.db,"userPresence",M.otherUser.id),t=(0,P.onSnapshot)(r,e=>{if(e.exists()){let r=e.data();ei(e=>{let t=new Map(e);return t.set(M.otherUser.id,{userId:r.userId,isOnline:r.isOnline,lastSeen:r.lastSeen}),t})}});return()=>t()},[M,j,G]);let em=async(e,r,t)=>{if(L)try{let s=E.find(r=>{var t;return(null==(t=r.otherUser)?void 0:t.id)===e});if(s){I(s),q(!1),et("chat"),v.oR.success("Opened chat with ".concat(r));return}let a={id:await (0,A.Dg)(L.uid,e),participants:[L.uid,e],lastMessage:null,lastMessageTime:null,otherUser:{id:e,name:r,photoURL:t||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent(r.trim()))}};I(a),F(e=>[a,...e]),q(!1),et("chat"),v.oR.success("Started chat with ".concat(r))}catch(e){console.error("Error starting chat:",e),v.oR.error("Failed to start chat")}},ep=async e=>{if(M&&L)try{await (0,A._z)(M.id,L.uid,e,L.displayName||"User"),v.oR.success("Reaction sent!")}catch(e){console.error("Error sending reaction:",e),v.oR.error("Failed to send reaction")}},eg=["❤️","\uD83D\uDE02","\uD83D\uDC4D","\uD83D\uDE2E","\uD83D\uDE22","\uD83D\uDE21"],ef=async e=>{if(!L)return!1;try{let r=await (0,A.At)(L.uid,e);return ec(t=>new Map(t).set(e,r)),r}catch(e){return console.error("Error checking follow status:",e),!1}},eb=async(e,r)=>{if(L)try{if(en.get(e))return void v.oR.info("You are already following ".concat(r));eh(r=>new Set(r).add(e));let t=ed.get(L.uid)||{followers:0,following:0},s=ed.get(e)||{followers:0,following:0};ec(r=>new Map(r).set(e,!0)),ex(r=>{let a=new Map(r);return a.set(L.uid,{followers:t.followers,following:t.following+1}),a.set(e,{followers:s.followers+1,following:s.following}),a});let a=E.map(r=>{var t;return(null==(t=r.otherUser)?void 0:t.id)===e?{...r,otherUser:{...r.otherUser,isFollowed:!0}}:r});F(a),await (0,A.pV)(L.uid,e),v.oR.success("Followed ".concat(r," successfully!"))}catch(r){ec(r=>new Map(r).set(e,!1)),eh(r=>{let t=new Set(r);return t.delete(e),t}),console.error("Error following user:",r),v.oR.error("Failed to follow user")}},ey=async(e,r)=>{if(L)try{if(!en.get(e))return void v.oR.info("You are not following ".concat(r));eh(r=>{let t=new Set(r);return t.delete(e),t});let t=ed.get(L.uid)||{followers:0,following:0},s=ed.get(e)||{followers:0,following:0};ec(r=>new Map(r).set(e,!1)),ex(r=>{let a=new Map(r);return a.set(L.uid,{followers:t.followers,following:Math.max(0,t.following-1)}),a.set(e,{followers:Math.max(0,s.followers-1),following:s.following}),a});let a=E.map(r=>{var t;return(null==(t=r.otherUser)?void 0:t.id)===e?{...r,otherUser:{...r.otherUser,isFollowed:!1}}:r});F(a),await (0,A.Qt)(L.uid,e),v.oR.success("Unfollowed ".concat(r," successfully!"))}catch(r){ec(r=>new Map(r).set(e,!0)),eh(r=>new Set(r).add(e)),console.error("Error unfollowing user:",r),v.oR.error("Failed to unfollow user")}},ev=async(e,r)=>{en.get(e)?await ey(e,r):await eb(e,r)},ej=async e=>{if(L)try{let t="User";for(let s of E){var r;if((null==(r=s.otherUser)?void 0:r.id)===e){t=s.otherUser.name||"User";break}}await eb(e,t)}catch(e){console.error("Error following from search:",e),v.oR.error("Failed to follow user")}};(0,a.useEffect)(()=>{L&&j&&G&&(async()=>{try{let e=await (0,A.VN)(L.uid),r=await Promise.all(e.map(async e=>{var r;let t=null==(r=e.participants)?void 0:r.find(e=>e!==L.uid);if(t)try{let r=await (0,A.YE)("users",t),s=await ef(t);return{...e,otherUser:r?{id:r.id,name:r.name||r.displayName||"Unknown User",photoURL:r.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent((r.name||r.displayName||"user").trim())),isFollowed:s}:void 0}}catch(e){console.error("Error fetching user:",e)}return e}));F(r)}catch(e){console.error("Error loading chats:",e),"permission-denied"===e.code?v.oR.error("Please check your Firestore security rules for chats collection"):v.oR.error("Failed to load chats"),F([])}})()},[L,j]);let ew=async e=>{if(e.preventDefault(),z.trim()&&M&&L&&!_){B(!0);try{await (0,A._z)(M.id,L.uid,z.trim(),L.displayName||"User"),W("")}catch(e){console.error("Error sending message:",e),v.oR.error("Failed to send message")}finally{B(!1)}}},eN=E.filter(e=>{var r;return null==(r=e.otherUser)?void 0:r.name.toLowerCase().includes(H.toLowerCase())}),ek=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return((0,a.useEffect)(()=>{O.length>0&&el.current&&el.current.scrollIntoView({behavior:"instant"})},[O]),(0,a.useEffect)(()=>{z&&el.current&&el.current.scrollIntoView({behavior:"instant"})},[z]),(0,a.useEffect)(()=>{if(!E.length||!j||!G||!L)return;let e=[];return E.forEach(r=>{var t;if(null==(t=r.otherUser)?void 0:t.id){let t=(0,A.wx)(r.otherUser.id,e=>{ex(t=>{let s=new Map(t);return s.set(r.otherUser.id,e),s})}),s=(0,A.lk)(L.uid,r.otherUser.id,e=>{ec(t=>{let s=new Map(t);return s.set(r.otherUser.id,e),s}),F(t=>t.map(t=>{var s,a;return(null==(s=t.otherUser)?void 0:s.id)===(null==(a=r.otherUser)?void 0:a.id)&&t.otherUser?{...t,otherUser:{...t.otherUser,isFollowed:e}}:t}))});e.push(t),e.push(s)}}),()=>{e.forEach(e=>e())}},[E,j,G,L]),(0,a.useEffect)(()=>{if(!L||!j||!G)return;let e=(0,A.wx)(L.uid,e=>{ex(r=>{let t=new Map(r);return t.set(L.uid,e),t})});return()=>e()},[L,j,G]),j)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,s.jsxs)(f.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg w-full max-w-5xl h-[85vh] flex flex-col",children:[(0,s.jsx)(w(),{id:"4198319ec94a7ce",children:".scrollbar-hidden.jsx-4198319ec94a7ce::-webkit-scrollbar{display:none}.scrollbar-hidden.jsx-4198319ec94a7ce{-ms-overflow-style:none;scrollbar-width:none}@media(max-width:768px){.mobile-fullscreen.jsx-4198319ec94a7ce{width:100vw!important;height:100vh!important;max-width:none!important;border-radius:0!important;margin:0!important}}"}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center justify-between p-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-3",children:[(0,s.jsx)(d.A,{className:"w-6 h-6 text-purple-600"}),(0,s.jsx)("h2",{className:"jsx-4198319ec94a7ce text-lg font-semibold",children:"Messages"})]}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{ea(!es)},title:es?"Show sidebar":"Hide sidebar",className:"jsx-4198319ec94a7ce p-2 rounded-lg transition-colors text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:es?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-4198319ec94a7ce"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-4198319ec94a7ce"})})}),(0,s.jsx)("button",{onClick:()=>q(!V),title:"Find new contacts",className:"jsx-4198319ec94a7ce "+"p-2 rounded-lg transition-colors ".concat(V?"bg-purple-100 text-purple-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:(0,s.jsx)(N.A,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:R,className:"jsx-4198319ec94a7ce text-gray-500 hover:text-gray-700 transition-colors p-2 rounded-lg hover:bg-gray-100",children:(0,s.jsx)(k.A,{className:"w-5 h-5"})})]})]}),V&&(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce p-4 border-b border-gray-200 bg-gray-50",children:(0,s.jsx)(D,{currentUserId:(null==L?void 0:L.uid)||"",onStartChat:em,onFollow:ej,followingStatus:en})}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce "+"border-r border-gray-200 flex flex-col transition-all duration-300 ".concat(es?"w-0 md:w-0 overflow-hidden":"w-full md:w-1/3"," ").concat(window.innerWidth<768&&"chat"===er?"hidden":""),children:[(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce p-3 border-b border-gray-200 bg-white",children:(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search conversations...",value:H,onChange:e=>Z(e.target.value),className:"jsx-4198319ec94a7ce w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 overflow-y-auto bg-white scrollbar-hidden",children:0===eN.length?(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce p-4 text-center text-gray-500",children:[(0,s.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:"No conversations yet"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs",children:"Use the search feature to find people to chat with"})]}):eN.map(e=>{var r,t,a,l;return(0,s.jsx)(f.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},onClick:()=>{I(e),window.innerWidth<768&&et("chat")},className:"p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ".concat((null==M?void 0:M.id)===e.id?"bg-gray-100":""),children:(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce relative flex-shrink-0",children:(0,s.jsx)("img",{src:(null==(r=e.otherUser)?void 0:r.photoURL)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat((null==(t=e.otherUser)?void 0:t.name)||"user"),alt:(null==(a=e.otherUser)?void 0:a.name)||"User",width:"40",height:"40",referrerPolicy:"no-referrer",className:"jsx-4198319ec94a7ce rounded-full"})}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"jsx-4198319ec94a7ce font-medium text-gray-900 truncate text-sm",children:(null==(l=e.otherUser)?void 0:l.name)||"Unknown User"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-500 truncate",children:e.lastMessage||"No messages yet"}),e.lastMessageTime&&(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-400 mt-1",children:ek(e.lastMessageTime)})]})]})},e.id)})})]}),(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce "+"flex-1 flex flex-col transition-all duration-300 ".concat(es?"w-full md:w-full":"w-full md:w-2/3"," ").concat(window.innerWidth<768&&"chats"===er?"hidden":""),children:M?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center justify-between p-3 md:p-4 border-b border-gray-200 bg-white",children:[(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-2 md:space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{I(null),et("chats")},className:"jsx-4198319ec94a7ce md:hidden p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-4198319ec94a7ce h-5 w-5 text-gray-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-4198319ec94a7ce"})})}),(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce relative flex-shrink-0",children:(0,s.jsx)("img",{src:(null==(r=M.otherUser)?void 0:r.photoURL)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat((null==(t=M.otherUser)?void 0:t.name)||"user"),alt:(null==(l=M.otherUser)?void 0:l.name)||"User",width:"32",height:"32",referrerPolicy:"no-referrer",className:"jsx-4198319ec94a7ce rounded-full"})}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce",children:[(0,s.jsx)("h3",{className:"jsx-4198319ec94a7ce font-medium text-gray-900 text-sm md:text-base",children:(null==(o=M.otherUser)?void 0:o.name)||"Unknown User"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs text-gray-500",children:(null==(i=eo.get((null==(n=M.otherUser)?void 0:n.id)||""))?void 0:i.isOnline)?"Online":"Last seen ".concat((e=>{if(!e)return"Unknown";let r=e.toDate?e.toDate():new Date(e),t=new Date().getTime()-r.getTime(),s=Math.floor(t/6e4),a=Math.floor(t/36e5),l=Math.floor(t/864e5);return s<1?"just now":s<60?"".concat(s," min ago"):a<24?"".concat(a," hr ago"):"".concat(l," day ago")})(null==(x=eo.get((null==(u=M.otherUser)?void 0:u.id)||""))?void 0:x.lastSeen))})]})]}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex items-center space-x-1 md:space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{var e;return(null==(e=M.otherUser)?void 0:e.id)&&ev(M.otherUser.id,M.otherUser.name||"User")},disabled:void 0===en.get((null==(m=M.otherUser)?void 0:m.id)||""),className:"jsx-4198319ec94a7ce "+"px-3 py-1 rounded-full text-xs font-medium transition-colors ".concat((null==(p=M.otherUser)?void 0:p.isFollowed)?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white hover:bg-blue-600"," ").concat(void 0===en.get((null==(g=M.otherUser)?void 0:g.id)||"")?"opacity-50 cursor-not-allowed":""),children:(null==(b=M.otherUser)?void 0:b.isFollowed)?"Unfollow":"Follow"}),(0,s.jsx)("button",{className:"jsx-4198319ec94a7ce p-2 text-gray-500 hover:text-gray-700 transition-colors",children:(0,s.jsx)(U.A,{className:"w-4 h-4"})})]})]}),(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 overflow-y-auto p-3 md:p-4 space-y-2 bg-gray-100 scrollbar-hidden",children:0===O.length?(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce text-center text-gray-500 mt-8",children:[(0,s.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:"No messages yet"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-xs",children:"Start the conversation!"})]}):(0,s.jsxs)(s.Fragment,{children:[O.map(e=>(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce "+"flex ".concat(e.senderId===(null==L?void 0:L.uid)?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce "+"max-w-xs md:max-w-md px-3 py-2 rounded-lg relative group ".concat(e.senderId===(null==L?void 0:L.uid)?"bg-green-100 text-gray-900 rounded-tr-none":"bg-white text-gray-900 rounded-tl-none"),children:[(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm",children:e.text}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce "+"text-xs mt-1 ".concat((e.senderId===(null==L||L.uid),"text-gray-500")),children:ek(e.createdAt)}),(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce absolute -top-8 left-0 bg-white rounded-full shadow-lg px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:eg.map((e,r)=>(0,s.jsx)("button",{onClick:()=>ep(e),title:"React with ".concat(e),className:"jsx-4198319ec94a7ce hover:scale-125 transition-transform text-sm",children:e},r))})]})},e.id)),Y.size>0&&(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce flex justify-start",children:(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce bg-white px-4 py-2 rounded-lg rounded-tl-none",children:(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce flex space-x-1",children:[(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{style:{animationDelay:"0.1s"},className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{style:{animationDelay:"0.2s"},className:"jsx-4198319ec94a7ce w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]})})}),(0,s.jsx)("div",{ref:el,className:"jsx-4198319ec94a7ce"})]})}),(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce p-3 md:p-4 border-t border-gray-200 bg-white relative",children:[(0,s.jsxs)("form",{onSubmit:ew,className:"jsx-4198319ec94a7ce flex items-center space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>$(!K),className:"jsx-4198319ec94a7ce p-2 text-gray-500 hover:text-gray-700 rounded-lg transition-colors",children:(0,s.jsx)(C.A,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"text",value:z,onChange:e=>{W(e.target.value),J||(X(!0),setTimeout(()=>X(!1),3e3))},placeholder:"Type a message...",className:"jsx-4198319ec94a7ce flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsx)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:_||!z.trim(),className:"bg-green-500 text-white p-2 rounded-full disabled:opacity-50 hover:bg-green-600 transition-all",children:(0,s.jsx)(S.A,{className:"w-4 h-4"})})]}),K&&(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce absolute bottom-full left-0 mb-2 w-64 h-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-10",children:(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce grid grid-cols-10 gap-1 p-2 h-full overflow-y-auto",children:["\uD83D\uDE00","\uD83D\uDE02","\uD83E\uDD70","\uD83D\uDE0E","\uD83E\uDD29","\uD83D\uDE0D","\uD83E\uDD17","\uD83E\uDD14","\uD83D\uDE44","\uD83D\uDE34","\uD83E\uDD73","\uD83E\uDD2A","\uD83D\uDE1C","\uD83E\uDD13","\uD83E\uDD7A","\uD83D\uDE24","\uD83D\uDE21","\uD83E\uDD2F","\uD83E\uDD76","\uD83D\uDE31","\uD83D\uDC4D","\uD83D\uDC4E","\uD83D\uDC4F","\uD83D\uDE4C","\uD83D\uDC4C","\uD83D\uDE4F","\uD83E\uDD1D","\uD83D\uDCAA","\uD83D\uDC40","\uD83E\uDDE0","\uD83D\uDC36","\uD83D\uDC31","\uD83D\uDC2D","\uD83D\uDC39","\uD83D\uDC30","\uD83E\uDD8A","\uD83D\uDC3B","\uD83D\uDC3C","\uD83D\uDC28","\uD83D\uDC2F","\uD83E\uDD81","\uD83D\uDC2E","\uD83D\uDC37","\uD83D\uDC38","\uD83D\uDC35","\uD83D\uDC14","\uD83D\uDC27","\uD83D\uDC26","\uD83E\uDD86","\uD83E\uDD85","\uD83C\uDF38","\uD83C\uDF3A","\uD83C\uDF3B","\uD83C\uDF37","\uD83C\uDF31","\uD83C\uDF32","\uD83C\uDF33","\uD83C\uDF34","\uD83C\uDF35","\uD83C\uDF3E","\uD83C\uDF4E","\uD83C\uDF50","\uD83C\uDF4A","\uD83C\uDF4B","\uD83C\uDF4C","\uD83C\uDF49","\uD83C\uDF47","\uD83C\uDF53","\uD83C\uDF48","\uD83C\uDF52","⚽","\uD83C\uDFC0","\uD83C\uDFC8","⚾","\uD83C\uDFBE","\uD83C\uDFD0","\uD83C\uDFC9","\uD83C\uDFB1","\uD83C\uDFD3","\uD83C\uDFF8","\uD83D\uDE97","\uD83D\uDE95","\uD83D\uDE99","\uD83D\uDE8C","\uD83D\uDE8E","\uD83C\uDFCE","\uD83D\uDE93","\uD83D\uDE91","\uD83D\uDE92","\uD83D\uDE90","❤️","\uD83D\uDC94","❣️","\uD83D\uDC95","\uD83D\uDC9E","\uD83D\uDC93","\uD83D\uDC97","\uD83D\uDC96","\uD83D\uDC98","\uD83D\uDC9D"].map((e,r)=>(0,s.jsx)("button",{onClick:()=>{W(r=>r+e),$(!1)},title:e,className:"jsx-4198319ec94a7ce text-xl p-1 hover:bg-gray-100 rounded transition-colors",children:e},r))})})]})]}):(0,s.jsx)("div",{className:"jsx-4198319ec94a7ce flex-1 flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"jsx-4198319ec94a7ce text-center text-gray-500 p-4",children:[(0,s.jsx)(d.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,s.jsx)("h3",{className:"jsx-4198319ec94a7ce text-lg font-medium mb-2",children:"Select a conversation"}),(0,s.jsx)("p",{className:"jsx-4198319ec94a7ce text-sm mb-4",children:"Choose someone to start chatting with"}),(0,s.jsx)("button",{onClick:()=>q(!0),className:"jsx-4198319ec94a7ce bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-all",children:"Find People to Chat"})]})})})]})]})}):null}var M=t(5196),I=t(29799),O=t(37108),T=t(23861),z=t(53690);function W(){let{user:e}=(0,h.useAuthStore)(),[r,t]=(0,a.useState)([]),[l,o]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!(null==e?void 0:e.uid))return;console.log("\uD83D\uDD14 Setting up notification subscription for user:",e.uid);let r=(0,z.Jv)(e.uid,e=>{t(e),c(!1),console.log("\uD83D\uDD14 Notifications updated:",e.length)});return()=>{r&&r()}},[null==e?void 0:e.uid]);let d=r.filter(e=>!e.read).length,x=async e=>{e.read||await (0,z.bA)(e.id),o(!1)},m=async()=>{(null==e?void 0:e.uid)&&(await (0,z.he)(e.uid),t(e=>e.map(e=>({...e,read:!0}))))};return e?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>o(!l),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full transition-colors",children:[(0,s.jsx)(T.A,{className:"w-6 h-6"}),d>0&&(0,s.jsx)(f.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:d>99?"99+":d})]}),(0,s.jsx)(g.N,{children:l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),d>0&&(0,s.jsx)("button",{onClick:m,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"})]}),d>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[d," unread notification",1!==d?"s":""]})]}),(0,s.jsx)("div",{className:"max-h-80 overflow-y-auto",children:i?(0,s.jsxs)("div",{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):0===r.length?(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)(T.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No notifications yet"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"We'll notify you when something happens"})]}):(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:r.slice(0,10).map(r=>{var t;return(0,s.jsx)(n(),{href:(r=>{var t,s;if(null==(t=r.data)?void 0:t.orderId)return"/orders/".concat(r.data.orderId);if(null==(s=r.data)?void 0:s.productId)return"/product/".concat(r.data.productId);let a=null==e?void 0:e.role;return"seller"===a||"brand"===a||"company"===a?"/brand/dashboard?tab=orders":"/orders"})(r),onClick:()=>x(r),children:(0,s.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer ".concat(r.read?"":"bg-blue-50 border-l-4 border-blue-500"),children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(e=>{switch(e){case"order_placed":return(0,s.jsx)(u.A,{className:"w-5 h-5 text-green-600"});case"order_confirmed":return(0,s.jsx)(M.A,{className:"w-5 h-5 text-blue-600"});case"order_shipped":return(0,s.jsx)(I.A,{className:"w-5 h-5 text-purple-600"});case"order_delivered":return(0,s.jsx)(O.A,{className:"w-5 h-5 text-green-600"});case"order_cancelled":return(0,s.jsx)(k.A,{className:"w-5 h-5 text-red-600"});default:return(0,s.jsx)(T.A,{className:"w-5 h-5 text-gray-600"})}})(r.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat(r.read?"text-gray-700":"text-gray-900"),children:r.title}),!r.read&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:r.message}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:(e=>{let r=Math.floor((new Date().getTime()-e.getTime())/1e3);return r<60?"Just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<604800?"".concat(Math.floor(r/86400),"d ago"):e.toLocaleDateString()})(r.createdAt)}),(null==(t=r.data)?void 0:t.orderNumber)&&(0,s.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["#",r.data.orderNumber]})]})]})]})})},r.id)})})}),r.length>0&&(0,s.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,s.jsx)(n(),{href:"/notifications",onClick:()=>o(!1),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all notifications"})})]})]})})]}):null}var _=t(87712),B=t(84616),H=t(62525),Z=t(92138);function V(){var e,r,t;let[l,i]=(0,a.useState)(!1),{cart:c,getCartItemCount:d,getCartTotal:x,updateQuantity:p,removeFromCart:b,loading:y,initializeCart:v}=(0,m.x)(),{user:j}=(0,h.useAuthStore)(),w=(0,o.useRouter)(),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{(null==j?void 0:j.uid)&&!c&&v(j.uid)},[null==j?void 0:j.uid,c,v]),(0,a.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let U=e=>"$".concat(e.toFixed(2));return(0,s.jsxs)("div",{className:"relative",ref:N,children:[(0,s.jsxs)("button",{onClick:()=>i(!l),className:"relative text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 sm:w-6 sm:h-6"}),((null==c||null==(e=c.items)?void 0:e.length)||0)>0&&(0,s.jsx)(f.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:(null==c||null==(r=c.items)?void 0:r.length)||0})]}),(0,s.jsx)(g.N,{children:l&&(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Shopping Cart (",(null==c||null==(t=c.items)?void 0:t.length)||0,")"]}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,s.jsx)(k.A,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:y&&!c?(0,s.jsxs)("div",{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading cart..."})]}):j?c&&0!==c.items.length?(0,s.jsx)("div",{className:"p-2",children:c.items.map(e=>{var r,t,a;return(0,s.jsxs)(f.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(null==(r=e.product)?void 0:r.image)&&(0,s.jsx)("img",{src:e.product.image,alt:e.product.title,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:(null==(t=e.product)?void 0:t.title)||"Product"}),(0,s.jsx)("p",{className:"text-purple-600 font-semibold text-sm",children:U((null==(a=e.product)?void 0:a.price)||0)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,s.jsx)("button",{onClick:()=>p(e.productId,Math.max(0,e.quantity-1)),className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:(0,s.jsx)(_.A,{className:"w-3 h-3"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-6 text-center",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>p(e.productId,e.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:(0,s.jsx)(B.A,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:()=>b(e.productId),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors ml-2",children:(0,s.jsx)(H.A,{className:"w-3 h-3 text-red-600 dark:text-red-400"})})]})]},e.productId)})}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(u.A,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Your cart is empty"}),(0,s.jsx)("button",{onClick:()=>{i(!1),w.push("/explore")},className:"text-purple-600 hover:text-purple-700 font-medium",children:"Start Shopping"})]}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(u.A,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please login to view cart"}),(0,s.jsx)("button",{onClick:()=>{i(!1),w.push("/login")},className:"text-purple-600 hover:text-purple-700 font-medium",children:"Login"})]})}),c&&c.items.length>0&&(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),(0,s.jsx)("span",{className:"text-lg font-bold text-purple-600",children:U(x())})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(n(),{href:"/cart",onClick:()=>i(!1),className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white py-2 px-4 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-center",children:"View Cart"}),(0,s.jsxs)("button",{onClick:()=>{i(!1),w.push("/cart")},className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 px-4 rounded-xl font-medium hover:from-purple-700 hover:to-pink-700 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,s.jsx)("span",{children:"Checkout"}),(0,s.jsx)(Z.A,{className:"w-4 h-4"})]})]})]})]})})]})}function q(){let[e,r]=(0,a.useState)(""),[t,l]=(0,a.useState)(!1),[i,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),k=(0,o.usePathname)(),U=(0,o.useParams)(),{user:C,loading:S}=(0,h.useAuthStore)(),{getCartItemCount:A,initializeCart:P}=(0,m.x)(),{profile:R,fetchProfile:L,subscribeToProfile:E}=(0,p.n)(),D=(0,o.useRouter)();(0,a.useEffect)(()=>{(null==C?void 0:C.uid)&&P(C.uid)},[null==C?void 0:C.uid]),(0,a.useEffect)(()=>{let e;return(null==C?void 0:C.uid)&&(k.startsWith("/profile/")&&(null==U?void 0:U.id)&&U.id!==C.uid||(e=E(C.uid))),()=>{e&&e()}},[null==C?void 0:C.uid,k,null==U?void 0:U.id]);let M=async()=>{try{await (0,b.CI)(y.j2),j(!1),v.oR.success("Logged out successfully"),D.push("/")}catch(e){v.oR.error("Failed to logout")}};return(0,s.jsxs)("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 shadow-md border-b border-gray-200 dark:border-white/10",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 flex-shrink-0",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:"Z"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 hidden sm:block",children:"Zaillisy"})]}),(0,s.jsx)("div",{className:"flex-1 max-w-xl mx-2 sm:mx-4 md:mx-8",children:(0,s.jsx)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&(D.push("/search?q=".concat(encodeURIComponent(e.trim()))),r(""))},className:"w-full",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Search products, sellers, categories...",className:"w-full pl-8 sm:pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-white/10 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent hover:border-gray-400 dark:hover:border-white/20 transition-colors text-gray-900 dark:text-gray-100 bg-white dark:bg-white/5 placeholder-gray-400"})]})})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[(0,s.jsx)(V,{}),C?(0,s.jsxs)("button",{onClick:()=>N(!0),className:"relative text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 border border-transparent hover:border-gray-300 dark:hover:border-white/20",title:"Messages",children:[(0,s.jsx)(d.A,{className:"w-5 h-5 sm:w-6 sm:h-6"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]}):(0,s.jsx)("button",{onClick:()=>v.oR.info("Please login to access messages"),className:"relative text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 border border-transparent hover:border-gray-300 dark:hover:border-white/20",title:"Messages (Login Required)",children:(0,s.jsx)(d.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),C&&(0,s.jsx)(W,{}),S?(0,s.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-200 rounded-full animate-pulse"}):C?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>j(!i),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-purple-600 transition-colors",children:(0,s.jsx)("img",{src:(null==R?void 0:R.customPhotoURL)||(null==R?void 0:R.photoURL)||(null==R?void 0:R.profilePic)||(null==R?void 0:R.avatar)||C.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent(C.displayName||"user")),alt:C.displayName||"User",width:"28",height:"28",className:"rounded-full sm:w-8 sm:h-8"})}),(0,s.jsx)(g.N,{children:i&&(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-white/10 py-2 z-50",children:[(0,s.jsxs)(n(),{href:"/profile/".concat(C.uid),prefetch:!1,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>j(!1),children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Profile"})]}),(0,s.jsxs)(n(),{href:"/orders",className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>j(!1),children:[(0,s.jsx)(u.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Orders"})]}),(null==C?void 0:C.role)==="seller"&&(0,s.jsxs)(n(),{href:"/seller/dashboard",className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10",onClick:()=>j(!1),children:[(0,s.jsx)("span",{children:"\uD83D\uDCBC"}),(0,s.jsx)("span",{children:"Seller Dashboard"})]}),(0,s.jsx)("hr",{className:"my-2 border-gray-200 dark:border-white/10"}),(0,s.jsx)("button",{onClick:M,className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 w-full text-left",children:(0,s.jsx)("span",{children:"Logout"})})]})})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,s.jsx)(n(),{href:"/auth-login",className:"px-2 sm:px-4 py-2 text-sm sm:text-base text-gray-700 dark:text-gray-300 hover:text-purple-600 font-medium",children:"Login"}),(0,s.jsx)(n(),{href:"/register",className:"px-2 sm:px-4 py-2 text-sm sm:text-base bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Sign Up"})]})]})]}),(0,s.jsx)(g.N,{children:t&&(0,s.jsx)(f.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 dark:border-white/10 py-4",children:(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsxs)(n(),{href:"/",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>l(!1),children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFE0"}),(0,s.jsx)("span",{className:"font-medium",children:"Home"})]}),(0,s.jsxs)(n(),{href:"/explore",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>l(!1),children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0D"}),(0,s.jsx)("span",{className:"font-medium",children:"Explore"})]}),(0,s.jsxs)(n(),{href:"/videos",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>l(!1),children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAC"}),(0,s.jsx)("span",{className:"font-medium",children:"Reels"})]}),(0,s.jsxs)(n(),{href:"/categories",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>l(!1),children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCF1"}),(0,s.jsx)("span",{className:"font-medium",children:"Categories"})]}),(0,s.jsxs)(n(),{href:"/become-seller",className:"flex items-center space-x-3 px-4 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",onClick:()=>l(!1),children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCBC"}),(0,s.jsx)("span",{className:"font-medium",children:"Sell"})]})]})})})]}),(0,s.jsx)(F,{isOpen:w,onClose:()=>N(!1)})]})}function Y(){let{theme:e}=(0,l.D)(),[r,o]=(0,a.useState)([{name:"Fashion",href:"/categories/fashion"},{name:"Electronics",href:"/categories/electronics"},{name:"Beauty",href:"/categories/beauty"},{name:"Home",href:"/categories/home"}]);(0,a.useEffect)(()=>{(async()=>{try{let{getAllCategories:e}=await t.e(1964).then(t.bind(t,89583)),r=await e();if(r&&r.length>0){let e=r.map(e=>({name:e.name,href:"/categories/".concat(e.slug)}));o(e)}}catch(e){console.log("Using default categories (Firebase not accessible)")}})()},[]);let[i,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c(!0)},[]);let d=i?e:"light";return(0,s.jsxs)("footer",{className:"relative ".concat(i&&"dark"===e?"bg-gradient-to-br from-gray-900 via-purple-900/5 to-gray-900":"bg-gradient-to-br from-gray-50 to-gray-100"," ").concat(i&&"dark"===e?"text-white":"text-gray-900"," transition-colors duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-48 h-48 rounded-full mix-blend-soft-light filter blur-2xl animate-pulse ".concat("dark"===d?"bg-gradient-to-r from-purple-500 to-pink-500 opacity-15":"bg-gradient-to-r from-purple-300 to-pink-300 opacity-20")}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-32 h-32 rounded-full mix-blend-soft-light filter blur-2xl ".concat("dark"===d?"bg-gradient-to-r from-blue-500 to-teal-500 opacity-10":"bg-gradient-to-r from-blue-300 to-teal-300 opacity-15")})]}),(0,s.jsxs)("div",{className:"container mx-auto px-0 relative z-10",children:[(0,s.jsx)("div",{className:"px-6 py-10",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-lg blur-sm opacity-70 ".concat("dark"===d?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-gradient-to-r from-purple-400 to-pink-400")}),(0,s.jsx)("div",{className:"relative w-10 h-10 rounded-lg flex items-center justify-center ".concat("dark"===d?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-500"),children:(0,s.jsx)("span",{className:"text-white font-bold",children:"Z"})})]}),(0,s.jsx)("span",{className:"text-xl font-bold ml-3 ".concat("dark"===d?"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent":"text-purple-600"),children:"Zaillisy"})]}),(0,s.jsx)("p",{className:"text-sm mb-4 leading-relaxed ".concat(i&&"dark"===e?"text-gray-400":"text-gray-600"),children:"Social commerce platform connecting buyers and sellers."}),(0,s.jsx)("div",{className:"flex space-x-3",children:[{name:"Facebook",href:"https://facebook.com",icon:"\uD83D\uDCD8"},{name:"Instagram",href:"https://instagram.com",icon:"\uD83D\uDCF7"},{name:"Twitter",href:"https://twitter.com",icon:"\uD83D\uDC26"}].map(e=>(0,s.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"w-9 h-9 rounded-lg flex items-center justify-center transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm group ".concat("dark"===d?"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 hover:bg-gradient-to-r hover:from-purple-600 hover:to-pink-600":"bg-white border border-gray-200 hover:bg-gradient-to-r hover:from-purple-500 hover:to-pink-500"),title:e.name,children:(0,s.jsx)("span",{className:"text-base group-hover:scale-110 transition-transform",children:e.icon})},e.name))}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n(),{href:"/become-seller",className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm ".concat("dark"===d?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600"),children:"Become a Seller"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ".concat("dark"===d?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"),children:["Categories",(0,s.jsx)("span",{className:"absolute bottom-0 left-0 w-8 h-0.5 rounded-full ".concat("dark"===d?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500")})]}),(0,s.jsxs)("ul",{className:"space-y-2",children:[r.map(r=>(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:r.href,className:"transition-all duration-300 text-sm flex items-center group py-1 ".concat(i&&"dark"===e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"),children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ".concat("dark"===d?"bg-purple-500":"bg-purple-400")}),(0,s.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:r.name})]})},r.name)),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/categories",className:"transition-colors text-sm font-medium flex items-center group py-1 ".concat("dark"===d?"text-purple-400 hover:text-purple-300":"text-purple-600 hover:text-purple-800"),children:[(0,s.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:"View All"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1 transform group-hover:translate-x-1 transition-transform duration-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ".concat("dark"===d?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"),children:["Support",(0,s.jsx)("span",{className:"absolute bottom-0 left-0 w-8 h-0.5 rounded-full ".concat("dark"===d?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500")})]}),(0,s.jsx)("ul",{className:"space-y-2 mb-4",children:[{name:"Help Center",href:"/help-center"},{name:"Contact Us",href:"/contact-us"},{name:"FAQs",href:"/faqs"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:e.href,className:"transition-all duration-300 text-sm flex items-center group py-1 ".concat("dark"===d?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"),children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ".concat("dark"===d?"bg-purple-500":"bg-purple-400")}),(0,s.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:e.name})]})},e.name))}),(0,s.jsxs)("h3",{className:"text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ".concat("dark"===d?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"),children:["Company",(0,s.jsx)("span",{className:"absolute bottom-0 left-0 w-8 h-0.5 rounded-full ".concat("dark"===d?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500")})]}),(0,s.jsx)("ul",{className:"space-y-2",children:[{name:"About Us",href:"/about"},{name:"Careers",href:"/careers"},{name:"Blog",href:"/blog"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:e.href,className:"transition-all duration-300 text-sm flex items-center group py-1 ".concat("dark"===d?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"),children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ".concat("dark"===d?"bg-purple-500":"bg-purple-400")}),(0,s.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:e.name})]})},e.name))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-bold mb-3 uppercase tracking-wider relative inline-block ".concat("dark"===d?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400":"text-purple-600"),children:["Legal",(0,s.jsx)("span",{className:"absolute bottom-0 left-0 w-8 h-0.5 rounded-full ".concat("dark"===d?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-purple-500")})]}),(0,s.jsx)("ul",{className:"space-y-2",children:[{name:"Terms",href:"/terms"},{name:"Privacy",href:"/privacy"},{name:"Cookies",href:"/cookies"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:e.href,className:"transition-all duration-300 text-sm flex items-center group py-1 ".concat("dark"===d?"text-gray-400 hover:text-white":"text-gray-600 hover:text-purple-600"),children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full mr-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-0 group-hover:scale-100 ".concat("dark"===d?"bg-purple-500":"bg-purple-400")}),(0,s.jsx)("span",{className:"group-hover:translate-x-1 transform duration-300",children:e.name})]})},e.name))})]})]})}),(0,s.jsx)("div",{className:"border-t mx-6 ".concat("dark"===d?"border-gray-800/50":"border-gray-200")}),(0,s.jsx)("div",{className:"px-6 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-sm mb-4 md:mb-0 ".concat("dark"===d?"text-gray-500":"text-gray-600"),children:["\xa9 ",new Date().getFullYear()," Zaillisy. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)(n(),{href:"/privacy",className:"text-sm transition-colors ".concat("dark"===d?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"),children:"Privacy Policy"}),(0,s.jsx)(n(),{href:"/terms",className:"text-sm transition-colors ".concat("dark"===d?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"),children:"Terms of Service"}),(0,s.jsx)(n(),{href:"/cookies",className:"text-sm transition-colors ".concat("dark"===d?"text-gray-500 hover:text-gray-300":"text-gray-600 hover:text-purple-600"),children:"Cookie Policy"})]})]})})]})]})}var Q=t(57340),J=t(9803),X=t(54653),K=t(84355);function $(){let e=(0,o.usePathname)(),r=(0,o.useParams)(),{user:t}=(0,h.useAuthStore)(),{profile:l,fetchProfile:i}=(0,p.n)(),[d,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(null==t?void 0:t.uid)&&(e.startsWith("/profile/")&&(null==r?void 0:r.id)&&r.id!==t.uid||i(t.uid))},[null==t?void 0:t.uid]),(0,a.useEffect)(()=>{l&&u(["seller","brand","company"].includes(l.role))},[l]);let f=[{href:"/",icon:Q.A,label:"Home"},{href:"/explore",icon:c.A,label:"Explore"},{href:"/videos",icon:J.A,label:"Reels"},{href:"/categories",icon:X.A,label:"Categories"},{href:t?"/profile/".concat(t.uid):"/register",icon:x.A,label:"Profile"}],b=[{href:"/",icon:Q.A,label:"Home"},{href:"/explore",icon:c.A,label:"Explore"},{href:"/videos",icon:J.A,label:"Reels"},{href:"#",icon:B.A,label:"Upload",isUpload:!0},{href:"/categories",icon:X.A,label:"Categories"},{href:t?"/profile/".concat(t.uid):"/register",icon:x.A,label:"Profile"}],y=e=>{g(!1),"reel"===e?window.location.href="/upload/reel":window.location.href="/product/upload"};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg border-t border-gray-200/50 dark:border-white/10 shadow-2xl flex justify-around items-center h-16 sm:h-16 px-2 sm:px-4 z-40 block",children:(d?b:f).map(r=>{let{href:t,icon:a,label:l,isUpload:o}=r,i=e===t||t.includes("/profile")&&e.startsWith("/profile")||"/auth-login"===t&&e.startsWith("/auth-login")||"/reels"===t&&e.startsWith("/reels")||"/upload"===t&&e.startsWith("/upload")||"/product/upload"===t&&e.startsWith("/product/upload");return o?(0,s.jsxs)("button",{onClick:()=>{({href:t,icon:a,label:l,isUpload:o}).isUpload&&g(!0)},className:"flex flex-col items-center justify-center flex-1 py-2 transition-all duration-300 group relative ".concat(i?"text-purple-600":"text-gray-500 hover:text-purple-600"),children:[(0,s.jsxs)("div",{className:"relative p-2.5 rounded-full transition-all duration-300 ".concat(i?"bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg scale-110 ring-2 ring-purple-200":"group-hover:bg-purple-50 group-hover:scale-105 group-hover:shadow-md"),children:[(0,s.jsx)(a,{size:26,className:"w-6 h-6 sm:w-7 sm:h-7 ".concat(i?"text-white":"text-gray-600 group-hover:text-purple-600"," transition-colors")}),i&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),(0,s.jsx)("span",{className:"text-xs mt-1 font-medium hidden md:block",children:l})]},t):(0,s.jsxs)(n(),{href:t,className:"flex flex-col items-center justify-center flex-1 py-2 transition-all duration-300 group relative ".concat(i?"text-purple-600":"text-gray-500 hover:text-purple-600"),children:[(0,s.jsxs)("div",{className:"relative p-2.5 rounded-full transition-all duration-300 ".concat(i?"bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg scale-110 ring-2 ring-purple-200":"group-hover:bg-purple-50 group-hover:scale-105 group-hover:shadow-md"),children:[(0,s.jsx)(a,{size:26,className:"w-6 h-6 sm:w-7 sm:h-7 ".concat(i?"text-white":"text-gray-600 group-hover:text-purple-600"," transition-colors")}),i&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),(0,s.jsx)("span",{className:"text-xs mt-1 font-medium hidden md:block",children:l})]},t)})}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-t-2xl w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload"}),(0,s.jsx)("button",{onClick:()=>g(!1),className:"p-2 rounded-full hover:bg-gray-100",children:(0,s.jsx)(k.A,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("button",{onClick:()=>y("reel"),className:"w-full flex items-center space-x-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(K.A,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Upload Reel"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Share a video reel"})]})]}),(0,s.jsxs)("button",{onClick:()=>y("product"),className:"w-full flex items-center space-x-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(O.A,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Upload Product"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add a new product"})]})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,s.jsx)("button",{onClick:()=>g(!1),className:"w-full py-3 text-gray-600 font-medium hover:bg-gray-50 rounded-lg transition-colors",children:"Cancel"})})]})})]})}function G(e){let{children:r,showFooter:t=!0,showHeader:i=!0,immersive:n=!1}=e,c=(0,o.usePathname)(),d="/reels"===c||"/videos"===c,{initialize:x,unsubscribeUserListener:u}=(0,h.useAuthStore)(),{theme:m}=(0,l.D)();return(0,a.useEffect)(()=>(x(),()=>{u&&u()}),[x,u]),(0,s.jsxs)("div",{className:"theme-surface min-h-screen flex flex-col bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100",children:[i&&!d&&(0,s.jsx)(q,{}),(0,s.jsx)("main",{className:"flex-1 ".concat(d?"pb-16":"pb-16 sm:pb-16"),children:r}),t&&!d&&(0,s.jsx)(Y,{}),(0,s.jsx)($,{}),(0,s.jsx)(v.l$,{position:"top-right",richColors:!0,closeButton:!0,theme:"dark"===m?"dark":"light"})]})}},98868:(e,r,t)=>{"use strict";t.d(r,{n:()=>n});var s=t(88693),a=t(35317),l=t(25610);let o=new Map,i=new Map,n=(0,s.vt)((e,r)=>({profile:null,loading:!1,error:null,fetchProfile:async r=>{var t,s;if(o.get(r))return void console.log("\uD83D\uDEAB BLOCKED: Already fetching profile for:",r);e({loading:!0,error:null});let n=i.get(r);if(n){console.log("\uD83D\uDCBE CACHE HIT: Using cached profile for:",r),e({profile:n,loading:!1,error:null});return}console.log("\uD83D\uDD0D Store: Starting fetchProfile for:",r);try{let n=await (0,a.x7)((0,a.doc)(l.db,"users",r));if(n.exists()){let a=n.data(),l=Object.assign(Object.assign({id:r,joinedAt:(null==(t=a.joinedAt)?void 0:t.toDate())||new Date,usernameLastChanged:null==(s=a.usernameLastChanged)?void 0:s.toDate()},a),{customPhotoURL:a.customPhotoURL||"",photoURL:a.photoURL||"",profilePic:a.profilePic||"",avatar:a.avatar||"",name:a.name&&"string"==typeof a.name&&a.name.trim()||"User",bio:a.bio&&"string"==typeof a.bio?a.bio.trim():"",followers:Array.isArray(a.followers)?a.followers:[],following:Array.isArray(a.following)?a.following:[]});console.log("✅ Store: Profile loaded successfully:",l.name,l.id),i.set(r,l),e({profile:l,loading:!1})}else console.log("❌ Store: Profile document does not exist for:",r),o.delete(r),e({profile:null,loading:!1,error:"Profile not found. This user may not exist or their profile may be private."})}catch(t){console.error("❌ Store: Firestore error:",t),o.delete(r),e({profile:null,loading:!1,error:"Failed to load profile. Please check your internet connection and try again."})}},subscribeToProfile:e=>(console.log("\uD83D\uDD14 Subscription disabled to prevent infinite loops for:",e),()=>{}),updateProfile:async(t,s)=>{try{await (0,a.mZ)((0,a.doc)(l.db,"users",t),s);let o=r().profile;o&&o.id===t&&e({profile:Object.assign(Object.assign({},o),s)})}catch(e){throw console.error("Error updating profile:",e),e}},createProfile:async(r,t)=>{try{let s=Object.assign(Object.assign({},t),{id:r,joinedAt:new Date});await (0,a.BN)((0,a.doc)(l.db,"users",r),s),e({profile:s,loading:!1,error:null})}catch(r){console.error("Error creating profile:",r),e({error:"Failed to create profile",loading:!1})}},followUser:async(t,s)=>{try{let o=(0,a.doc)(l.db,"users",t),i=(0,a.doc)(l.db,"users",s);await (0,a.mZ)(o,{following:(0,a.hq)(s)}),await (0,a.mZ)(i,{followers:(0,a.hq)(t)});let n=r().profile;if(n&&n.id===t){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:[...r.filter(e=>e!==s),s]})})}}catch(e){throw console.error("Error following user:",e),e}},unfollowUser:async(t,s)=>{try{let o=(0,a.doc)(l.db,"users",t),i=(0,a.doc)(l.db,"users",s);await (0,a.mZ)(o,{following:(0,a.C3)(s)}),await (0,a.mZ)(i,{followers:(0,a.C3)(t)});let n=r().profile;if(n&&n.id===t){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:r.filter(e=>e!==s)})})}}catch(e){throw console.error("Error unfollowing user:",e),e}},fetchUserAnalytics:async e=>{try{return{monthlySales:0,monthlyOrders:0,monthlyRefunds:0,topProducts:[]}}catch(e){throw console.error("Error fetching analytics:",e),e}},clearProfile:()=>{e({profile:null,loading:!1,error:null})},clearUserCache:e=>{i.delete(e),o.delete(e),console.log("\uD83D\uDDD1️ Cleared cache and tracker for:",e)}}))}},e=>{e.O(0,[9897,7690,2992,9507,1794,6899,6671,8599,7194,6874,4551,4080,6935,9700,3690,8441,5964,7358],()=>e(e.s=18315)),_N_E=e.O()}]);