(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,8771],{4229:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6115:(e,r,t)=>{"use strict";var l=t(12115),s=t(49033),a="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},o=s.useSyncExternalStore,i=l.useRef,n=l.useEffect,c=l.useMemo,d=l.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,r,t,l,s){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=o(e,(u=c(function(){function e(e){if(!n){if(n=!0,o=e,e=l(e),void 0!==s&&h.hasValue){var r=h.value;if(s(r,e))return i=r}return i=e}if(r=i,a(o,e))return r;var t=l(e);return void 0!==s&&s(r,t)?(o=e,r):(o=e,i=t)}var o,i,n=!1,c=void 0===t?null:t;return[function(){return e(r())},null===c?void 0:function(){return e(c())}]},[r,t,l,s]))[0],u[1]);return n(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},9803:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},19946:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var l=t(12115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:u,...h}=e;return(0,l.createElement)("svg",{ref:r,...o,width:s,height:s,stroke:t,strokeWidth:n?24*Number(i)/Number(s):i,className:a("lucide",c),...!d&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[r,t]=e;return(0,l.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),n=(e,r)=>{let t=(0,l.forwardRef)((t,o)=>{let{className:n,...c}=t;return(0,l.createElement)(i,{ref:o,iconNode:r,className:a("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...c})});return t.displayName=s(e),t}},22436:(e,r,t)=>{"use strict";var l=t(12115),s="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},a=l.useState,o=l.useEffect,i=l.useLayoutEffect,n=l.useDebugValue;function c(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!s(e,t)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),l=a({inst:{value:t,getSnapshot:r}}),s=l[0].inst,d=l[1];return i(function(){s.value=t,s.getSnapshot=r,c(s)&&d({inst:s})},[e,t,r]),o(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),n(t),t};r.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:d},25610:(e,r,t)=>{"use strict";t.d(r,{db:()=>h,j2:()=>u,storage:()=>p});var l=t(23915),s=t(16203),a=t(35317),o=t(90858),i=t(92144),n=t(81115),c=t(86864);let d=(0,l.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,s.xI)(d),h=(0,a.aU)(d);(0,n.C3)(d);let p=(0,o.c7)(d);(0,i.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},29869:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},35169:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,r,t)=>{"use strict";var l=t(18999);t.o(l,"useParams")&&t.d(r,{useParams:function(){return l.useParams}}),t.o(l,"usePathname")&&t.d(r,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(r,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(r,{useSearchParams:function(){return l.useSearchParams}})},37225:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>j});var l=t(95155),s=t(12115),a=t(35695),o=t(68084),i=t(98868),n=t(29869),c=t(9803),d=t(35169),u=t(54416),h=t(84616),p=t(84355),g=t(4229),m=t(56671),f=t(6874),x=t.n(f),y=t(29415),b=t(47439),v=t(8813);function j(){var e;let{user:r,loading:f,refreshUserData:j}=(0,o.useAuthStore)(),{profile:w,loading:N,fetchProfile:A}=(0,i.n)(),S=(0,a.useRouter)(),k=(0,s.useRef)(!1),[E,P]=(0,s.useState)(!1),[R,C]=(0,s.useState)(!1),[U,D]=(0,s.useState)({title:"",description:"",category:"",tags:[],linkedProductId:""}),[L,O]=(0,s.useState)([]),[F,z]=(0,s.useState)(!1),[I,T]=(0,s.useState)(""),[M,B]=(0,s.useState)(null),[V,_]=(0,s.useState)("");(0,s.useEffect)(()=>{if(!f&&!k.current){if(!r)return void S.push("/auth-login");k.current=!0,(async()=>{try{await A(r.uid)}catch(e){console.error("Error fetching profile:",e),m.oR.error("Error loading profile information")}})()}},[null==r?void 0:r.uid,f,S]),(0,s.useEffect)(()=>{if(w){let e=["personal_seller","brand","company"];P(e.includes(w.role)),e.includes(w.role)||(m.oR.error("Only sellers can upload reels"),S.push("/"))}},[w,S]),(0,s.useEffect)(()=>{(null==r?void 0:r.uid)&&E&&!F&&0===L.length&&(console.log("\uD83C\uDFAF Loading products once for seller:",r.uid),H())},[null==r?void 0:r.uid,E]);let H=async()=>{z(!0);try{if(null==r?void 0:r.uid){console.log("\uD83D\uDD0D Loading products for seller:",r.uid);let{collection:e,query:l,where:s,getDocs:a}=await Promise.resolve().then(t.bind(t,35317)),{db:o}=await Promise.resolve().then(t.bind(t,25610)),i=e(o,"products"),n=l(i,s("sellerId","==",r.uid),s("status","==","active")),c=(await a(n)).docs.map(e=>({id:e.id,...e.data()}));if(console.log("✅ Direct Firebase query result:",c.length,"products found"),O(c),0===c.length){console.log("\uD83D\uDD04 Trying productService fallback...");let e=await (0,v.TV)(r.uid);console.log("\uD83D\uDCE6 ProductService result:",e.length,"products"),O(e)}}}catch(e){console.error("❌ Error loading products:",e),m.oR.error("Failed to load products")}finally{z(!1)}},q=(e,r)=>{D(t=>({...t,[e]:r}))},W=()=>{I.trim()&&!U.tags.includes(I.trim())&&(D(e=>({...e,tags:[...e.tags,I.trim()]})),T(""))},Z=async()=>{if(r&&E){if(!U.title.trim())return void m.oR.error("Reel title is required");if(!U.description.trim())return void m.oR.error("Reel description is required");if(!U.category)return void m.oR.error("Please select a category");if(!M)return void m.oR.error("Please select a video file");C(!0);try{let e=await (0,b.QM)(M,"reels/".concat(r.uid,"/").concat(Date.now(),"_").concat(M.name)),t={userId:r.uid,videoUrl:e.url,caption:U.description,tags:U.tags,duration:15,status:"active"};U.linkedProductId&&(t.productId=U.linkedProductId),await (0,y.vf)(t),m.oR.success("Reel uploaded successfully!"),S.push("/videos")}catch(e){console.error("Error uploading reel:",e),m.oR.error("Failed to upload reel. Please try again.")}finally{C(!1)}}};return f&&!r||N&&!w?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),(0,l.jsx)("p",{className:"text-gray-600",children:"Checking your authentication status"})]})}):r?E?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(x(),{href:"/",className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,l.jsx)(d.A,{className:"w-5 h-5 text-gray-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Upload Reel"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Share a video reel with your audience"})]})]})})})}),(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Reel Information"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reel Title *"}),(0,l.jsx)("input",{type:"text",value:U.title,onChange:e=>q("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter reel title"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,l.jsxs)("select",{value:U.category,onChange:e=>q("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,l.jsx)("option",{value:"",children:"Select category"}),(0,l.jsx)("option",{value:"fashion",children:"Fashion & Style"}),(0,l.jsx)("option",{value:"beauty",children:"Beauty & Makeup"}),(0,l.jsx)("option",{value:"food",children:"Food & Cooking"}),(0,l.jsx)("option",{value:"travel",children:"Travel & Adventure"}),(0,l.jsx)("option",{value:"fitness",children:"Fitness & Health"}),(0,l.jsx)("option",{value:"comedy",children:"Comedy & Entertainment"}),(0,l.jsx)("option",{value:"education",children:"Education & Tips"}),(0,l.jsx)("option",{value:"lifestyle",children:"Lifestyle"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,l.jsx)("textarea",{value:U.description,onChange:e=>q("description",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Describe your reel..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:U.tags.map((e,r)=>(0,l.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800",children:[e,(0,l.jsx)("button",{onClick:()=>{D(r=>({...r,tags:r.tags.filter(r=>r!==e)}))},className:"ml-2 text-purple-600 hover:text-purple-800",children:(0,l.jsx)(u.A,{className:"w-3 h-3"})})]},r))}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("input",{type:"text",value:I,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&W(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Add a tag"}),(0,l.jsx)("button",{onClick:W,className:"px-4 py-2 bg-purple-600 text-white rounded-r-lg hover:bg-purple-700",children:(0,l.jsx)(h.A,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-200",children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,l.jsx)(h.A,{className:"w-4 h-4 mr-2 text-purple-600"}),"Link a Product (Optional)"]}),F?(0,l.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("span",{className:"text-gray-600 block",children:"Loading your products..."}),(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"Fetching from Firebase..."})]})]}):L.length>0?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:[(0,l.jsx)("div",{onClick:()=>q("linkedProductId",""),className:"p-3 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(""===U.linkedProductId?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:(0,l.jsx)(c.A,{className:"w-6 h-6 text-gray-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:"No Product"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Just upload the reel"})]}),""===U.linkedProductId&&(0,l.jsx)("div",{className:"ml-auto w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),L.map(e=>{var r;return(0,l.jsx)("div",{onClick:()=>q("linkedProductId",e.id),className:"p-3 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(U.linkedProductId===e.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden mr-3",children:e.images&&e.images[0]?(0,l.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(p.A,{className:"w-6 h-6 text-gray-400"})})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,l.jsxs)("p",{className:"text-sm text-purple-600 font-semibold",children:["$",null==(r=e.price)?void 0:r.toFixed(2)]})]}),U.linkedProductId===e.id&&(0,l.jsx)("div",{className:"ml-2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},e.id)})]}),(0,l.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,l.jsxs)("p",{className:"text-sm text-blue-800 flex items-start",children:[(0,l.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Linking a product will show a shopping card on your reel that viewers can tap to visit the product page."]})})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600 mb-2",children:"No products found"}),(0,l.jsxs)("p",{className:"text-xs text-gray-400 mb-4",children:["User ID: ",null==r||null==(e=r.uid)?void 0:e.slice(0,8),"... | Seller: ",E?"Yes":"No"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(x(),{href:"/product/upload",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,l.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Upload your first product"]}),(0,l.jsx)("button",{onClick:H,className:"block mx-auto text-sm text-purple-600 hover:text-purple-800",children:"\uD83D\uDD04 Retry loading products"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video File *"}),V?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("video",{src:V,controls:!0,className:"w-full max-w-md rounded-lg"}),(0,l.jsx)("button",{onClick:()=>{B(null),_("")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:(0,l.jsx)(u.A,{className:"w-3 h-3"})})]}):(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,l.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload a video file (MP4, max 100MB)"}),(0,l.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(!t)return;if(!t.type.startsWith("video/"))return void m.oR.error("Please select a valid video file");if(t.size>0x6400000)return void m.oR.error("Video file must be under 100MB");B(t);let l=new FileReader;l.onload=e=>{var r;_(null==(r=e.target)?void 0:r.result)},l.readAsDataURL(t)},className:"hidden",id:"video-upload"}),(0,l.jsxs)("label",{htmlFor:"video-upload",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 cursor-pointer",children:[(0,l.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Choose Video"]})]})]}),(0,l.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:(0,l.jsx)("button",{onClick:Z,disabled:R,className:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:R?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Upload Reel"]})})})]})]})})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Seller Access Required"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Only sellers can upload reels"}),(0,l.jsx)(x(),{href:"/become-seller",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Become a Seller"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(n.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please login first"}),(0,l.jsx)("p",{className:"text-gray-600",children:"You need to be authenticated to upload reels"})]})})}},45643:(e,r,t)=>{"use strict";e.exports=t(6115)},47439:(e,r,t)=>{"use strict";t.d(r,{QM:()=>a,V6:()=>o,nJ:()=>i});var l=t(25610),s=t(90858);let a=async(e,r,t)=>{console.log("=== FIREBASE UPLOAD DEBUG START ==="),console.log("Starting file upload..."),console.log("File:",e.name,"Size:",e.size,"Type:",e.type),console.log("Upload path:",r),console.log("Firebase storage initialized:",!!l.storage),console.log("=========================");try{if(!l.storage)throw Error("Firebase storage not initialized");let a=(0,s.ref)(l.storage,r),o=(0,s.bp)(a,e);return new Promise((l,a)=>{o.on("state_changed",e=>{let r=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+r+"% done"),t&&t(r)},e=>{console.error("Firebase upload error:",e),a(e)},async()=>{try{let t=await (0,s.getDownloadURL)(o.snapshot.ref);console.log("File available at",t),l({url:t,path:r,name:e.name})}catch(e){console.error("Error getting download URL:",e),a(e)}})})}catch(t){return console.error("Error uploading file:",t),console.error("Full error details:",JSON.stringify(t,null,2)),{url:"https://via.placeholder.com/400x400/6366f1/ffffff?text=".concat(encodeURIComponent(e.name)),path:r,name:e.name}}},o=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"products",l=arguments.length>3?arguments[3]:void 0,s=Date.now(),o="".concat(s,"_").concat(e.name);return a(e,"".concat(t,"/").concat(r,"/").concat(o),l)},i=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0xa00000,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["image/jpeg","image/png","image/webp","video/mp4","video/mov"];return e.size>r?{valid:!1,error:"File size must be less than ".concat(Math.round(r/1024/1024),"MB")}:t.includes(e.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Allowed types: ".concat(t.join(", "))}}},49033:(e,r,t)=>{"use strict";e.exports=t(22436)},54416:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68084:(e,r,t)=>{"use strict";t.d(r,{useAuthStore:()=>i});var l=t(88693),s=t(16203),a=t(25610),o=t(95997);let i=(0,l.vt)((e,r)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:r=>e({user:r}),setUserData:r=>e({userData:r}),setLoading:r=>e({loading:r}),setUnsubscribeUserListener:r=>e({unsubscribeUserListener:r}),initialize:()=>(0,s.hg)(a.j2,async l=>{if(l)try{let s=await (0,o.gL)(l.uid),a=Object.assign(Object.assign({},l),{role:null==s?void 0:s.role});e({user:a,userData:s,loading:!1});let{doc:i,onSnapshot:n}=await Promise.resolve().then(t.bind(t,35317)),{db:c}=await Promise.resolve().then(t.bind(t,25610)),d=i(c,"users",l.uid),u=n(d,t=>{if(t.exists()){let l=t.data();e({userData:l,user:Object.assign(Object.assign({},r().user||{}),{role:l.role})})}});e({unsubscribeUserListener:u})}catch(r){console.error("Error fetching user data:",r),e({user:Object.assign(Object.assign({},l),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:t}=r();t&&(t(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:t}=r();if(t)try{let l=await (0,o.gL)(t.uid);e({userData:l,user:Object.assign(Object.assign({},r().user||{}),{role:null==l?void 0:l.role})}),setTimeout(async()=>{try{let l=await (0,o.gL)(t.uid);e({userData:l,user:Object.assign(Object.assign({},r().user||{}),{role:null==l?void 0:l.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{i.getState().initialize()},0)},84355:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(19946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},88629:(e,r,t)=>{Promise.resolve().then(t.bind(t,37225))},88693:(e,r,t)=>{"use strict";t.d(r,{vt:()=>d});let l=e=>{let r,t=new Set,l=(e,l)=>{let s="function"==typeof e?e(r):e;if(!Object.is(s,r)){let e=r;r=(null!=l?l:"object"!=typeof s||null===s)?s:Object.assign({},r,s),t.forEach(t=>t(r,e))}},s=()=>r,a={setState:l,getState:s,getInitialState:()=>o,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},o=r=e(l,s,a);return a};var s=t(12115),a=t(45643);let{useDebugValue:o}=s,{useSyncExternalStoreWithSelector:i}=a,n=!1,c=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let r="function"==typeof e?(e=>e?l(e):l)(e):e,t=(e,t)=>(function(e,r=e=>e,t){t&&!n&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),n=!0);let l=i(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return o(l),l})(r,e,t);return Object.assign(t,r),t},d=e=>e?c(e):c},95997:(e,r,t)=>{"use strict";t.d(r,{G6:()=>i,HW:()=>u,Hh:()=>c,Jv:()=>n,eT:()=>f,gL:()=>h,qc:()=>m,xw:()=>d});var l=t(16203),s=t(35317),a=t(25610);let o=new l.HF;o.addScope("email"),o.addScope("profile");let i=async()=>{var e;try{let r=(await (0,l.df)(a.j2,o)).user;if(!(await (0,s.x7)((0,s.doc)(a.db,"users",r.uid))).exists()){let t={id:r.uid,email:r.email||"",name:r.displayName||"Anonymous",username:(null==(e=r.email)?void 0:e.split("@")[0])||"user",avatar:r.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,s.BN)((0,s.doc)(a.db,"users",r.uid),t)}return r}catch(e){throw console.error("Google sign-in error:",e),e}},n=async(e,r)=>{try{return(await (0,l.x9)(a.j2,e,r)).user}catch(e){throw e}},c=async function(e,r,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let i=(await (0,l.eJ)(a.j2,e,r)).user;await (0,l.r7)(i,{displayName:t});try{let r={id:i.uid,email:i.email||"",name:t,username:e.split("@")[0],avatar:i.photoURL||"",bio:"",role:o,accountType:o,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,s.BN)((0,s.doc)(a.db,"users",i.uid),r),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return i}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,l.J1)(a.j2,e)}catch(e){throw e}},u=()=>a.j2.currentUser,h=async e=>{try{let r=await (0,s.x7)((0,s.doc)(a.db,"users",e));if(r.exists())return r.data();return null}catch(e){return console.error("Error getting user data:",e),null}},p=async e=>{try{let r=await h(e);return(null==r?void 0:r.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},g=async e=>{try{let r=await h(e);return(null==r?void 0:r.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},m=async e=>"admin"===await p(e),f=async e=>["personal_seller","brand","company"].includes(await g(e))},98868:(e,r,t)=>{"use strict";t.d(r,{n:()=>n});var l=t(88693),s=t(35317),a=t(25610);let o=new Map,i=new Map,n=(0,l.vt)((e,r)=>({profile:null,loading:!1,error:null,fetchProfile:async r=>{var t,l;if(o.get(r))return void console.log("\uD83D\uDEAB BLOCKED: Already fetching profile for:",r);e({loading:!0,error:null});let n=i.get(r);if(n){console.log("\uD83D\uDCBE CACHE HIT: Using cached profile for:",r),e({profile:n,loading:!1,error:null});return}console.log("\uD83D\uDD0D Store: Starting fetchProfile for:",r);try{let n=await (0,s.x7)((0,s.doc)(a.db,"users",r));if(n.exists()){let s=n.data(),a=Object.assign(Object.assign({id:r,joinedAt:(null==(t=s.joinedAt)?void 0:t.toDate())||new Date,usernameLastChanged:null==(l=s.usernameLastChanged)?void 0:l.toDate()},s),{customPhotoURL:s.customPhotoURL||"",photoURL:s.photoURL||"",profilePic:s.profilePic||"",avatar:s.avatar||"",name:s.name&&"string"==typeof s.name&&s.name.trim()||"User",bio:s.bio&&"string"==typeof s.bio?s.bio.trim():"",followers:Array.isArray(s.followers)?s.followers:[],following:Array.isArray(s.following)?s.following:[]});console.log("✅ Store: Profile loaded successfully:",a.name,a.id),i.set(r,a),e({profile:a,loading:!1})}else console.log("❌ Store: Profile document does not exist for:",r),o.delete(r),e({profile:null,loading:!1,error:"Profile not found. This user may not exist or their profile may be private."})}catch(t){console.error("❌ Store: Firestore error:",t),o.delete(r),e({profile:null,loading:!1,error:"Failed to load profile. Please check your internet connection and try again."})}},subscribeToProfile:e=>(console.log("\uD83D\uDD14 Subscription disabled to prevent infinite loops for:",e),()=>{}),updateProfile:async(t,l)=>{try{await (0,s.mZ)((0,s.doc)(a.db,"users",t),l);let o=r().profile;o&&o.id===t&&e({profile:Object.assign(Object.assign({},o),l)})}catch(e){throw console.error("Error updating profile:",e),e}},createProfile:async(r,t)=>{try{let l=Object.assign(Object.assign({},t),{id:r,joinedAt:new Date});await (0,s.BN)((0,s.doc)(a.db,"users",r),l),e({profile:l,loading:!1,error:null})}catch(r){console.error("Error creating profile:",r),e({error:"Failed to create profile",loading:!1})}},followUser:async(t,l)=>{try{let o=(0,s.doc)(a.db,"users",t),i=(0,s.doc)(a.db,"users",l);await (0,s.mZ)(o,{following:(0,s.hq)(l)}),await (0,s.mZ)(i,{followers:(0,s.hq)(t)});let n=r().profile;if(n&&n.id===t){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:[...r.filter(e=>e!==l),l]})})}}catch(e){throw console.error("Error following user:",e),e}},unfollowUser:async(t,l)=>{try{let o=(0,s.doc)(a.db,"users",t),i=(0,s.doc)(a.db,"users",l);await (0,s.mZ)(o,{following:(0,s.C3)(l)}),await (0,s.mZ)(i,{followers:(0,s.C3)(t)});let n=r().profile;if(n&&n.id===t){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:r.filter(e=>e!==l)})})}}catch(e){throw console.error("Error unfollowing user:",e),e}},fetchUserAnalytics:async e=>{try{return{monthlySales:0,monthlyOrders:0,monthlyRefunds:0,topProducts:[]}}catch(e){throw console.error("Error fetching analytics:",e),e}},clearProfile:()=>{e({profile:null,loading:!1,error:null})},clearUserCache:e=>{i.delete(e),o.delete(e),console.log("\uD83D\uDDD1️ Cleared cache and tracker for:",e)}}))}},e=>{e.O(0,[2992,9507,1794,6671,8599,7194,6874,4978,8441,5964,7358],()=>e(e.s=88629)),_N_E=e.O()}]);