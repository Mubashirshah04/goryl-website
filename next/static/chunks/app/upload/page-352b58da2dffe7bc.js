(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5610,5994],{25610:(e,r,s)=>{"use strict";s.d(r,{db:()=>h,j2:()=>u,storage:()=>m});var t=s(23915),l=s(16203),a=s(35317),o=s(90858),i=s(92144),n=s(81115),c=s(86864);let d=(0,t.Wp)({apiKey:"AIzaSyByhCgo_k9i8_AstSaZkZ3Atv5Rt2eOjhc",authDomain:"zaillisy.firebaseapp.com",databaseURL:"https://zaillisy-default-rtdb.firebaseio.com",projectId:"zaillisy",storageBucket:"zaillisy.firebasestorage.app",messagingSenderId:"984913226421",appId:"1:984913226421:web:c648bbccdd5055cf6cecfc",measurementId:"G-95WJ280TC9"}),u=(0,l.xI)(d),h=(0,a.aU)(d);(0,n.C3)(d);let m=(0,o.c7)(d);(0,i.Uz)(d);try{(0,c.TT)().then(e=>{e?((0,c.P5)(d),console.log("\uD83D\uDCCA Firebase Analytics enabled")):console.log("ℹ️ Firebase Analytics not supported in this environment")}).catch(()=>{console.warn("Analytics check failed; continuing without Analytics")})}catch(e){console.warn("Analytics initialization skipped:",e)}console.log("\uD83D\uDE80 Using production Firebase configuration for project:",d.options.projectId)},63772:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var t=s(95155),l=s(12115),a=s(6874),o=s.n(a),i=s(35695),n=s(68084),c=s(98868),d=s(37108),u=s(27213),h=s(9803),m=s(57434),p=s(29869),x=s(5937),g=s(84616),f=s(35169),b=s(23227),y=s(86151),j=s(56671);function w(){let{user:e,loading:r,refreshUserData:s}=(0,n.useAuthStore)(),{profile:a,loading:w,fetchProfile:v}=(0,c.n)(),N=(0,i.useRouter)(),A=(0,l.useRef)(!1),[U,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!r&&!A.current){if(!e)return void N.push("/auth-login");A.current=!0,(async()=>{try{await v(e.uid)}catch(e){console.error("Error fetching profile:",e),j.oR.error("Error loading profile information")}})()}},[null==e?void 0:e.uid,r,N]),(0,l.useEffect)(()=>{if(a){let e=["personal_seller","brand","company"];C(e.includes(a.role)),e.includes(a.role)||(j.oR.error("Only sellers can access the upload page"),N.push("/"))}},[a,N]);let O=[{title:"Upload Product",description:"Add a new product to your store",icon:d.A,href:"/product/upload",color:"bg-purple-500",hoverColor:"hover:bg-purple-600"},{title:"Upload Images",description:"Add product images and galleries",icon:u.A,href:"/upload/images",color:"bg-blue-500",hoverColor:"hover:bg-blue-600"},{title:"Upload Video",description:"Create product videos and reels",icon:h.A,href:"/upload/video",color:"bg-red-500",hoverColor:"hover:bg-red-600"},{title:"Upload Documents",description:"Add product documentation",icon:m.A,href:"/upload/documents",color:"bg-green-500",hoverColor:"hover:bg-green-600"}];return r||w?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),(0,t.jsx)("p",{className:"text-gray-600",children:"Checking your authentication status"})]})}):e?U?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(o(),{href:"/",className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(f.A,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Upload Content"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(null==a?void 0:a.role)==="brand"&&"Brand Account",(null==a?void 0:a.role)==="company"&&"Company Account",(null==a?void 0:a.role)==="personal_seller"&&"Personal Seller Account"]})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:[(null==a?void 0:a.role)==="brand"&&(0,t.jsx)(x.A,{className:"w-4 h-4 text-purple-600"}),(null==a?void 0:a.role)==="company"&&(0,t.jsx)(b.A,{className:"w-4 h-4 text-purple-600"}),(null==a?void 0:a.role)==="personal_seller"&&(0,t.jsx)(y.A,{className:"w-4 h-4 text-purple-600"})]})})]})})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What would you like to upload?"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Choose the type of content you want to add to your store"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map((e,r)=>{let s=e.icon;return(0,t.jsx)(o(),{href:e.href,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200 group",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color," ").concat(e.hoverColor," transition-colors"),children:(0,t.jsx)(s,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-purple-600 transition-colors",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,t.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(f.A,{className:"w-4 h-4 text-gray-400 rotate-180"})})]})},r)})}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Your Upload Stats"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==a?void 0:a.totalProducts)||0}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Products"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Images"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:"0"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Videos"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"0"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Documents"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-purple-50 rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900 mb-3",children:"Upload Tips"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-purple-800",children:[(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:"Use high-quality images (minimum 800x800px)"})]}),(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:"Add detailed product descriptions"})]}),(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:"Include multiple images from different angles"})]}),(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:"Set competitive prices to attract buyers"})]})]})]})]})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(x.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Seller Access Required"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Only sellers can access the upload page"}),(0,t.jsxs)(o(),{href:"/become-seller",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Become a Seller"]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(p.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please login first"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You need to be authenticated to upload content"})]})})}},68084:(e,r,s)=>{"use strict";s.d(r,{useAuthStore:()=>i});var t=s(88693),l=s(16203),a=s(25610),o=s(95997);let i=(0,t.vt)((e,r)=>({user:null,userData:null,loading:!0,unsubscribeUserListener:null,setUser:r=>e({user:r}),setUserData:r=>e({userData:r}),setLoading:r=>e({loading:r}),setUnsubscribeUserListener:r=>e({unsubscribeUserListener:r}),initialize:()=>(0,l.hg)(a.j2,async t=>{if(t)try{let l=await (0,o.gL)(t.uid),a=Object.assign(Object.assign({},t),{role:null==l?void 0:l.role});e({user:a,userData:l,loading:!1});let{doc:i,onSnapshot:n}=await Promise.resolve().then(s.bind(s,35317)),{db:c}=await Promise.resolve().then(s.bind(s,25610)),d=i(c,"users",t.uid),u=n(d,s=>{if(s.exists()){let t=s.data();e({userData:t,user:Object.assign(Object.assign({},r().user||{}),{role:t.role})})}});e({unsubscribeUserListener:u})}catch(r){console.error("Error fetching user data:",r),e({user:Object.assign(Object.assign({},t),{role:void 0}),userData:null,loading:!1})}else{let{unsubscribeUserListener:s}=r();s&&(s(),e({unsubscribeUserListener:null})),e({user:null,userData:null,loading:!1})}}),refreshUserData:async()=>{let{user:s}=r();if(s)try{let t=await (0,o.gL)(s.uid);e({userData:t,user:Object.assign(Object.assign({},r().user||{}),{role:null==t?void 0:t.role})}),setTimeout(async()=>{try{let t=await (0,o.gL)(s.uid);e({userData:t,user:Object.assign(Object.assign({},r().user||{}),{role:null==t?void 0:t.role})})}catch(e){console.warn("Error in delayed refresh:",e)}},500)}catch(e){console.error("Error refreshing user data:",e)}}}));setTimeout(()=>{i.getState().initialize()},0)},72919:(e,r,s)=>{Promise.resolve().then(s.bind(s,63772))},95997:(e,r,s)=>{"use strict";s.d(r,{G6:()=>i,HW:()=>u,Hh:()=>c,Jv:()=>n,eT:()=>g,gL:()=>h,qc:()=>x,xw:()=>d});var t=s(16203),l=s(35317),a=s(25610);let o=new t.HF;o.addScope("email"),o.addScope("profile");let i=async()=>{var e;try{let r=(await (0,t.df)(a.j2,o)).user;if(!(await (0,l.x7)((0,l.doc)(a.db,"users",r.uid))).exists()){let s={id:r.uid,email:r.email||"",name:r.displayName||"Anonymous",username:(null==(e=r.email)?void 0:e.split("@")[0])||"user",avatar:r.photoURL||"",role:"user",accountType:"user",isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,l.BN)((0,l.doc)(a.db,"users",r.uid),s)}return r}catch(e){throw console.error("Google sign-in error:",e),e}},n=async(e,r)=>{try{return(await (0,t.x9)(a.j2,e,r)).user}catch(e){throw e}},c=async function(e,r,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";try{let i=(await (0,t.eJ)(a.j2,e,r)).user;await (0,t.r7)(i,{displayName:s});try{let r={id:i.uid,email:i.email||"",name:s,username:e.split("@")[0],avatar:i.photoURL||"",bio:"",role:o,accountType:o,isVerified:!1,isVerifiedSeller:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,followersCount:0,followingCount:0,productsCount:0,rating:0,totalSales:0};await (0,l.BN)((0,l.doc)(a.db,"users",i.uid),r),console.log("✅ User profile created successfully")}catch(e){console.warn("Could not create user document in Firestore:",e)}return i}catch(e){throw console.error("Signup error:",e),e}},d=async e=>{try{await (0,t.J1)(a.j2,e)}catch(e){throw e}},u=()=>a.j2.currentUser,h=async e=>{try{let r=await (0,l.x7)((0,l.doc)(a.db,"users",e));if(r.exists())return r.data();return null}catch(e){return console.error("Error getting user data:",e),null}},m=async e=>{try{let r=await h(e);return(null==r?void 0:r.role)||"user"}catch(e){return console.error("Error checking user role:",e),"user"}},p=async e=>{try{let r=await h(e);return(null==r?void 0:r.accountType)||"user"}catch(e){return console.error("Error checking account type:",e),"user"}},x=async e=>"admin"===await m(e),g=async e=>["personal_seller","brand","company"].includes(await p(e))},98868:(e,r,s)=>{"use strict";s.d(r,{n:()=>n});var t=s(88693),l=s(35317),a=s(25610);let o=new Map,i=new Map,n=(0,t.vt)((e,r)=>({profile:null,loading:!1,error:null,fetchProfile:async r=>{var s,t;if(o.get(r))return void console.log("\uD83D\uDEAB BLOCKED: Already fetching profile for:",r);e({loading:!0,error:null});let n=i.get(r);if(n){console.log("\uD83D\uDCBE CACHE HIT: Using cached profile for:",r),e({profile:n,loading:!1,error:null});return}console.log("\uD83D\uDD0D Store: Starting fetchProfile for:",r);try{let n=await (0,l.x7)((0,l.doc)(a.db,"users",r));if(n.exists()){let l=n.data(),a=Object.assign(Object.assign({id:r,joinedAt:(null==(s=l.joinedAt)?void 0:s.toDate())||new Date,usernameLastChanged:null==(t=l.usernameLastChanged)?void 0:t.toDate()},l),{customPhotoURL:l.customPhotoURL||"",photoURL:l.photoURL||"",profilePic:l.profilePic||"",avatar:l.avatar||"",name:l.name&&"string"==typeof l.name&&l.name.trim()||"User",bio:l.bio&&"string"==typeof l.bio?l.bio.trim():"",followers:Array.isArray(l.followers)?l.followers:[],following:Array.isArray(l.following)?l.following:[]});console.log("✅ Store: Profile loaded successfully:",a.name,a.id),i.set(r,a),e({profile:a,loading:!1})}else console.log("❌ Store: Profile document does not exist for:",r),o.delete(r),e({profile:null,loading:!1,error:"Profile not found. This user may not exist or their profile may be private."})}catch(s){console.error("❌ Store: Firestore error:",s),o.delete(r),e({profile:null,loading:!1,error:"Failed to load profile. Please check your internet connection and try again."})}},subscribeToProfile:e=>(console.log("\uD83D\uDD14 Subscription disabled to prevent infinite loops for:",e),()=>{}),updateProfile:async(s,t)=>{try{await (0,l.mZ)((0,l.doc)(a.db,"users",s),t);let o=r().profile;o&&o.id===s&&e({profile:Object.assign(Object.assign({},o),t)})}catch(e){throw console.error("Error updating profile:",e),e}},createProfile:async(r,s)=>{try{let t=Object.assign(Object.assign({},s),{id:r,joinedAt:new Date});await (0,l.BN)((0,l.doc)(a.db,"users",r),t),e({profile:t,loading:!1,error:null})}catch(r){console.error("Error creating profile:",r),e({error:"Failed to create profile",loading:!1})}},followUser:async(s,t)=>{try{let o=(0,l.doc)(a.db,"users",s),i=(0,l.doc)(a.db,"users",t);await (0,l.mZ)(o,{following:(0,l.hq)(t)}),await (0,l.mZ)(i,{followers:(0,l.hq)(s)});let n=r().profile;if(n&&n.id===s){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:[...r.filter(e=>e!==t),t]})})}}catch(e){throw console.error("Error following user:",e),e}},unfollowUser:async(s,t)=>{try{let o=(0,l.doc)(a.db,"users",s),i=(0,l.doc)(a.db,"users",t);await (0,l.mZ)(o,{following:(0,l.C3)(t)}),await (0,l.mZ)(i,{followers:(0,l.C3)(s)});let n=r().profile;if(n&&n.id===s){let r=Array.isArray(n.following)?n.following:[];e({profile:Object.assign(Object.assign({},n),{following:r.filter(e=>e!==t)})})}}catch(e){throw console.error("Error unfollowing user:",e),e}},fetchUserAnalytics:async e=>{try{return{monthlySales:0,monthlyOrders:0,monthlyRefunds:0,topProducts:[]}}catch(e){throw console.error("Error fetching analytics:",e),e}},clearProfile:()=>{e({profile:null,loading:!1,error:null})},clearUserCache:e=>{i.delete(e),o.delete(e),console.log("\uD83D\uDDD1️ Cleared cache and tracker for:",e)}}))}},e=>{e.O(0,[2992,9507,1794,6671,8599,7194,6874,2814,8441,5964,7358],()=>e(e.s=72919)),_N_E=e.O()}]);